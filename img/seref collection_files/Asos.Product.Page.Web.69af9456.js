define("Models/Component",[],(function(){return function(){this.componentConfig=null,this.type=null,this.elementId=null,this.element=null,this.useComponentTemplate=!1,this.data=null,this.state=void 0,this.setComponentConfig=function(ue){this.componentConfig=void 0!==ue?ue:null},this.setType=function(ue){this.type=void 0!==ue?ue:null},this.setElementId=function(ue){this.elementId=void 0!==ue?ue:this.type,this.element=document.getElementById(this.elementId)},this.setUseComponentTemplate=function(ue){ue=void 0===ue||ue,this.useComponentTemplate="boolean"!=typeof ue||ue},this.setData=function(ue){this.data=void 0!==ue?ue:null},this.setState=function(ue){this.state=void 0!==ue?ue:this.state},this.getComponentPath=function(){return null!==this.type?"Components/"+this.type+"/"+this.type:null},this.getElement=function(){return this.element},this.getDictionary=function(){if(!this.element||!this.element.hasAttribute("dictionary"))return null;try{return JSON.parse(this.element.getAttribute("dictionary"))}catch(ue){return null}},this.getComponentConfig=function(){return!this.useComponentTemplate&&this.element&&(this.componentConfig.template={element:this.element}),this.componentConfig}}})),define("ProductUtils/ComponentLoader",["ko","Models/Component"],(function(ue,he){return function(){this.register=function(pe,me,fe){var ge=new he;return ge.setType(pe.type),ge.setElementId(pe.elementId),ge.setData(me),ge.setState(fe),ge.setUseComponentTemplate(pe.useComponentTemplate),require([ge.getComponentPath()],(function(he){ge.setComponentConfig(he),ue.components.register(pe.name,ge.getComponentConfig()),(null!==ge.getElement()||ge.getElement()!=={})&&ue.applyBindingsToNode(ge.getElement(),{component:{name:pe.name,params:{dictionary:ge.getDictionary(),data:ge.data,state:ge.state}}})})),ge},this.unregister=function(he){he&&0!==he.length&&ue.components.isRegistered(he)&&ue.components.unregister(he)}}})),define("videoPlayerView",[],(function(){return'<div class="asos-media-players">\r\n    <div class="amp-video-player amp-relative">\r\n        <video class="amp-page amp-video-element" data-bind="foreach: sources" controls="controls" muted>\r\n            <source data-bind="attr: { type: type, src: src }" />\r\n        </video>\r\n        <div class="amp-page amp-page-message amp-error-page" data-bind="visible: isErrorPageVisible">\r\n            <div class="amp-message-container">\r\n                <div class="amp-message-box">\r\n                    <h2 data-bind="html: messages.errorHeaderText"></h2>\r\n                    <p data-bind="html: messages.errorMessageText"></p>\r\n                    <div class="amp-button amp-button-black" data-bind="html: messages.refreshButtonText, click: refreshButtonClicked"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="amp-page amp-page-message amp-unsupported-page" data-bind="visible: isUnsupportedPageVisible">\r\n            <div class="amp-message-container">\r\n                <div class="amp-message-box">\r\n                    <h2 data-bind="html: messages.unsupportedHeaderText"></h2>\r\n                    <p data-bind="html: messages.unsupportedMessageText"></p>\r\n                    <div class="amp-button amp-button-black" data-bind="html: messages.closeButtonText, click: closeButtonClicked"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'})),define("utils/scene7.config",[],(function(){"use strict";return function(ue,he){this.jsonpCallback="s7jsonResponse",this.jsonpErrorCallback="s7jsonError",this.scene7imageServer=ue,this.scene7videoServer=he,this.spinsetManifestFileUrlPattern=this.scene7imageServer+"/products/test-desc/[productID]-spinset",this.imageUrlPattern=this.scene7imageServer+"/products/[assetID]",this.maxImageSize={width:4e3,height:4e3},this.imageMinPartitionFactors={horizontal:3,vertical:4}}})),define("utils/scene7.DataProvider",["$"],(function(ue){"use strict";var t=function(ue){this.scene7config=ue,this.manifestCache={}};return t.prototype.ABSOLUTE_URL_REGEX=/^https?:\/\/|^\/\//i,t.requests=[],t.prototype.getJson=function(he,pe,me){Object.prototype.hasOwnProperty.call(window,this.scene7config.jsonpErrorCallback)||(window[this.scene7config.jsonpErrorCallback]=function(ue,he){var pe=t.requests[he];"function"==typeof pe.onError&&pe.onError()}),Object.prototype.hasOwnProperty.call(window,this.scene7config.jsonpCallback)||(window[this.scene7config.jsonpCallback]=function(ue,he){var pe=t.requests[he];"function"==typeof pe.onSuccess&&pe.onSuccess(ue)}),t.requests.push({onSuccess:pe,onError:me});var fe=t.requests.length-1;ue.ajax({url:he.replace("[requestID]",fe),jsonp:!1,jsonpCallback:this.scene7config.jsonpCallback+fe,dataType:"jsonp",cache:!0,success:pe,error:me})},t.prototype.getManifestData=function(he){this.ABSOLUTE_URL_REGEX.test(he)||(he="//"+he);var pe=new ue.Deferred;if(!this.manifestCache[he]){var me=he+(-1===he.indexOf("?")?"?":"&")+"req=set,json&id=[requestID]";return this.getJson(me,function(me){this.manifestCache[he]=me,pe.resolve(ue.extend(!0,{},me))}.bind(this),(function(){pe.reject()})),pe.promise()}return pe.resolve(ue.extend(!0,{},this.manifestCache[he])),pe.promise()},t})),define("videoPlayer/DataMapper",[],(function(){"use strict";var e=function(ue){this.scene7config=ue};return e.prototype.VIDEO_FILE_URL_PATTERN="/products/[assetID]",e.prototype.VIDEO_TYPE_FORMAT={m3u8:"application/x-mpegurl",mp4:"video/mp4"},e.prototype.map=function(ue){return ue.set.item.map(this.getAssetFromServerItem.bind(this))},e.prototype.getAssetFromServerItem=function(ue){return{bitrate:parseInt(ue.v.bitrate,10),width:parseInt(ue.v.dx,10),height:parseInt(ue.v.dy,10),src:this.scene7config.scene7videoServer+this.VIDEO_FILE_URL_PATTERN.replace("[assetID]",ue.v.path),format:ue.v.suffix,type:this.VIDEO_TYPE_FORMAT[ue.v.suffix],fps:ue.userdata&&ue.userdata[0]&&ue.userdata[0].Video_Frame_Rate?parseFloat(ue.userdata[0].Video_Frame_Rate):null}},e})),define("utils/deviceHelper",[],(function(){"use strict";var e=function(){return this};return e.prototype.getScreenProperties=function(ue){return{width:ue.screen.width,height:ue.screen.height}},e.prototype.isPhysicalSizeGreaterThanLogicalSize=function(ue){return ue&&void 0!==ue.systemXDPI&&void 0!==ue.logicalXDPI&&ue.systemXDPI>ue.logicalXDPI},e.prototype.getDevicePixelRatio=function(ue){var he=1;return this.isPhysicalSizeGreaterThanLogicalSize(ue.screen)?he=ue.screen.systemXDPI/ue.screen.logicalXDPI:void 0!==ue.devicePixelRatio&&(he=ue.devicePixelRatio),he},e.prototype.getWidthInPhysicalPixels=function(ue){return this.getScreenProperties(ue).width*this.getDevicePixelRatio(ue)},e.prototype.getHeightInPhysicalPixels=function(ue){return this.getScreenProperties(ue).height*this.getDevicePixelRatio(ue)},new e})),define("videoPlayer/AssetsProvider",["$","utils/deviceHelper"],(function(ue,he){"use strict";var i=function(ue,he,pe){this.scene7config=ue,this.dataProvider=he,this.dataMapper=pe};return i.prototype.MANIFEST_PATH_PATTERN="/products/test-desc/[productID]-catwalk-AVS",i.prototype.DEFAULT_FPS=50,i.prototype.DEFAULT_BITRATES={480:800,720:1200,1080:2500},i.prototype.getAssetsByFormat=function(ue,he){return ue.filter((function(ue){return ue.format===he}))},i.prototype.isBetterWidthDifference=function(ue,he){return 0===ue||ue>0&&0>he||!(0>ue&&he>0)&&Math.abs(ue)<=Math.abs(he)},i.prototype.getBestAssetsByWidth=function(ue){var pe=he.getWidthInPhysicalPixels(window),me=ue[0].width,fe=ue[0].width-pe,ge=fe;return ue.forEach(function(ue){ge=ue.width-pe,this.isBetterWidthDifference(ge,fe)&&(me=ue.width,fe=ge)}.bind(this)),ue.filter((function(ue){return ue.width===me}))},i.prototype.getPreferredBitrateForDevice=function(ue){ue=ue||this.DEFAULT_BITRATES;var pe=Object.keys(ue).map((function(ue){return parseInt(ue,10)})),me=he.getWidthInPhysicalPixels(window),fe=pe[0],ge=pe[0]-me,ve=ge;return pe.forEach((function(ue){ve=ue-me,Math.abs(ve)<=Math.abs(ge)&&(fe=ue,ge=ve)})),1e3*ue[fe]},i.prototype.getBestAssetsByBitrate=function(ue,he){var pe=this.getPreferredBitrateForDevice(he),me=ue[0].bitrate,fe=ue[0].bitrate-pe,ge=fe;return ue.forEach(function(ue){ge=ue.bitrate-pe,Math.abs(ge)<=Math.abs(fe)&&(me=ue.bitrate,fe=ge)}.bind(this)),ue.filter((function(ue){return ue.bitrate===me}))},i.prototype.getBestAssetsByFPS=function(ue,he){var pe=ue[0].fps,me=ue[0].fps-he,fe=me;return ue.forEach(function(ue){fe=ue.fps-he,Math.abs(fe)<=Math.abs(me)&&(pe=ue.fps,me=fe)}.bind(this)),ue.filter((function(ue){return ue.fps===pe}))},i.prototype.getBestAsset=function(ue,he,pe){if(ue&&ue.length){pe=pe||this.DEFAULT_FPS;var me=this.getBestAssetsByWidth(ue);if(me.length<=1)return me[0];var fe=this.getBestAssetsByBitrate(me,he);return fe.length<=1?fe[0]:this.getBestAssetsByFPS(fe,pe)[0]}},i.prototype.getBestAssets=function(ue,he,pe){var me=this.getBestAssetsFromManifest(he,pe);return-1!==pe.formats.indexOf("m3u8")&&this.addM3U8Asset(ue,me),me},i.prototype.getBestAssetsFromManifest=function(ue,he){var pe=[];return he.formats.forEach(function(me){var fe=this.getBestAsset(this.getAssetsByFormat(ue,me),he.preferredBitrates,he.preferredFPS);fe&&pe.push(fe)}.bind(this)),pe},i.prototype.addM3U8Asset=function(ue,he){he.push({src:ue+".m3u8",format:"m3u8",type:this.dataMapper.VIDEO_TYPE_FORMAT.m3u8})},i.prototype.getAssets=function(ue,he,pe,me){return isNaN(parseInt(ue,10))||(ue=this.scene7config.scene7videoServer+this.MANIFEST_PATH_PATTERN.replace("[productID]",ue)),this.dataProvider.getManifestData(ue).then(function(me){var fe=this.dataMapper.map(me),ge=this.getBestAssets(ue,fe,he);return ge.sort((function(ue,pe){return he.formats.indexOf(ue.format)-he.formats.indexOf(pe.format)})),"function"==typeof pe&&pe(ge),ge}.bind(this)).fail((function(){"function"==typeof me&&me()}))},i})),define("videoPlayer/ViewModel",["ko"],(function(ue){return function t(he,pe){this.events=he,this.sources=ue.observableArray(),this.messages=pe,this.isErrorPageVisible=ue.observable(!1),this.isUnsupportedPageVisible=ue.observable(!1),this.refreshButtonClicked=function(){this.events.trigger("refreshButtonClicked")}.bind(this),this.closeButtonClicked=function(){this.events.trigger("closeButtonClicked")}.bind(this)}})),define("utils/fullScreenHelper",["$"],(function(ue){"use strict";var t=function(ue,he){this.events=ue,this.fullscreenLauncherName=this.getFullscreenLauncherName(he),this.fullscreenElementName=this.getFullscreenElementName(he),this.fullscreenCancelName=this.getFullscreenCancelName(he),this.elementStyle={position:null,top:null,left:null,width:null,height:null,backgroundColor:null,zIndex:null},this.setEventListeners(he)};return t.prototype.getFullscreenLauncherName=function(ue){return ue.body.requestFullscreen?"requestFullscreen":ue.body.mozRequestFullScreen?"mozRequestFullScreen":ue.body.webkitRequestFullscreen?"webkitRequestFullscreen":ue.body.msRequestFullscreen?"msRequestFullscreen":null},t.prototype.getFullscreenCancelName=function(ue){return ue.exitFullscreen?"exitFullscreen":ue.mozCancelFullScreen?"mozCancelFullScreen":ue.webkitExitFullscreen?"webkitExitFullscreen":null},t.prototype.getFullscreenElementName=function(ue){return"fullscreenElement"in ue?"fullscreenElement":"webkitFullscreenElement"in ue?"webkitFullscreenElement":"msFullscreenElement"in ue?"msFullscreenElement":"mozFullScreenElement"in ue?"mozFullScreenElement":null},t.prototype.getNativeFullScreenElement=function(ue){return this.fullscreenElementName?ue[this.fullscreenElementName]:void 0},t.prototype.getFullScreenElement=function(ue){return this.fullscreenElement?this.fullscreenElement:this.getNativeFullScreenElement(ue)},t.prototype.launchIntoFullscreen=function(ue,he){if(!this.getFullScreenElement(ue)){if(this.fullscreenLauncherName)return void he[this.fullscreenLauncherName]();this.fullscreenElement=he,this.onFullScreenChange(ue)}},t.prototype.exitFullScreen=function(ue,he){if(!he||!this.getNativeFullScreenElement(ue)||this.getNativeFullScreenElement(ue)===he){if(this.fullscreenCancelName)return void(this.getNativeFullScreenElement(ue)&&ue[this.fullscreenCancelName]());if(this.fullscreenElement)try{var pe=this.fullscreenElement.parentNode,me=this.fullscreenElement.nextSibling;pe.removeChild(this.fullscreenElement),pe.insertBefore(this.fullscreenElement,me)}catch(ue){}finally{this.onFullScreenChange(ue)}}},t.prototype.onFullScreenChange=function(ue){return this.getFullScreenElement(ue)?void this.events.trigger("fullScreenEntered"):void this.events.trigger("fullScreenExited")},t.prototype.setEventListeners=function(he){ue(he).on("webkitfullscreenchange mozfullscreenchange fullscreenchange",this.onFullScreenChange.bind(this,he))},new t(ue({}),document)})),define("videoPlayer/Controller",["$","utils/fullScreenHelper"],(function(ue,he){"use strict";var i=function(he,pe,me,fe,ge){this.loadedAssets=null,this.loadedSources=void 0,this.progressEvents={0:!1,25:!1,50:!1,75:!1,100:!1},this.assetsProvider=he,this.events=fe,this.viewModel=me,this.videoElement=ge,this.params={},this.isError=!1,ue.extend(!0,this.params,pe),this.setEventListeners()};return i.prototype.setEventListeners=function(){var pe=ue(this.videoElement);pe.on("timeupdate",function(){this.onVideoTimeUpdated(),this.videoElement.ended&&this.onVideoPlaybackEnded()}.bind(this)),pe.on("webkitendfullscreen",function(){this.onFullScreenExited()}.bind(this)),pe.on("error",function(ue){var he=ue.target;if(he===this.videoElement)this.onVideoError();else if("SOURCE"===he.tagName){var pe=Array.prototype.indexOf.call(this.videoElement.querySelectorAll("source"),he);this.onVideoSourceError(pe)}}.bind(this)),pe.on("canplay",function(){this.isError=!1}.bind(this)),this.viewModel.events.on("videoSourceError",function(ue){this.onVideoSourceError(ue.detail.sourceIndex)}.bind(this)),this.viewModel.events.on("refreshButtonClicked",function(){this.onRefreshButtonClicked()}.bind(this)),this.viewModel.events.on("closeButtonClicked",function(){this.onCloseButtonClicked()}.bind(this)),he.events.on("fullScreenExited",function(){this.onFullScreenExited()}.bind(this)),he.events.on("fullScreenEntered fullScreenExited",function(){this.onFullScreenChanged()}.bind(this))},i.prototype.onVideoPlaybackEnded=function(){--this.remainingLoopCount>0?(this.videoElement.currentTime=0,this.resetProgressEvents(),this.videoElement.play(),this.events.trigger("loopEnded")):(this.stop(),this.events.trigger("allLoopsEnded"))},i.prototype.onVideoTimeUpdated=function(){var ue=100*this.videoElement.currentTime/this.videoElement.duration;for(var pe in this.progressEvents){var me=parseInt(pe,10);!this.progressEvents[pe]&&ue>=me&&(this.progressEvents[pe]=!0,this.events.trigger("progress",{detail:{src:this.videoElement.currentSrc,value:me,isFullScreen:he.getFullScreenElement(document)===this.videoElement}}))}},i.prototype.onVideoError=function(){this.isError=!0,this.viewModel.isErrorPageVisible(!0),this.events.trigger("playbackError")},i.prototype.onVideoSourceError=function(ue){ue===this.viewModel.sources().length-1&&this.onVideoError()},i.prototype.onRefreshButtonClicked=function(){this.videoElement.load(),this.start()},i.prototype.onCloseButtonClicked=function(){this.events.trigger("playerExitRequested")},i.prototype.onFullScreenExited=function(){this.params.closeOnFullScreenExited&&this.events.trigger("playerExitRequested")},i.prototype.onFullScreenChanged=function(){if(!this.params.closeOnFullScreenExited&&4===this.videoElement.readyState){var ue=function(){this.videoElement.currentTime<1?(this.videoElement.currentTime+=1,this.videoElement.currentTime-=1):(this.videoElement.currentTime-=1,this.videoElement.currentTime+=1)}.bind(this);this.videoElement.paused?(this.videoElement.play(),ue(),this.videoElement.pause()):(ue(),this.videoElement.pause(),this.videoElement.play())}},i.prototype.hideInfoPages=function(){this.viewModel.isErrorPageVisible(!1)},i.prototype.start=function(ue){this.hideInfoPages(),this.resetProgressEvents(),this.play(this.params.initialLoopCount||1,this.params.startInFullScreen,ue)},i.prototype.play=function(ue,pe,me){me&&this.setAssets(me),this.videoElement&&this.videoElement.play&&this.loadedAssets&&!this.viewModel.isUnsupportedPageVisible()&&((this.isError||JSON.stringify(this.loadedAssets)!==JSON.stringify(this.viewModel.sources()))&&(this.viewModel.sources(this.loadedAssets),this.videoElement.load()),this.remainingLoopCount=ue,this.videoElement.readyState>0&&(this.videoElement.currentTime=0),pe&&he.launchIntoFullscreen(document,this.videoElement,!0),this.videoElement.play())},i.prototype.stop=function(){this.videoElement&&this.videoElement.pause&&(he.exitFullScreen(document,this.videoElement,!0),this.videoElement.pause(),this.videoElement.readyState>0&&(this.videoElement.currentTime=0))},i.prototype.resetProgressEvents=function(){for(var ue in this.progressEvents)this.progressEvents[ue]=!1},i.prototype.hasSupportedAssets=function(ue){var he=document.createElement("video");return!(!ue||!he.canPlayType)&&ue.filter((function(ue){return""!==he.canPlayType(ue.type)})).length>0},i.prototype.setAssets=function(ue){this.loadedAssets=ue,this.viewModel.isUnsupportedPageVisible(!this.hasSupportedAssets(this.loadedAssets))},i.prototype.loadAssets=function(ue,he,pe,me){this.loadedAssets=null,this.assetsProvider.getAssets(ue,he,function(ue){ue&&ue.length>0?(this.setAssets(ue),"function"==typeof pe&&pe()):"function"==typeof me&&me()}.bind(this),(function(){"function"==typeof me&&me()}))},i})),define("videoPlayer/component",["ko","$","videoPlayerView","utils/scene7.config","utils/scene7.DataProvider","videoPlayer/DataMapper","videoPlayer/AssetsProvider","videoPlayer/ViewModel","videoPlayer/Controller"],(function(ue,he,pe,me,fe,ge,ve,be,ye){"use strict";return{viewModel:{createViewModel:function(ue,pe){var Se=he({}),xe=he({}),we=pe.element.querySelector(".asos-media-players .amp-video-player .amp-video-element");ue.messages&&ue.messages.unsupportedHeaderText&&(ue.messages.unsupportedHeaderText=ue.messages.unsupportedHeaderText.replace("[BrowserName]","Your browser"));var ke=new be(Se,ue.messages),_e=new me(ue.scene7.imageServer,ue.scene7.videoServer),Ie=new fe(_e),Ce=new ge(_e),Pe=new ve(_e,Ie,Ce),Te=new ye(Pe,ue.player,ke,xe,we),ze={start:Te.start.bind(Te),stop:Te.stop.bind(Te),loadAssets:Te.loadAssets.bind(Te),events:Te.events};return ue.api(ze),ke}},template:pe,synchronous:!0}})),define("spinViewerView",[],(function(){return'<div class="asos-media-players amp-relative">\r\n    <div class="amp-spin-viewer amp-relative" data-bind=\'css: { "pannable": isPannable() }\'>\r\n        <div class="amp-spinner amp-relative">\r\n            <div class="amp-page amp-spin">\r\n                <div class="amp-page amp-hint" data-bind="fadeVisible: isHintVisible">\r\n                    <div class="amp-hint-container">\r\n                        <div class="amp-hint-gesture amp-first">\r\n                            <div class="amp-hint-gesture-img sprite drag"></div>\r\n                        </div>\r\n                        <div class="amp-clear"></div>\r\n                        <div class="amp-hint-gesture amp-first">\r\n                            <span data-bind="text: messages.hintDragText"></span>\r\n                        </div>\r\n                        <div class="amp-clear"></div>\r\n                    </div>\r\n                </div>\r\n                <div class="amp-page amp-overlay"></div>\r\n                \x3c!-- ko if: !touchDevice --\x3e\r\n                <span class="sr-only" aria-live="polite" data-bind="text: zoomLevelText"></span>\r\n                <button class="amp-zoom" data-bind="attr: { \'aria-describedby\': hintId }, click: handleClick, event: { keydown: handleKeyDown, keyup: handleKeyUp, blur: handleOnBlur, focus: handleOnFocus }, clickBubble: false">\r\n                    <span class="sprite" data-bind="css: { zoomPlus: zoomPlus, zoomMinus: zoomMinus }"></span>\r\n                </button>\r\n                <p class="zoom-hint" data-bind="text: messages.zoomHint, css: { showHint: showHint }, attr: { id: hintId }" aria-hidden="true"></p>\r\n                \x3c!-- /ko --\x3e\r\n                <div class="amp-page amp-images"></div>\r\n            </div>\r\n            <div class="amp-page amp-loading" data-bind="visible: isLoadingPageVisible">\r\n                <div class="amp-loading-img"></div>\r\n                <span data-bind="text: loadingPercentage() + \'%\'"></span>\r\n            </div>\r\n            <div class="amp-page amp-page-message amp-error-page" data-bind="visible: isErrorPageVisible">\r\n                <div class="amp-message-container">\r\n                    <div class="amp-message-box">\r\n                        <h2 data-bind="html: messages.errorHeaderText"></h2>\r\n                        <p data-bind="html: messages.spinsetErrorMessageText"></p>\r\n                        <div class="amp-button amp-button-black" data-bind="html: messages.refreshButtonText, click: refreshButtonClicked"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="amp-controls">\r\n            <div class="amp-button amp-wrapper" data-bind="visible: isCloseButtonVisible, click: closeButtonClicked">\r\n                <div class="sprite close"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>                '})),define("utils/sizeHelper",[],(function(){"use strict";function e(){}return e.prototype.getProportionalSize=function(ue,he){var pe={width:ue.width,height:ue.height},me=he.width/he.height,fe=ue.width/ue.height;return fe>me?pe.width=pe.height*me:me>fe&&(pe.height=pe.width/me),pe.width=Math.round(pe.width),pe.height=Math.round(pe.height),pe},e.prototype.resizeCanvas=function(ue,he){var pe=document.createElement("canvas");pe.width=he.width,pe.height=he.height,pe.getContext("2d").drawImage(ue,0,0,he.width,he.height),ue.width=he.width,ue.height=he.height,ue.getContext("2d").drawImage(pe,0,0)},new e})),define("utils/imageProvider",["$"],(function(ue){"use strict";var t=function(){};return t.prototype.setImage=function(he,pe,me,fe,ge,ve){if(ge&&ue.support.cors)return pe.onload=me,ue.ajax(he,{success:function(ue){pe.src=he},error:fe,cache:!ve});if(ve)he+="&"+(new Date).getTime();else if(pe.complete&&pe.src===he)return"function"==typeof me&&me(),null;return pe.onload=me,pe.onerror=fe,pe.src=he,null},new t})),define("utils/scene7.ImageLoader",["$","utils/sizeHelper","utils/imageProvider"],(function(ue,he,pe){"use strict";var n=function(ue,he){this.urlQueryStringPattern="wid=[width]&hei=[height]&size=[width],[height]&rect=[startH],[startW],[lengthH],[lengthW]&qlt=[qlt]",this.scene7Config=ue,this.canUseCanvas=document.createElement("canvas").getContext,this.useCors=he,this.loadRequests=[]};return n.prototype.getPartitionFactors=function(ue,he){return{horizontal:Math.max(Math.ceil(ue.width/this.scene7Config.maxImageSize.width),he?this.scene7Config.imageMinPartitionFactors.horizontal:1),vertical:Math.max(Math.ceil(ue.height/this.scene7Config.maxImageSize.height),he?this.scene7Config.imageMinPartitionFactors.vertical:1)}},n.prototype.getTile=function(ue,he,me,fe,ge,ve,be,ye,Se){var xe=new Image,we=this.getTileUrl(he,me,fe,ge,ve,be);return{xhr:pe.setImage(we,xe,function(){xe.onload=null,this.loadRequests[ue].isActive&&"function"==typeof ye&&ye(xe)}.bind(this),function(){xe.onload=null,this.loadRequests[ue].isActive&&"function"==typeof Se&&Se()}.bind(this),this.useCors),image:xe}},n.prototype.addTile=function(ue,he,pe,me,fe,ge,ve,be,ye,Se,xe){this.loadRequests[ue].isActive&&this.loadRequests[ue].tiles.push(this.getTile(ue,pe,me,ge,ve,be,ye,function(pe){if(this.loadRequests[ue].isActive){var me=(this.getTileBox(fe,ge,ve,be),he.querySelector('.tile[data-tile-hp="'+ge+'" ][data-tile-vp="'+ve+'"]')),ye=me.querySelector("img");ye||((ye=new Image).style.width="100%",ye.style.height="100%",me.appendChild(ye)),ye.src=pe.src,"function"==typeof Se&&Se()}}.bind(this),xe))},n.prototype.addTiles=function(ue,he,pe,me,fe,ge,ve,be,ye,Se){var xe=ue.length,u=function(){0===--xe&&"function"==typeof ye&&ye()};0===xe&&"function"==typeof ye&&ye();for(var we=0;we<ue.length;we++)this.addTile(he,pe,me,fe,ge,ue[we].horizontal,ue[we].vertical,ve,be,u,Se)},n.prototype.loadFullImage=function(ue,me,fe,ge,ve,be,ye,Se,xe){(ge.width>this.scene7Config.maxImageSize.width||ge.height>this.scene7Config.maxImageSize.height)&&(ge=he.getProportionalSize(this.scene7Config.maxImageSize,ge));var we=fe.querySelector(".fullImageContainer"),ke=fe.querySelector(".partitionedImageContainer"),_e=fe.querySelector(".fullImageContainer img"),Ie=!1;we||((we=document.createElement("div")).className="fullImageContainer",fe.insertBefore(we,fe.firstChild)),_e?Ie=!_e.complete:((_e=new Image).className="img",_e.style.width="100%",_e.style.height="100%",we.appendChild(_e)),we.style.width=Math.floor(ve.width)+"px",we.style.height=Math.floor(ve.height)+"px",ye&&(we.style.position=ye.position,we.style.top=ye.top,we.style.left=ye.left),we.setAttribute("data-url",me),we.setAttribute("data-target-qlt",be),we.setAttribute("data-target-width",Math.floor(ge.width)),we.setAttribute("data-target-height",Math.floor(ge.height)),we.setAttribute("data-output-width",Math.floor(ve.width)),we.setAttribute("data-output-height",Math.floor(ve.height));var Ce=this.getTileUrl(me,ge,0,0,{vertical:1,horizontal:1},be),Pe=pe.setImage(Ce,_e,function(){if(_e.onload=null,this.loadRequests[ue].isActive){if(ke)for(;ke.lastChild;)ke.removeChild(ke.lastChild);"function"==typeof Se&&Se()}}.bind(this),function(){_e.onload=null,this.loadRequests[ue].isActive&&"function"==typeof xe&&xe()}.bind(this),this.useCors,Ie);this.loadRequests[ue].tiles.push({image:_e,xhr:Pe})},n.prototype.loadImageToContainer=function(ue,he,pe,me,fe,ge,ve,be,ye,Se,xe){ve=ve||{x:pe.width/2,y:pe.height/2},Se=Se||"";var we,ke,_e=this.getPartitionFactors(pe,ye),Ie=(_e.horizontal,_e.vertical,{topLeft:{x:0,y:0},bottomRight:{x:me.width-1,y:me.height-1}}),Ce=this.getTileDataForPoint(ve,me,_e),Pe=this.loadRequests.push({isActive:!0,tiles:[]})-1,Te=function(){this.addTiles([Ce],Pe,ze,ue,pe,me,_e,Se,function(){return!!this.loadRequests[Pe].isActive&&void this.addTiles(we,Pe,ze,ue,pe,me,_e,Se,function(){return!!this.loadRequests[Pe].isActive&&void this.addTiles(ke,Pe,ze,ue,pe,me,_e,Se,function(){this.loadRequests[Pe].isActive=!1,"function"==typeof fe&&fe()}.bind(this),function(){return!!this.loadRequests[Pe].isActive&&void("function"==typeof ge&&ge())}.bind(this))}.bind(this),function(){return!!this.loadRequests[Pe].isActive&&void("function"==typeof ge&&ge())}.bind(this))}.bind(this),function(){return!!this.loadRequests[Pe].isActive&&void("function"==typeof ge&&ge())}.bind(this))}.bind(this);if((be=be||Ie).topLeft.x=Math.max(Math.min(be.topLeft.x,Ie.bottomRight.x),Ie.topLeft.x),be.topLeft.y=Math.max(Math.min(be.topLeft.y,Ie.bottomRight.y),Ie.topLeft.y),be.bottomRight.x=Math.max(Math.min(be.bottomRight.x,Ie.bottomRight.x),be.topLeft.x),be.bottomRight.y=Math.max(Math.min(be.bottomRight.y,Ie.bottomRight.y),be.topLeft.y),we=this.getTilesDataForArea(be,me,[Ce],Ce,_e),ke=this.getTilesDataForArea(Ie,me,[Ce].concat(we),Ce,_e),!this.canUseCanvas||1===_e.vertical&&1===_e.horizontal)this.loadFullImage(Pe,ue,he,pe,me,Se,xe,fe,ge);else{var ze=he.querySelector(".partitionedImageContainer");if(!ze){(ze=document.createElement("div")).className="partitionedImageContainer",ze.style.width=me.width+"px",ze.style.height=me.height+"px",ze.setAttribute("aria-hidden","true"),xe&&(ze.style.position=xe.position,ze.style.top=xe.top,ze.style.left=xe.left);for(var Ae=0;Ae<_e.vertical;Ae++)for(var Ee=0;Ee<_e.horizontal;Ee++){var Me=document.createElement("div");Me.className="tile",Me.style.float="left",Me.style.width=100/_e.horizontal+"%",Me.style.height=100/_e.vertical+"%",Me.setAttribute("data-tile-hp",Ee),Me.setAttribute("data-tile-vp",Ae),ze.appendChild(Me)}he.appendChild(ze)}Te()}return Pe},n.prototype.getTilesDataForArea=function(ue,he,pe,me,fe){pe=pe||[],me=me||{horizontal:0,vertical:0};for(var ge=this.getTileDataForPoint(ue.topLeft,he,fe),ve=this.getTileDataForPoint(ue.bottomRight,he,fe),be=[],c=function(ue){return ue.horizontal===ye&&ue.vertical===Se},ye=ge.horizontal;ye<=ve.horizontal;ye++)for(var Se=ge.vertical;Se<=ve.vertical;Se++)0===pe.filter(c).length&&be.push({horizontal:ye,vertical:Se});return be.sort((function(ue,he){return Math.sqrt(Math.pow(ue.horizontal-me.horizontal,2)+Math.pow(ue.vertical-me.vertical))>Math.sqrt(Math.pow(he.horizontal-me.horizontal,2)+Math.pow(he.vertical-me.vertical))?1:-1})),be},n.prototype.getTileDataForPoint=function(ue,he,pe){for(var me,fe={horizontal:null,vertical:null},ge=0;ge<pe.horizontal&&null===fe.horizontal;ge++)me=this.getTileBox(he,ge,0,pe),ue.x>=me.left&&ue.x<me.left+me.width&&(fe.horizontal=ge);for(var ve=0;ve<pe.vertical&&null===fe.vertical;ve++)me=this.getTileBox(he,0,ve,pe),ue.y>=me.top&&ue.y<me.top+me.height&&(fe.vertical=ve);return fe},n.prototype.getTileBox=function(ue,he,pe,me){var fe=this.getPartPosition(he,ue.width,me.horizontal),ge=this.getPartPosition(pe,ue.height,me.vertical);return{left:fe,top:ge,width:this.getPartPosition(he+1,ue.width,me.horizontal)-fe,height:this.getPartPosition(pe+1,ue.height,me.vertical)-ge}},n.prototype.getPartPosition=function(ue,he,pe){return Math.floor(he*ue/pe)},n.prototype.getTileUrl=function(ue,he,pe,me,fe,ge){var ve=this.getTileBox(he,pe,me,fe),be=ue.indexOf("?")>-1?"&":"?";return(ue+be+this.urlQueryStringPattern).replace(/\[width\]/g,Math.floor(he.width)).replace(/\[height\]/g,Math.floor(he.height)).replace("[startH]",Math.floor(ve.left)).replace("[startW]",Math.floor(ve.top)).replace("[lengthH]",Math.floor(ve.width)).replace("[lengthW]",Math.floor(ve.height)).replace("[qlt]",ge)},n.prototype.cancelAllLoadRequests=function(){for(var ue=0;ue<this.loadRequests.length;ue++)this.cancelLoadRequest(ue)},n.prototype.cancelLoadRequest=function(ue){if("number"==typeof ue&&ue<this.loadRequests.length&&this.loadRequests[ue].isActive){var he=this.loadRequests[ue];if(he.isActive=!1,he.tiles.length)for(var pe=he.tiles[0].image.src,me=he.tiles.pop();me;)me.xhr?me.xhr.abort():(me.image.onload=null,me.image.src=pe),me=he.tiles.pop()}},n})),define("spinViewer/DataProvider",[],(function(){"use strict";var e=function(ue,he){this.scene7config=ue,this.scene7dataProvider=he};return e.prototype.mapManifestData=function(ue){var he={frameUrls:[],maxSize:{width:0,height:0}};if(ue.set.item.length>0){var pe=ue.set.item[0].set?ue.set.item.length:1;if(1===pe)he.frameUrls[0]=ue.set.item.map(function(ue){return this.scene7config.imageUrlPattern.replace("[assetID]",ue.i.n)}.bind(this)),he.maxSize.width=parseInt(ue.set.item[0].dx,10),he.maxSize.height=parseInt(ue.set.item[0].dy,10);else{ue.set.item[0].set.item.length>0&&(he.maxSize.width=parseInt(ue.set.item[0].set.item[0].dx,10),he.maxSize.height=parseInt(ue.set.item[0].set.item[0].dy,10));for(var me=0;pe>me;me++)he.frameUrls[me]=ue.set.item[me].set.item.map(function(ue){return this.scene7config.imageUrlPattern.replace("[assetID]",ue.i.n)}.bind(this))}}return he},e.prototype.getSpinsetDataForImageUrls=function(ue,he,pe){for(var me,fe="[baseUrl]?imageset={[imageSet]}&req=set,json",ge=[],ve=0;ve<ue.length;ve++)me=ue[ve].split("?").shift(),fe=fe.replace("[baseUrl]",me),ge.push(me.split("/").pop());return fe=fe.replace("[imageSet]",ge.join(",")),this.scene7dataProvider.getManifestData(fe).then(function(ue){var pe=[];for(Array.isArray(ue.set.item)||(ue.set.item=[ue.set.item]),ve=0;ve<ue.set.item.length;ve++)pe.push(this.mapManifestData({set:{item:[ue.set.item[ve]]}}));return"function"==typeof he&&he(pe),pe}.bind(this)).fail((function(){"function"==typeof pe&&pe()}))},e.prototype.getSpinsetDataForImageUrl=function(ue,he,pe){var me=(ue=ue.split("?").shift())+"?req=set,json";return this.scene7dataProvider.getManifestData(me).then(function(ue){return ue.set.item=[ue.set.item],"function"==typeof he&&he(ue),ue}.bind(this)).fail((function(){"function"==typeof pe&&pe()}))},e.prototype.getSpinsetDataForProduct=function(ue,he,pe){var me=this.scene7config.spinsetManifestFileUrlPattern.replace("[productID]",ue);return this.scene7dataProvider.getManifestData(me).then(function(ue){var pe=this.mapManifestData(ue);return"function"==typeof he&&he(pe),pe}.bind(this)).fail((function(){"function"==typeof pe&&pe()}))},e})),define("spinViewer/AssetsProvider",[],(function(){"use strict";var e=function(ue){this.dataProvider=ue};return e.prototype.getAssets=function(ue,he,pe){Array.isArray(ue)?this.dataProvider.getSpinsetDataForImageUrls(ue,he,pe):isNaN(ue)?this.dataProvider.getSpinsetDataForImageUrl(ue,he,pe):this.dataProvider.getSpinsetDataForProduct(ue,he,pe)},e})),define("spinViewer/ViewModel",["ko"],(function(ue){return function t(he,pe){function n(){return Object.keys(fe).filter((function(ue){return fe[ue]}))}function r(ue){Object.keys(fe).forEach((function(he){ue!==he&&-1!==ge.indexOf(he)&&(fe[he]=!1)}))}var me,fe={};this.touchDevice="ontouchstart"in document.documentElement,this.events=he,this.messages=pe,this.isCloseButtonVisible=ue.observable(!1),this.isPannable=ue.observable(!1),this.isLoadingPageVisible=ue.observable(!1),this.loadingPercentage=ue.observable(0),this.isErrorPageVisible=ue.observable(!1),this.isHintVisible=ue.observable(!1),this.zoomPlus=ue.observable(!0),this.zoomMinus=ue.observable(!1),this.showHint=ue.observable(!1),this.zoomLevelText=ue.observable(""),this.zoomLevel=ue.observable(0),this.updateLiveRegion=function(ue){clearTimeout(me),this.zoomLevelText(ue),me=setTimeout(function(){this.zoomLevelText("")}.bind(this),1e3)}.bind(this),this.hintId=Math.random().toString(36).substring(7),this.refreshButtonClicked=function(){this.events.trigger("refreshButtonClicked")}.bind(this),this.closeButtonClicked=function(){this.events.trigger("closeButtonClicked")}.bind(this),this.handleOnFocus=function(){this.showHint(!0)}.bind(this),this.handleOnBlur=function(){this.showHint(!1)}.bind(this),this.handleClick=function(){this.events.trigger("zoomCenter")}.bind(this);var ge=["arrowleft","arrowright","arrowup","arrowdown","a","d","w","s"];this.handleKeyDown=function(ue,he){var pe=he.key.toLowerCase();if(fe[pe]=!0,-1===ge.indexOf(pe))return!0;n().filter((function(ue){return-1===ge.indexOf(ue)})).length>0&&r(pe);var me=function s(){return n().filter((function(ue){return-1!==ge.indexOf(ue)}))}().join(",");this.events.trigger("panImage",me)},this.handleKeyUp=function(ue,he){var pe=he.key.toLowerCase();return fe[pe]=!1,-1!==ge.indexOf(pe)&&r(),!0},this.touchDevice||(this.events.on("canZoomIn",function(){this.zoomPlus(!0),this.zoomMinus(!1),0===this.zoomLevel()?(this.updateLiveRegion(pe.zoomTwoHundred),this.zoomLevel(200)):(this.updateLiveRegion(pe.zoomOneHundred),this.zoomLevel(0))}.bind(this)),this.events.on("cantZoomIn",function(){this.zoomPlus(!1),this.zoomMinus(!0),this.updateLiveRegion(pe.zoomFourHundred),this.zoomLevel(400)}.bind(this)))}})),define("utils/ImageScaler",["$"],(function(ue){"use strict";var t=function(he){this.options={},ue.extend(!0,this.options,he)};return t.prototype.getScaledImageSize=function(ue){return{width:this.getScaledImageLength(this.options.baseSize.width,this.options.maxSize.width,ue),height:this.getScaledImageLength(this.options.baseSize.height,this.options.maxSize.height,ue)}},t.prototype.getScaledImageLength=function(ue,he,pe){return pe?Math.pow(Math.pow(ue,1/pe)*he/ue,pe):ue},t})),define("utils/ImageZoomer",["ko","$","utils/sizeHelper"],(function(ue,he,pe){"use strict";var n=function(pe,me,fe,ge){this.events=he({}),this.imageLoader=pe,this.inputImageScaler=me,this.outputImageScaler=fe,this.currentLevel=ue.observable(0),this.options={},he.extend(!0,this.options,ge),this.options.zoomFactors=[0].concat(this.options.zoomFactors),this.updateCanZoomDummy=ue.observable(!1),this.currLoadRequestId=null,this.currentPosition={x:0,y:0},this.currentSize={width:0,height:0},this.canZoomIn=ue.computed(this.canZoomIn,this),this.canZoomOut=ue.computed(this.canZoomOut,this),this.fullImageStatus=this.FULL_IMAGE_STATUS.NotLoaded};return n.prototype.FULL_IMAGE_STATUS={NotLoaded:0,Loaded:2},n.prototype.init=function(){var ue=he(this.options.container);this.containerSize={width:this.options.containerSize?this.options.containerSize.width:ue.width(),height:this.options.containerSize?this.options.containerSize.height:ue.height()},this.currentSize=this.getOutputImageSize(this.currentLevel()),this.currentPosition=this.getSanitizedPosition(this.currentPosition,this.currentSize),this.applyPosition(!0),this.updateCanZoomDummy(!this.updateCanZoomDummy())},n.prototype.getNextClosestLevel=function(ue){for(var he=0,pe=0;pe<=this.options.zoomFactors.length;){var me=this.currentSize,fe=this.getOutputImageSize(pe);if(ue&&(me.width===fe.width||me.height===fe.height)){he=pe;break}if(me.width<fe.width||me.height<fe.height){he=pe;break}pe++}return he},n.prototype.resize=function(ue,he,pe){var me=this.getNextClosestLevel(!0);this.options.containerSize=he.containerSize,this.options.outputBaseSize=he.outputBaseSize,this.outputImageScaler.options.baseSize=he.imageScalersOptions.outputImageScalerOptions.baseSize,this.outputImageScaler.options.maxSize=he.imageScalersOptions.outputImageScalerOptions.maxSize,this.init(),ue&&this.zoom((function(){return me}),null,pe)},n.prototype.canZoomIn=function(){this.updateCanZoomDummy();var ue=this.currentSize,he=this.getOutputImageSize(this.options.zoomFactors.length-1);return ue.width<he.width||ue.height<he.height},n.prototype.canZoomOut=function(){this.updateCanZoomDummy();var ue=this.getOutputImageSize(0),he=this.currentSize;return ue.width<he.width||ue.height<he.height},n.prototype.zoomIn=function(ue,he,pe){return this.canZoomIn()?void this.zoom(this.getNextClosestLevel.bind(this,!1),he,pe):ue?void this.zoomReset(pe):void("function"==typeof pe&&pe())},n.prototype.zoomOut=function(ue,he){return this.canZoomOut()?void this.zoom(function(){return this.currentLevel()-1}.bind(this),ue,he):void("function"==typeof he&&he())},n.prototype.zoomReset=function(ue,he){if(he){var pe=this.getOutputImageSize(0),me=this.getZoomedImageBox(this.currentSize,this.currentPosition,pe);return this.currentSize=me.size,this.currentPosition=me.position,this.applyPosition(!0),this.currentLevel(0),void("function"==typeof ue&&setTimeout(ue,0))}this.zoom(function(){return 0}.bind(this),void 0,ue)},n.prototype.loadImage=function(ue,he,pe,me,fe,ge,ve,be,ye,Se,xe){ue&&(this.imageLoader.cancelLoadRequest(this.currLoadRequestId),this.currLoadRequestId=this.imageLoader.loadImageToContainer(ue,he,pe,me,function(){this.currLoadRequestId=null,"function"==typeof fe&&setTimeout(fe,0)}.bind(this),ge,ve,be,ye,Se,xe))},n.prototype.zoom=function(ue,he,pe,me){this.imageLoader.cancelLoadRequest(this.currLoadRequestId),this.fullImageStatus!==this.FULL_IMAGE_STATUS.Loaded&&(this.fullImageStatus=this.FULL_IMAGE_STATUS.NotLoaded);var fe=ue(),ge=(this.getInputImageSize(fe),this.getOutputImageSize(fe)),ve=this.getZoomedImageBox(this.currentSize,this.currentPosition,ge,he),be=fe>0;this.currentSize=ve.size,this.currentPosition=ve.position,this.applyPosition(!0),this.fullImageStatus===this.FULL_IMAGE_STATUS.NotLoaded&&be&&(this.loadImage(this.options.baseUrl,this.options.container,this.getInputImageSize(this.options.zoomFactors.length-1),this.currentSize,function(){this.fullImageStatus=this.FULL_IMAGE_STATUS.Loaded,this.applyPosition(),"function"==typeof pe&&pe()}.bind(this),function(){this.fullImageStatus=this.FULL_IMAGE_STATUS.NotLoaded,"function"==typeof me&&me()}.bind(this),ve.focalPointOnSourceImage,this.getVisibleArea(ve.position),!0,this.options.zoomJpgQlt,{position:"absolute",top:Math.floor(this.currentPosition.y)+"px",left:Math.floor(this.currentPosition.x)+"px"}),this.applyPosition(!0)),this.currentLevel(fe),this.updateCanZoomDummy(!this.updateCanZoomDummy()),this.setPartitionedImageVisibility()},n.prototype.getVisibleArea=function(ue){return{topLeft:{x:-ue.x,y:-ue.y},bottomRight:{x:this.containerSize.width-ue.x,y:this.containerSize.height-ue.y}}},n.prototype.getZoomedImageBox=function(ue,he,pe,me){me||(me={x:this.containerSize.width/2,y:this.containerSize.height/2}),me=this.getSanitizedPointOnImage(me,ue);var fe=this.getPointOnOutputImageFromContainer(me,ue),ge=pe.width-ue.width,ve=pe.height-ue.height,be=pe.width/ue.width,ye={x:fe.x*be,y:fe.y*be},Se=ge*(fe.x/ue.width),xe=ve*(fe.y/ue.height);return{size:pe,position:this.getSanitizedPosition({x:he.x-Se,y:he.y-xe},pe),focalPointOnSourceImage:ye}},n.prototype.moveBy=function(ue){this.canZoomOut()&&(ue.x||ue.y)&&(this.currentPosition=this.getSanitizedPosition({x:this.currentPosition.x+ue.x,y:this.currentPosition.y+ue.y},this.currentSize),this.applyPosition())},n.prototype.applyPosition=function(ue){var pe=he(this.options.container),me=Math.floor(this.currentSize.width),fe=Math.floor(this.currentSize.height),ge=pe.find(".fullImageContainer, .partitionedImageContainer");ge.css({position:"absolute",top:Math.floor(this.currentPosition.y)+"px",left:Math.floor(this.currentPosition.x)+"px",width:me+"px",height:fe+"px"}),ge.attr({"data-output-width":me,"data-output-height":fe})},n.prototype.getInputImageSize=function(ue){var he=this.options.zoomFactors[ue],pe=this.inputImageScaler.getScaledImageSize(he);return pe.width<this.options.outputBaseSize.width||pe.height<this.options.outputBaseSize.height?this.options.outputBaseSize:pe},n.prototype.getOutputImageSize=function(ue){if(0===ue)return this.options.outputBaseSize;var he=this.options.zoomFactors[ue],pe=this.outputImageScaler.getScaledImageSize(he);return pe.width<this.options.outputBaseSize.width||pe.height<this.options.outputBaseSize.height?this.options.outputBaseSize:pe},n.prototype.setPlaceholderImage=function(ue){var pe=(this.getInputImageSize(0),this.getOutputImageSize(0)),me=this.getZoomedImageBox(this.currentSize,this.currentPosition,pe);this.currentSize=me.size,this.currentPosition=me.position;var fe=he(this.options.container).children(),ge=document.createElement("div");ge.className="fullImageContainer",ue.className="img",ue.style.width="100%",ue.style.height="100%",ge.appendChild(ue),this.options.container.appendChild(ge),this.applyPosition(!0),fe.remove()},n.prototype.getBezel=function(ue){return{horizontal:Math.max(this.containerSize.width-Math.floor(ue.width),0)/2,vertical:Math.max(this.containerSize.height-Math.floor(ue.height),0)/2}},n.prototype.getSanitizedPosition=function(ue,he){var pe=this.getBezel(he),me={x:Math.floor(ue.x),y:Math.floor(ue.y)};return me.x=Math.min(me.x,pe.horizontal),me.y=Math.min(me.y,pe.vertical),me.x=Math.max(me.x,this.containerSize.width-Math.floor(he.width)-pe.horizontal),me.y=Math.max(me.y,this.containerSize.height-Math.floor(he.height)-pe.vertical),me},n.prototype.getSanitizedPointOnImage=function(ue,he){var pe=this.getBezel(he),me={x:ue.x,y:ue.y};return me.x=Math.max(me.x,pe.horizontal),me.y=Math.max(me.y,pe.vertical),me.x=Math.min(me.x,this.containerSize.width-pe.horizontal),me.y=Math.min(me.y,this.containerSize.height-pe.vertical),me},n.prototype.getPointOnOutputImageFromContainer=function(ue){return{x:ue.x-this.currentPosition.x,y:ue.y-this.currentPosition.y}},n.prototype.getCurrentImageDisplaySize=function(){return this.currentSize},n.prototype.scale=function(ue,he,pe,me){pe||(pe={x:0,y:0});var fe={width:Math.max(ue.width*he,this.options.outputBaseSize.width),height:Math.max(ue.height*he,this.options.outputBaseSize.height)};if(!me){var ge=this.getOutputImageSize(this.options.zoomFactors.length-1);fe.width=Math.min(ge.width,fe.width),fe.height=Math.min(ge.height,fe.height)}var ve=this.getZoomedImageBox(this.currentSize,this.currentPosition,fe,pe);this.currentPosition=ve.position,this.currentSize=ve.size,this.applyPosition(!0),this.updateCanZoomDummy(!this.updateCanZoomDummy()),this.setPartitionedImageVisibility()},n.prototype.setPartitionedImageVisibility=function(){return this.options.container.querySelector(".partitionedImageContainer")?this.currentSize.width===this.options.outputBaseSize.width?void(this.options.container.querySelector(".partitionedImageContainer").style.display="none"):void(this.options.container.querySelector(".partitionedImageContainer").style.display="block"):void 0},n})),function(ue,he,pe,me){"use strict";function s(ue,he,pe){return setTimeout(l(ue,pe),he)}function r(ue,he,pe){return!!Array.isArray(ue)&&(o(ue,pe[he],pe),!0)}function o(ue,he,pe){var fe;if(ue)if(ue.forEach)ue.forEach(he,pe);else if(ue.length!==me)for(fe=0;fe<ue.length;)he.call(pe,ue[fe],fe,ue),fe++;else for(fe in ue)ue.hasOwnProperty(fe)&&he.call(pe,ue[fe],fe,ue)}function a(he,pe,me){var fe="DEPRECATED METHOD: "+pe+"\n"+me+" AT \n";return function(){var pe=new Error("get-stack-trace"),me=pe&&pe.stack?pe.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ge=ue.console&&(ue.console.warn||ue.console.log);return ge&&ge.call(ue.console,fe,me),he.apply(this,arguments)}}function c(ue,he,pe){var me,ge=he.prototype;(me=ue.prototype=Object.create(ge)).constructor=ue,me._super=ge,pe&&fe(me,pe)}function l(ue,he){return function(){return ue.apply(he,arguments)}}function d(ue,he){return typeof ue==be?ue.apply(he&&he[0]||me,he):ue}function u(ue,he){return ue===me?he:ue}function h(ue,he,pe){o(g(he),(function(he){ue.addEventListener(he,pe,!1)}))}function p(ue,he,pe){o(g(he),(function(he){ue.removeEventListener(he,pe,!1)}))}function m(ue,he){for(;ue;){if(ue==he)return!0;ue=ue.parentNode}return!1}function f(ue,he){return ue.indexOf(he)>-1}function g(ue){return ue.trim().split(/\s+/g)}function v(ue,he,pe){if(ue.indexOf&&!pe)return ue.indexOf(he);for(var me=0;me<ue.length;){if(pe&&ue[me][pe]==he||!pe&&ue[me]===he)return me;me++}return-1}function b(ue){return Array.prototype.slice.call(ue,0)}function y(ue,he,pe){for(var me=[],fe=[],ge=0;ge<ue.length;){var ve=he?ue[ge][he]:ue[ge];v(fe,ve)<0&&me.push(ue[ge]),fe[ge]=ve,ge++}return pe&&(me=he?me.sort((function(ue,pe){return ue[he]>pe[he]})):me.sort()),me}function S(ue,he){for(var pe,fe,ve=he[0].toUpperCase()+he.slice(1),be=0;be<ge.length;){if((fe=(pe=ge[be])?pe+ve:he)in ue)return fe;be++}return me}function _(he){var pe=he.ownerDocument||he;return pe.defaultView||pe.parentWindow||ue}function k(ue,he){var pe=this;this.manager=ue,this.callback=he,this.element=ue.element,this.target=ue.options.inputTarget,this.domHandler=function(he){d(ue.options.enable,[ue])&&pe.handler(he)},this.init()}function C(ue,he,pe){var me=pe.pointers.length,fe=pe.changedPointers.length,ge=he&Ee&&me-fe==0,ve=he&(Le|Ve)&&me-fe==0;pe.isFirst=!!ge,pe.isFinal=!!ve,ge&&(ue.session={}),pe.eventType=he,function P(ue,he){var pe=ue.session,me=he.pointers,fe=me.length;pe.firstInput||(pe.firstInput=z(he)),fe>1&&!pe.firstMultiple?pe.firstMultiple=z(he):1===fe&&(pe.firstMultiple=!1);var ge=pe.firstInput,ve=pe.firstMultiple,be=ve?ve.center:ge.center,ye=he.center=A(me);he.timeStamp=xe(),he.deltaTime=he.timeStamp-ge.timeStamp,he.angle=V(be,ye),he.distance=L(be,ye),function x(ue,he){var pe=he.center,me=ue.offsetDelta||{},fe=ue.prevDelta||{},ge=ue.prevInput||{};he.eventType!==Ee&&ge.eventType!==Le||(fe=ue.prevDelta={x:ge.deltaX||0,y:ge.deltaY||0},me=ue.offsetDelta={x:pe.x,y:pe.y}),he.deltaX=fe.x+(pe.x-me.x),he.deltaY=fe.y+(pe.y-me.y)}(pe,he),he.offsetDirection=M(he.deltaX,he.deltaY);var we=E(he.deltaTime,he.deltaX,he.deltaY);he.overallVelocityX=we.x,he.overallVelocityY=we.y,he.overallVelocity=Se(we.x)>Se(we.y)?we.x:we.y,he.scale=ve?function D(ue,he){return L(he[0],he[1],Ge)/L(ue[0],ue[1],Ge)}(ve.pointers,me):1,he.rotation=ve?function R(ue,he){return V(he[1],he[0],Ge)+V(ue[1],ue[0],Ge)}(ve.pointers,me):0,he.maxPointers=pe.prevInput?he.pointers.length>pe.prevInput.maxPointers?he.pointers.length:pe.prevInput.maxPointers:he.pointers.length,T(pe,he);var ke=ue.element;m(he.srcEvent.target,ke)&&(ke=he.srcEvent.target),he.target=ke}(ue,pe),ue.emit("hammer.input",pe),ue.recognize(pe),ue.session.prevInput=pe}function T(ue,he){var pe,fe,ge,ve,be=ue.lastInterval||he,ye=he.timeStamp-be.timeStamp;if(he.eventType!=Ve&&(ye>Ae||be.velocity===me)){var xe=he.deltaX-be.deltaX,we=he.deltaY-be.deltaY,ke=E(ye,xe,we);fe=ke.x,ge=ke.y,pe=Se(ke.x)>Se(ke.y)?ke.x:ke.y,ve=M(xe,we),ue.lastInterval=he}else pe=be.velocity,fe=be.velocityX,ge=be.velocityY,ve=be.direction;he.velocity=pe,he.velocityX=fe,he.velocityY=ge,he.direction=ve}function z(ue){for(var he=[],pe=0;pe<ue.pointers.length;)he[pe]={clientX:ye(ue.pointers[pe].clientX),clientY:ye(ue.pointers[pe].clientY)},pe++;return{timeStamp:xe(),pointers:he,center:A(he),deltaX:ue.deltaX,deltaY:ue.deltaY}}function A(ue){var he=ue.length;if(1===he)return{x:ye(ue[0].clientX),y:ye(ue[0].clientY)};for(var pe=0,me=0,fe=0;he>fe;)pe+=ue[fe].clientX,me+=ue[fe].clientY,fe++;return{x:ye(pe/he),y:ye(me/he)}}function E(ue,he,pe){return{x:he/ue||0,y:pe/ue||0}}function M(ue,he){return ue===he?Re:Se(ue)>=Se(he)?0>ue?De:Oe:0>he?Ue:Fe}function L(ue,he,pe){pe||(pe=We);var me=he[pe[0]]-ue[pe[0]],fe=he[pe[1]]-ue[pe[1]];return Math.sqrt(me*me+fe*fe)}function V(ue,he,pe){pe||(pe=We);var me=he[pe[0]]-ue[pe[0]],fe=he[pe[1]]-ue[pe[1]];return 180*Math.atan2(fe,me)/Math.PI}function O(){this.evEl=qe,this.evWin=je,this.pressed=!1,k.apply(this,arguments)}function U(){this.evEl=Xe,this.evWin=Ke,k.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function F(){this.evTarget=Qe,this.evWin=et,this.started=!1,k.apply(this,arguments)}function N(ue,he){var pe=b(ue.touches),me=b(ue.changedTouches);return he&(Le|Ve)&&(pe=y(pe.concat(me),"identifier",!0)),[pe,me]}function B(){this.evTarget=it,this.targetIds={},k.apply(this,arguments)}function $(ue,he){var pe=b(ue.touches),me=this.targetIds;if(he&(Ee|Me)&&1===pe.length)return me[pe[0].identifier]=!0,[pe,pe];var fe,ge,ve=b(ue.changedTouches),be=[],ye=this.target;if(ge=pe.filter((function(ue){return m(ue.target,ye)})),he===Ee)for(fe=0;fe<ge.length;)me[ge[fe].identifier]=!0,fe++;for(fe=0;fe<ve.length;)me[ve[fe].identifier]&&be.push(ve[fe]),he&(Le|Ve)&&delete me[ve[fe].identifier],fe++;return be.length?[y(ge.concat(be),"identifier",!0),be]:void 0}function W(){k.apply(this,arguments);var ue=l(this.handler,this);this.touch=new B(this.manager,ue),this.mouse=new O(this.manager,ue),this.primaryTouch=null,this.lastTouches=[]}function G(ue,he){ue&Ee?(this.primaryTouch=he.changedPointers[0].identifier,H.call(this,he)):ue&(Le|Ve)&&H.call(this,he)}function H(ue){var he=ue.changedPointers[0];if(he.identifier===this.primaryTouch){var pe={x:he.clientX,y:he.clientY};this.lastTouches.push(pe);var me=this.lastTouches;setTimeout((function(){var ue=me.indexOf(pe);ue>-1&&me.splice(ue,1)}),nt)}}function q(ue){for(var he=ue.srcEvent.clientX,pe=ue.srcEvent.clientY,me=0;me<this.lastTouches.length;me++){var fe=this.lastTouches[me],ge=Math.abs(he-fe.x),ve=Math.abs(pe-fe.y);if(st>=ge&&st>=ve)return!0}return!1}function j(ue,he){this.manager=ue,this.set(he)}function X(ue){this.options=fe({},this.defaults,ue||{}),this.id=function w(){return _e++}(),this.manager=null,this.options.enable=u(this.options.enable,!0),this.state=mt,this.simultaneous={},this.requireFail=[]}function K(ue){return ue&yt?"cancel":ue&vt?"end":ue&gt?"move":ue&ft?"start":""}function J(ue){return ue==Fe?"down":ue==Ue?"up":ue==De?"left":ue==Oe?"right":""}function Q(ue,he){var pe=he.manager;return pe?pe.get(ue):ue}function ee(){X.apply(this,arguments)}function te(){ee.apply(this,arguments),this.pX=null,this.pY=null}function ie(){ee.apply(this,arguments)}function ne(){X.apply(this,arguments),this._timer=null,this._input=null}function se(){ee.apply(this,arguments)}function re(){ee.apply(this,arguments)}function oe(){X.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ae(ue,he){return(he=he||{}).recognizers=u(he.recognizers,ae.defaults.preset),new ce(ue,he)}function ce(ue,he){this.options=fe({},ae.defaults,he||{}),this.options.inputTarget=this.options.inputTarget||ue,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=ue,this.input=function I(ue){var he=ue.options.inputClass;return new(he||(Ce?U:Pe?B:Ie?W:O))(ue,C)}(this),this.touchAction=new j(this,this.options.touchAction),le(this,!0),o(this.options.recognizers,(function(ue){var he=this.add(new ue[0](ue[1]));ue[2]&&he.recognizeWith(ue[2]),ue[3]&&he.requireFailure(ue[3])}),this)}function le(ue,he){var pe,me=ue.element;me.style&&(o(ue.options.cssProps,(function(fe,ge){pe=S(me.style,ge),he?(ue.oldCssProps[pe]=me.style[pe],me.style[pe]=fe):me.style[pe]=ue.oldCssProps[pe]||""})),he||(ue.oldCssProps={}))}function de(ue,pe){var me=he.createEvent("Event");me.initEvent(ue,!0,!0),me.gesture=pe,pe.target.dispatchEvent(me)}var fe,ge=["","webkit","Moz","MS","ms","o"],ve=he.createElement("div"),be="function",ye=Math.round,Se=Math.abs,xe=Date.now;fe="function"!=typeof Object.assign?function(ue){if(ue===me||null===ue)throw new TypeError("Cannot convert undefined or null to object");for(var he=Object(ue),pe=1;pe<arguments.length;pe++){var fe=arguments[pe];if(fe!==me&&null!==fe)for(var ge in fe)fe.hasOwnProperty(ge)&&(he[ge]=fe[ge])}return he}:Object.assign;var we=a((function(ue,he,pe){for(var fe=Object.keys(he),ge=0;ge<fe.length;)(!pe||pe&&ue[fe[ge]]===me)&&(ue[fe[ge]]=he[fe[ge]]),ge++;return ue}),"extend","Use `assign`."),ke=a((function(ue,he){return we(ue,he,!0)}),"merge","Use `assign`."),_e=1,Ie="ontouchstart"in ue,Ce=S(ue,"PointerEvent")!==me,Pe=Ie&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Te="touch",ze="mouse",Ae=25,Ee=1,Me=2,Le=4,Ve=8,Re=1,De=2,Oe=4,Ue=8,Fe=16,Ne=De|Oe,Be=Ue|Fe,$e=Ne|Be,We=["x","y"],Ge=["clientX","clientY"];k.prototype={handler:function(){},init:function(){this.evEl&&h(this.element,this.evEl,this.domHandler),this.evTarget&&h(this.target,this.evTarget,this.domHandler),this.evWin&&h(_(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(_(this.element),this.evWin,this.domHandler)}};var He={mousedown:Ee,mousemove:Me,mouseup:Le},qe="mousedown",je="mousemove mouseup";c(O,k,{handler:function(ue){var he=He[ue.type];he&Ee&&0===ue.button&&(this.pressed=!0),he&Me&&1!==ue.which&&(he=Le),this.pressed&&(he&Le&&(this.pressed=!1),this.callback(this.manager,he,{pointers:[ue],changedPointers:[ue],pointerType:ze,srcEvent:ue}))}});var Ze={pointerdown:Ee,pointermove:Me,pointerup:Le,pointercancel:Ve,pointerout:Ve},Ye={2:Te,3:"pen",4:ze,5:"kinect"},Xe="pointerdown",Ke="pointermove pointerup pointercancel";ue.MSPointerEvent&&!ue.PointerEvent&&(Xe="MSPointerDown",Ke="MSPointerMove MSPointerUp MSPointerCancel"),c(U,k,{handler:function(ue){var he=this.store,pe=!1,me=ue.type.toLowerCase().replace("ms",""),fe=Ze[me],ge=Ye[ue.pointerType]||ue.pointerType,ve=ge==Te,be=v(he,ue.pointerId,"pointerId");fe&Ee&&(0===ue.button||ve)?0>be&&(he.push(ue),be=he.length-1):fe&(Le|Ve)&&(pe=!0),0>be||(he[be]=ue,this.callback(this.manager,fe,{pointers:he,changedPointers:[ue],pointerType:ge,srcEvent:ue}),pe&&he.splice(be,1))}});var Je={touchstart:Ee,touchmove:Me,touchend:Le,touchcancel:Ve},Qe="touchstart",et="touchstart touchmove touchend touchcancel";c(F,k,{handler:function(ue){var he=Je[ue.type];if(he===Ee&&(this.started=!0),this.started){var pe=N.call(this,ue,he);he&(Le|Ve)&&pe[0].length-pe[1].length==0&&(this.started=!1),this.callback(this.manager,he,{pointers:pe[0],changedPointers:pe[1],pointerType:Te,srcEvent:ue})}}});var tt={touchstart:Ee,touchmove:Me,touchend:Le,touchcancel:Ve},it="touchstart touchmove touchend touchcancel";c(B,k,{handler:function(ue){var he=tt[ue.type],pe=$.call(this,ue,he);pe&&this.callback(this.manager,he,{pointers:pe[0],changedPointers:pe[1],pointerType:Te,srcEvent:ue})}});var nt=2500,st=25;c(W,k,{handler:function(ue,he,pe){var me=pe.pointerType==Te,fe=pe.pointerType==ze;if(!(fe&&pe.sourceCapabilities&&pe.sourceCapabilities.firesTouchEvents)){if(me)G.call(this,he,pe);else if(fe&&q.call(this,pe))return;this.callback(ue,he,pe)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var rt=S(ve.style,"touchAction"),ot=rt!==me,at="compute",ct="auto",lt="manipulation",dt="none",ut="pan-x",ht="pan-y",pt=function Y(){if(!ot)return!1;var he={},pe=ue.CSS&&ue.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(me){he[me]=!pe||ue.CSS.supports("touch-action",me)})),he}();j.prototype={set:function(ue){ue==at&&(ue=this.compute()),ot&&this.manager.element.style&&pt[ue]&&(this.manager.element.style[rt]=ue),this.actions=ue.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var ue=[];return o(this.manager.recognizers,(function(he){d(he.options.enable,[he])&&(ue=ue.concat(he.getTouchAction()))})),function Z(ue){if(f(ue,dt))return dt;var he=f(ue,ut),pe=f(ue,ht);return he&&pe?dt:he||pe?he?ut:ht:f(ue,lt)?lt:ct}(ue.join(" "))},preventDefaults:function(ue){var he=ue.srcEvent,pe=ue.offsetDirection;if(!this.manager.session.prevented){var me=this.actions,fe=f(me,dt)&&!pt[dt],ge=f(me,ht)&&!pt[ht],ve=f(me,ut)&&!pt[ut];if(fe){var be=1===ue.pointers.length,ye=ue.distance<2,Se=ue.deltaTime<250;if(be&&ye&&Se)return}return ve&&ge?void 0:fe||ge&&pe&Ne||ve&&pe&Be?this.preventSrc(he):void 0}he.preventDefault()},preventSrc:function(ue){this.manager.session.prevented=!0,ue.preventDefault()}};var mt=1,ft=2,gt=4,vt=8,bt=vt,yt=16;X.prototype={defaults:{},set:function(ue){return fe(this.options,ue),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(ue){if(r(ue,"recognizeWith",this))return this;var he=this.simultaneous;return he[(ue=Q(ue,this)).id]||(he[ue.id]=ue,ue.recognizeWith(this)),this},dropRecognizeWith:function(ue){return r(ue,"dropRecognizeWith",this)||(ue=Q(ue,this),delete this.simultaneous[ue.id]),this},requireFailure:function(ue){if(r(ue,"requireFailure",this))return this;var he=this.requireFail;return-1===v(he,ue=Q(ue,this))&&(he.push(ue),ue.requireFailure(this)),this},dropRequireFailure:function(ue){if(r(ue,"dropRequireFailure",this))return this;ue=Q(ue,this);var he=v(this.requireFail,ue);return he>-1&&this.requireFail.splice(he,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(ue){return!!this.simultaneous[ue.id]},emit:function(ue){function t(pe){he.manager.emit(pe,ue)}var he=this,pe=this.state;vt>pe&&t(he.options.event+K(pe)),t(he.options.event),ue.additionalEvent&&t(ue.additionalEvent),pe>=vt&&t(he.options.event+K(pe))},tryEmit:function(ue){return this.canEmit()?this.emit(ue):void(this.state=32)},canEmit:function(){for(var ue=0;ue<this.requireFail.length;){if(!(this.requireFail[ue].state&(32|mt)))return!1;ue++}return!0},recognize:function(ue){var he=fe({},ue);return d(this.options.enable,[this,he])?(this.state&(bt|yt|32)&&(this.state=mt),this.state=this.process(he),void(this.state&(ft|gt|vt|yt)&&this.tryEmit(he))):(this.reset(),void(this.state=32))},process:function(ue){},getTouchAction:function(){},reset:function(){}},c(ee,X,{defaults:{pointers:1},attrTest:function(ue){var he=this.options.pointers;return 0===he||ue.pointers.length===he},process:function(ue){var he=this.state,pe=ue.eventType,me=he&(ft|gt),fe=this.attrTest(ue);return me&&(pe&Ve||!fe)?he|yt:me||fe?pe&Le?he|vt:he&ft?he|gt:ft:32}}),c(te,ee,{defaults:{event:"pan",threshold:10,pointers:1,direction:$e},getTouchAction:function(){var ue=this.options.direction,he=[];return ue&Ne&&he.push(ht),ue&Be&&he.push(ut),he},directionTest:function(ue){var he=this.options,pe=!0,me=ue.distance,fe=ue.direction,ge=ue.deltaX,ve=ue.deltaY;return fe&he.direction||(he.direction&Ne?(fe=0===ge?Re:0>ge?De:Oe,pe=ge!=this.pX,me=Math.abs(ue.deltaX)):(fe=0===ve?Re:0>ve?Ue:Fe,pe=ve!=this.pY,me=Math.abs(ue.deltaY))),ue.direction=fe,pe&&me>he.threshold&&fe&he.direction},attrTest:function(ue){return ee.prototype.attrTest.call(this,ue)&&(this.state&ft||!(this.state&ft)&&this.directionTest(ue))},emit:function(ue){this.pX=ue.deltaX,this.pY=ue.deltaY;var he=J(ue.direction);he&&(ue.additionalEvent=this.options.event+he),this._super.emit.call(this,ue)}}),c(ie,ee,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[dt]},attrTest:function(ue){return this._super.attrTest.call(this,ue)&&(Math.abs(ue.scale-1)>this.options.threshold||this.state&ft)},emit:function(ue){if(1!==ue.scale){var he=ue.scale<1?"in":"out";ue.additionalEvent=this.options.event+he}this._super.emit.call(this,ue)}}),c(ne,X,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ct]},process:function(ue){var he=this.options,pe=ue.pointers.length===he.pointers,me=ue.distance<he.threshold,fe=ue.deltaTime>he.time;if(this._input=ue,!me||!pe||ue.eventType&(Le|Ve)&&!fe)this.reset();else if(ue.eventType&Ee)this.reset(),this._timer=s((function(){this.state=bt,this.tryEmit()}),he.time,this);else if(ue.eventType&Le)return bt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(ue){this.state===bt&&(ue&&ue.eventType&Le?this.manager.emit(this.options.event+"up",ue):(this._input.timeStamp=xe(),this.manager.emit(this.options.event,this._input)))}}),c(se,ee,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[dt]},attrTest:function(ue){return this._super.attrTest.call(this,ue)&&(Math.abs(ue.rotation)>this.options.threshold||this.state&ft)}}),c(re,ee,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ne|Be,pointers:1},getTouchAction:function(){return te.prototype.getTouchAction.call(this)},attrTest:function(ue){var he,pe=this.options.direction;return pe&(Ne|Be)?he=ue.overallVelocity:pe&Ne?he=ue.overallVelocityX:pe&Be&&(he=ue.overallVelocityY),this._super.attrTest.call(this,ue)&&pe&ue.offsetDirection&&ue.distance>this.options.threshold&&ue.maxPointers==this.options.pointers&&Se(he)>this.options.velocity&&ue.eventType&Le},emit:function(ue){var he=J(ue.offsetDirection);he&&this.manager.emit(this.options.event+he,ue),this.manager.emit(this.options.event,ue)}}),c(oe,X,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[lt]},process:function(ue){var he=this.options,pe=ue.pointers.length===he.pointers,me=ue.distance<he.threshold,fe=ue.deltaTime<he.time;if(this.reset(),ue.eventType&Ee&&0===this.count)return this.failTimeout();if(me&&fe&&pe){if(ue.eventType!=Le)return this.failTimeout();var ge=!this.pTime||ue.timeStamp-this.pTime<he.interval,ve=!this.pCenter||L(this.pCenter,ue.center)<he.posThreshold;if(this.pTime=ue.timeStamp,this.pCenter=ue.center,ve&&ge?this.count+=1:this.count=1,this._input=ue,0===this.count%he.taps)return this.hasRequireFailures()?(this._timer=s((function(){this.state=bt,this.tryEmit()}),he.interval,this),ft):bt}return 32},failTimeout:function(){return this._timer=s((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==bt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ae.VERSION="2.0.7",ae.defaults={domEvents:!1,touchAction:at,enable:!0,inputTarget:null,inputClass:null,preset:[[se,{enable:!1}],[ie,{enable:!1},["rotate"]],[re,{direction:Ne}],[te,{direction:Ne},["swipe"]],[oe],[oe,{event:"doubletap",taps:2},["tap"]],[ne]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};ce.prototype={set:function(ue){return fe(this.options,ue),ue.touchAction&&this.touchAction.update(),ue.inputTarget&&(this.input.destroy(),this.input.target=ue.inputTarget,this.input.init()),this},stop:function(ue){this.session.stopped=ue?2:1},recognize:function(ue){var he=this.session;if(!he.stopped){this.touchAction.preventDefaults(ue);var pe,me=this.recognizers,fe=he.curRecognizer;(!fe||fe&&fe.state&bt)&&(fe=he.curRecognizer=null);for(var ge=0;ge<me.length;)pe=me[ge],2===he.stopped||fe&&pe!=fe&&!pe.canRecognizeWith(fe)?pe.reset():pe.recognize(ue),!fe&&pe.state&(ft|gt|vt)&&(fe=he.curRecognizer=pe),ge++}},get:function(ue){if(ue instanceof X)return ue;for(var he=this.recognizers,pe=0;pe<he.length;pe++)if(he[pe].options.event==ue)return he[pe];return null},add:function(ue){if(r(ue,"add",this))return this;var he=this.get(ue.options.event);return he&&this.remove(he),this.recognizers.push(ue),ue.manager=this,this.touchAction.update(),ue},remove:function(ue){if(r(ue,"remove",this))return this;if(ue=this.get(ue)){var he=this.recognizers,pe=v(he,ue);-1!==pe&&(he.splice(pe,1),this.touchAction.update())}return this},on:function(ue,he){if(ue!==me&&he!==me){var pe=this.handlers;return o(g(ue),(function(ue){pe[ue]=pe[ue]||[],pe[ue].push(he)})),this}},off:function(ue,he){if(ue!==me){var pe=this.handlers;return o(g(ue),(function(ue){he?pe[ue]&&pe[ue].splice(v(pe[ue],he),1):delete pe[ue]})),this}},emit:function(ue,he){this.options.domEvents&&de(ue,he);var pe=this.handlers[ue]&&this.handlers[ue].slice();if(pe&&pe.length){he.type=ue,he.preventDefault=function(){he.srcEvent.preventDefault()};for(var me=0;me<pe.length;)pe[me](he),me++}},destroy:function(){this.element&&le(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},fe(ae,{INPUT_START:Ee,INPUT_MOVE:Me,INPUT_END:Le,INPUT_CANCEL:Ve,STATE_POSSIBLE:mt,STATE_BEGAN:ft,STATE_CHANGED:gt,STATE_ENDED:vt,STATE_RECOGNIZED:bt,STATE_CANCELLED:yt,STATE_FAILED:32,DIRECTION_NONE:Re,DIRECTION_LEFT:De,DIRECTION_RIGHT:Oe,DIRECTION_UP:Ue,DIRECTION_DOWN:Fe,DIRECTION_HORIZONTAL:Ne,DIRECTION_VERTICAL:Be,DIRECTION_ALL:$e,Manager:ce,Input:k,TouchAction:j,TouchInput:B,MouseInput:O,PointerEventInput:U,TouchMouseInput:W,SingleTouchInput:F,Recognizer:X,AttrRecognizer:ee,Tap:oe,Pan:te,Swipe:re,Pinch:ie,Rotate:se,Press:ne,on:h,off:p,each:o,merge:ke,extend:we,assign:fe,inherit:c,bindFn:l,prefixed:S}),(void 0!==ue?ue:"undefined"!=typeof self?self:{}).Hammer=ae,"function"==typeof define&&define.amd?define("hammer",[],(function(){return ae})):"undefined"!=typeof module&&module.exports?module.exports=ae:ue.Hammer=ae}(window,document),define("spinViewer/Controller",["ko","$","utils/deviceHelper","utils/sizeHelper","utils/ImageScaler","utils/ImageZoomer","hammer"],(function(ue,he,pe,me,fe,ge,ve){"use strict";var a=function(me,fe,ge,ve,be,ye){this.assetsProvider=me,this.imageLoader=fe,this.loadedAssets=null,this.events=ye,this.containers=be,this.params={showCloseButton:!1,showHint:!1,spinSpeed:1,maxPixelRatio:1.5,hintDisplayTime:3e3,preloadingTimeout:0,handleLoadingErrors:!0,framesCachingQueueInterval:35,useInitialAnimation:!1,animationFramesCount:-1,animationIntervalStart:40,animationIntervalPeak:5},this.viewModel=ve,this.updateZoomerDummy=ue.observable(!1),this.initState=this.INIT_STATE.NotInitialized,this.frames=[[]],this.lastInitArguments=null,this.currentRowIndex=ue.observable(0),this.currentFrameIndex=ue.observable(),he.extend(!0,this.params,ge),this.params.devicePixelRatio=Math.min(pe.getDevicePixelRatio(this.containers.window),this.params.maxPixelRatio),this.isPannable=ue.computed(this.isPannable,this),this.hasError=ue.observable(!1),this.getCurrentZoomer=ue.computed(this.getCurrentZoomer,this),this.setEventListeners(),this.viewModel.isPannable(this.isPannable()),this.viewModel.isCloseButtonVisible(this.params.showCloseButton)};return a.prototype.MIN_GESTURE_RECOGNIZE_DISTANCE=10,a.prototype.INIT_STATE={NotInitialized:0,Initializing:1,Initialized:2},a.prototype.init=function(ue,he){return this.initState!==this.INIT_STATE.Initializing?(he&&he.initImage&&(he=he.initImage.image),this.lastInitArguments=arguments,this.updateSpinContainerSize(),this.targetSize=this.getContainerInitialTargetSize(),he?(this.setInitialImage(he),this.initState=this.INIT_STATE.Initialized,void this.showFrame(0,0,!0)):this.initState!==this.INIT_STATE.Initialized?(this.initState=this.INIT_STATE.Initializing,void this.preloadImages(0,0)):void this.resize(function(){this.showFrame(0,0,!0)}.bind(this))):void 0},a.prototype.isVisible=function(){return"none"!==window.getComputedStyle(this.containers.spin).display},a.prototype.setInitialImage=function(ue){var he=this.getZoomer(0,0);he.options.baseUrl=this.loadedAssets.frameUrls[0][0],he.zoomReset(null,!0),ue.className="img",he.setPlaceholderImage(ue)},a.prototype.updateSpinContainerSize=function(){this.spinContainerRect=this.containers.spin.getBoundingClientRect(),this.spinContainerSize={width:this.spinContainerRect.width,height:this.spinContainerRect.height}},a.prototype.isPannable=function(){var ue=this.getCurrentZoomer();return ue&&ue.canZoomOut()},a.prototype.close=function(){this.zoomReset(),this.events.trigger("playerExitRequested")},a.prototype.zoomIn=function(ue,he,pe){var me=this.getCurrentZoomer();return me&&(ue||me.canZoomIn())?(this.events.trigger("zoomedIn"),this.imageLoader.cancelAllLoadRequests(),me.zoomIn(ue,he,pe),void(me.canZoomIn()?this.viewModel.events.trigger("canZoomIn"):this.viewModel.events.trigger("cantZoomIn"))):void("function"==typeof pe&&pe())},a.prototype.zoomReset=function(ue){var he=this.getCurrentZoomer();return he?(this.imageLoader.cancelAllLoadRequests(),void he.zoomReset(ue)):void("function"==typeof ue&&ue())},a.prototype.zoomOut=function(ue,he){var pe=this.getCurrentZoomer();return pe&&pe.canZoomOut()?(this.imageLoader.cancelAllLoadRequests(),void pe.zoomOut(focalPointInContainer,he)):void("function"==typeof he&&he())},a.prototype.getEventPositionRelativeToTarget=function(ue,he){return{x:(ue.center?ue.center.x:ue.clientX)-he.left,y:(ue.center?ue.center.y:ue.clientY)-he.top}},a.prototype.resize=function(ue){if(this.isVisible()){var he=this.frames.length*this.frames[0].length,n=function(){--he||"function"==typeof ue&&ue()};if(this.updateSpinContainerSize(),!he)return void("function"==typeof ue&&ue());for(var pe=0;pe<this.frames.length;pe++)for(var me=0;me<this.frames[pe].length;me++){var fe=this.getOutputBaseSize();this.frames[pe][me].resize(!0,{containerSize:this.spinContainerSize,outputBaseSize:fe,imageScalersOptions:this.getImageScalersOptions(fe)},n)}}},a.prototype.animationIntervalEasing=function(ue,he){var pe=this.params.animationIntervalPeak-this.params.animationIntervalStart,me=(Math.sin(2*Math.PI*ue/he-Math.PI/2)+1)/2;return this.params.animationIntervalStart+me*pe},a.prototype.refresh=function(){this.init.apply(this,this.lastInitArguments)},a.prototype.animateSpin=function(ue,he,pe,me){var fe=ue,ge=0,ve=he>ue?he-ue:this.frames[this.currentRowIndex()].length+he-ue,be=function(){return this.showFrame(this.currentRowIndex(),fe,!0),fe===he?void("function"==typeof me&&me()):(fe++,ge++,fe>=this.frames[this.currentRowIndex()].length&&(fe=0),void setTimeout(be,pe(ge,ve)))}.bind(this);be()},a.prototype.getZoomer=function(ue,he){var pe,me=this.getOutputBaseSize(),fe=this.getImageScalersOptions(me);return this.frames[ue]=this.frames[ue]||[],(pe=this.frames[ue][he])||(pe=this.createZoomer(),this.frames[ue][he]=pe,this.updateZoomerDummy(!this.updateZoomerDummy())),pe.inputImageScaler.options.baseSize=fe.inputImageScalerOptions.baseSize,pe.inputImageScaler.options.maxSize=fe.inputImageScalerOptions.maxSize,pe.resize(!1,{containerSize:this.spinContainerSize,outputBaseSize:me,imageScalersOptions:fe}),pe},a.prototype.getImageScalersOptions=function(ue){var he={width:this.loadedAssets.maxSize.width,height:this.loadedAssets.maxSize.height};return{inputImageScalerOptions:{baseSize:{width:Math.min(this.loadedAssets.maxSize.width,this.targetSize.width*this.params.devicePixelRatio),height:Math.min(this.loadedAssets.maxSize.height,this.targetSize.height*this.params.devicePixelRatio)},maxSize:he},outputImageScalerOptions:{baseSize:ue,maxSize:{width:Math.max(ue.width,this.loadedAssets.maxSize.width/this.params.devicePixelRatio),height:Math.max(ue.height,this.loadedAssets.maxSize.height/this.params.devicePixelRatio)}}}},a.prototype.createZoomer=function(ue){var he=document.createElement("div"),pe=this.getOutputBaseSize(),me=this.getImageScalersOptions(pe),ve=new fe(me.inputImageScalerOptions),be=new fe(me.outputImageScalerOptions);return he.className="amp-frame",new ge(this.imageLoader,ve,be,{baseUrl:ue,zoomFactors:this.params.zoomFactors,container:he,containerSize:this.spinContainerSize,outputBaseSize:pe,devicePixelRatio:this.params.devicePixelRatio,baseJpgQlt:this.params.baseJpgQlt,zoomJpgQlt:this.params.zoomJpgQlt})},a.prototype.getContainerInitialTargetSize=function(){var ue=me.getProportionalSize({width:this.spinContainerSize.width,height:this.spinContainerSize.height},this.loadedAssets.maxSize);return this.params.initialSize&&(ue.width=this.params.initialSize.width,ue.height=this.loadedAssets.maxSize.height*ue.width/this.loadedAssets.maxSize.width),ue},a.prototype.getOutputBaseSize=function(){return me.getProportionalSize(this.spinContainerSize,this.loadedAssets.maxSize)},a.prototype.preloadImages=function(ue,he,pe){this.viewModel.loadingPercentage(0),this.hasError(!1);var me,fe=null,ge=!1,ve=[],be=null,l=function(){ge=!0,ye--,Se--,ye||(clearTimeout(fe),fe=null,clearInterval(be),be=null,this.hasError(!0),this.initState=this.INIT_STATE.NotInitialized)},u=function(ue,he,pe){pe.applyPosition(),ye--,me>1&&ve.push({rowIndex:ue,frameIndex:he})},h=function(ue,he,pe){pe.loadImage(this.loadedAssets.frameUrls[ue][he],pe.options.container,pe.inputImageScaler.options.baseSize,pe.options.outputBaseSize,u.bind(this,ue,he,pe),this.params.handleLoadingErrors?l.bind(this):u.bind(this,ue,he,pe),null,null,1===me,this.params.baseJpgQlt)},ye=me=this.loadedAssets.frameUrls.length*this.loadedAssets.frameUrls[0].length,Se=me;me>1&&this.viewModel.isLoadingPageVisible(!0),be=setInterval(function(ue){var he=ve.pop();return he?(this.showFrame(he.rowIndex,he.frameIndex,!0),Se--,void this.viewModel.loadingPercentage(Math.floor(100*(me-Se)/me))):void(ye||(clearInterval(be),be=null,"function"==typeof ue&&ue()))}.bind(this,function(){if(clearTimeout(fe),fe=null,this.hasError(ge),ge)return this.events.trigger("allImagesLoaded",!1),void(this.initState=this.INIT_STATE.NotInitialized);this.events.trigger("allImagesLoaded",!0);var pe=this.frames[ue].length,me=he,ve=(pe+he-1)%pe;return!this.params.showHint||window.sessionStorage&&window.sessionStorage.getItem("spinViewerHintDisplayed")||(this.viewModel.isHintVisible(!0),setTimeout(function(){this.viewModel.isHintVisible(!1),window.sessionStorage&&window.sessionStorage.setItem("spinViewerHintDisplayed",!0)}.bind(this),this.params.hintDisplayTime)),this.params.useInitialAnimation?(me=(pe+he-this.params.animationFramesCount)%pe,ve=he,this.showFrame(ue,me,!0),this.viewModel.isLoadingPageVisible(!1),void this.animateSpin(me,ve,this.animationIntervalEasing.bind(this),function(){this.initState=this.INIT_STATE.Initialized,this.showFrame(ue,he,!0)}.bind(this))):(this.viewModel.isLoadingPageVisible(!1),this.initState=this.INIT_STATE.Initialized,void this.showFrame(ue,he,!0))}.bind(this)),this.params.framesCachingQueueInterval),this.imageLoader.cancelAllLoadRequests(),this.params.handleLoadingErrors&&this.params.preloadingTimeout&&(fe=setTimeout(function(){clearInterval(be),be=null,this.imageLoader.cancelAllLoadRequests(),this.hasError(!0),this.initState=this.INIT_STATE.NotInitialized}.bind(this),this.params.preloadingTimeout));for(var xe=0;xe<this.loadedAssets.frameUrls.length;xe++)for(var we=0;we<this.loadedAssets.frameUrls[xe].length;we++){var ke=this.getZoomer(xe,we);ke.options.baseUrl=this.loadedAssets.frameUrls[xe][we],h.call(this,xe,we,ke)}},a.prototype.getCurrentZoomer=function(){return this.updateZoomerDummy(),this.currentRowIndex()<this.frames.length&&this.frames[this.currentRowIndex()]&&this.currentFrameIndex()<this.frames[this.currentRowIndex()].length?this.frames[this.currentRowIndex()][this.currentFrameIndex()]:null},a.prototype.getCurrentFrame=function(){return{rowIndex:this.currentRowIndex(),frameIndex:this.currentFrameIndex(),zoomer:this.getCurrentZoomer()}},a.prototype.showFrame=function(ue,he,pe){if((pe||this.initState===this.INIT_STATE.Initialized)&&(ue!=this.currentRowIndex()||he!=this.currentFrameIndex())){this.currentRowIndex(ue),this.currentFrameIndex(he);for(var me=this.getCurrentFrame();this.containers.images.lastChild;)this.containers.images.removeChild(this.containers.images.lastChild);this.containers.images.appendChild(me.zoomer.options.container),this.events.trigger("frameShown",me)}},a.prototype.loadFullImage=function(ue,he){ue.fullImageStatus=ue.FULL_IMAGE_STATUS.Loading;var pe=(ue.getCurrentImageDisplaySize(),ue.getOutputImageSize(ue.options.zoomFactors.length-1)),me=ue.getZoomedImageBox(ue.currentSize,ue.currentPosition,pe,he);ue.loadImage(this.loadedAssets.frameUrls[this.currentRowIndex()][this.currentFrameIndex()],ue.options.container,ue.getInputImageSize(ue.options.zoomFactors.length-1),pe,(function(){ue.applyPosition(),ue.fullImageStatus=ue.FULL_IMAGE_STATUS.Loaded}),(function(){ue.fullImageStatus!==ue.FULL_IMAGE_STATUS.Loaded&&(ue.fullImageStatus=ue.FULL_IMAGE_STATUS.NotLoaded)}),me.focalPointOnSourceImage,null,!0,this.params.zoomJpgQlt)},a.prototype.zoomCenter=function(){this.zoomIn(!0)},a.prototype.setEventListeners=function(){this.viewModel.events.on("closeButtonClicked",this.close.bind(this)),this.viewModel.events.on("refreshButtonClicked",function(){this.refresh(),this.events.trigger("refreshButtonClicked")}.bind(this)),this.viewModel.events.on("zoomCenter",this.zoomCenter.bind(this)),he(window).resize(function(){if(this.initState===this.INIT_STATE.Initialized){var ue=this.containers.spin.getBoundingClientRect();ue.width===this.spinContainerRect.width&&ue.height===this.spinContainerRect.height||this.resize()}}.bind(this));var ue,pe,me,fe,ge=new ve(this.containers.root),be=ge.get("pinch"),ye=ge.get("pan"),Se=ge.get("doubletap"),xe=null,we=function(ue,he){var fe=this.getCurrentZoomer();if(fe.canZoomOut())fe.moveBy(he);else if(this.frames.length>1||this.frames[this.currentRowIndex()].length>1){var ge=this.getRemoteRowIndex(pe,this.getMatrixShift(this.params.reverseVerticalDirection,ue.y,this.frames.length,this.spinContainerSize.height)),ve=this.getRemoteFrameIndex(me,this.getMatrixShift(this.params.reverseHorizontalDirection,ue.x,this.frames[0].length,this.spinContainerSize.width));ge===this.currentRowIndex()&&ve===this.currentFrameIndex()||(this.events.trigger("spun"),this.showFrame(ge,ve))}}.bind(this),ke=function(){ye.set({threshold:this.MIN_GESTURE_RECOGNIZE_DISTANCE}),ye.set({direction:this.isPannable()?ve.DIRECTION_ALL:ve.DIRECTION_HORIZONTAL}),ye.set({enable:this.isPannable()||this.frames[this.currentRowIndex()].length>1})}.bind(this),_e=function(he){if(this.initState===this.INIT_STATE.Initialized){he.preventDefault(),he.stopPropagation();var pe=this.getCurrentZoomer(),me=1+.1*(he.detail<0||he.wheelDelta>0?1:-1);this.spinContainerRect=this.containers.spin.getBoundingClientRect(),pe.fullImageStatus===pe.FULL_IMAGE_STATUS.NotLoaded&&this.loadFullImage.call(this,pe,this.getEventPositionRelativeToTarget(he,this.spinContainerRect)),ue=pe.getCurrentImageDisplaySize(),pe.scale(ue,me,this.getEventPositionRelativeToTarget(he,this.spinContainerRect),!1)}}.bind(this);ke(),Se.set({interval:500,time:500,threshold:this.MIN_GESTURE_RECOGNIZE_DISTANCE,posThreshold:100});this.viewModel.events.on("panImage",(function(ue,he){var pe={x:0,y:0},me=he.split(",");-1===me.indexOf("arrowup")&&-1===me.indexOf("w")||(pe.y=30),-1===me.indexOf("arrowdown")&&-1===me.indexOf("s")||(pe.y=-30),-1===me.indexOf("arrowleft")&&-1===me.indexOf("a")||(pe.x=30),-1===me.indexOf("arrowright")&&-1===me.indexOf("d")||(pe.x=-30),we(pe,pe)})),this.isPannable.subscribe(function(ue){this.viewModel.isPannable(ue),ke()}.bind(this)),ge.on("hammer.input",function(ue){return ue.distance<this.MIN_GESTURE_RECOGNIZE_DISTANCE&&(xe=null),null===xe&&ue.distance>=this.MIN_GESTURE_RECOGNIZE_DISTANCE&&(xe=!this.isPannable()&&1===ue.pointers.length&&(ue.direction&ve.DIRECTION_VERTICAL)>0),xe?void ge.stop():void be.set({enable:ue.pointers.length>1})}.bind(this)),ge.on("tap",function(ue){this.initState===this.INIT_STATE.Initialized&&"mouse"===ue.pointerType&&(ue.target&&-1===ue.target.className.indexOf("amp-overlay")||(this.spinContainerRect=this.containers.spin.getBoundingClientRect(),this.zoomIn(!0,this.getEventPositionRelativeToTarget(ue,this.spinContainerRect))))}.bind(this)),ge.on("doubletap",function(ue){ue.preventDefault(),ue.srcEvent.stopPropagation(),this.initState===this.INIT_STATE.Initialized&&"mouse"!==ue.pointerType&&(this.spinContainerRect=this.containers.spin.getBoundingClientRect(),this.zoomIn(!0,this.getEventPositionRelativeToTarget(ue,this.spinContainerRect)))}.bind(this)),ge.on("panstart",function(ue){fe=ue,me=this.currentFrameIndex(),pe=this.currentRowIndex()}.bind(this)),ge.on("pan",function(ue){if(this.initState===this.INIT_STATE.Initialized){ue.preventDefault(),ue.srcEvent.stopPropagation(),me=me||this.currentFrameIndex(),pe=pe||this.currentRowIndex(),fe=fe||ue;var he={x:ue.deltaX-fe.deltaX,y:ue.deltaY-fe.deltaY},ge={x:ue.deltaX,y:ue.deltaY};fe=ue,we(ge,he)}}.bind(this)),ge.on("panend",function(ue){fe=ue,me=this.currentFrameIndex(),pe=this.currentRowIndex()}.bind(this)),ge.on("pinchstart",function(he){if(this.initState===this.INIT_STATE.Initialized){var pe=this.getCurrentZoomer();pe.fullImageStatus===pe.FULL_IMAGE_STATUS.NotLoaded&&(this.spinContainerRect=this.containers.spin.getBoundingClientRect(),this.loadFullImage.call(this,pe,this.getEventPositionRelativeToTarget(he,this.spinContainerRect))),ue=pe.getCurrentImageDisplaySize(),ye.set({enable:!1})}}.bind(this)),ge.on("pinch",function(he){he.preventDefault(),he.srcEvent.stopPropagation(),this.initState===this.INIT_STATE.Initialized&&this.getCurrentZoomer().scale(ue,he.scale,this.getEventPositionRelativeToTarget(he,this.spinContainerRect),!1)}.bind(this)),ge.on("pinchend",function(){this.initState===this.INIT_STATE.Initialized&&ke()}.bind(this)),this.containers.spin.addEventListener("mousewheel",_e),this.containers.spin.addEventListener("DOMMouseScroll",_e),this.hasError.subscribe(function(ue){this.viewModel.isErrorPageVisible(ue)}.bind(this))},a.prototype.getMatrixShift=function(ue,he,pe,me){var fe=(ue?-1:1)*this.params.spinSpeed*he*pe/me;return fe>0?Math.floor(fe):Math.ceil(fe)},a.prototype.getRemoteFrameIndex=function(ue,he){var pe=(ue+he)%this.frames[0].length;return 0>pe&&(pe=this.frames[0].length+pe),pe},a.prototype.getRemoteRowIndex=function(ue,he){var pe=(ue+he)%this.frames.length;return 0>pe&&(pe=this.frames.length+pe),pe},a.prototype.loadAssets=function(ue,he,pe){this.initState=this.INIT_STATE.NotInitialized,this.loadedAssets=null,this.assetsProvider.getAssets(ue,function(ue){return ue.maxSize.width&&ue.maxSize.height?(this.loadedAssets=ue,void("function"==typeof he&&he(ue))):void("function"==typeof pe&&pe())}.bind(this),pe)},a.prototype.setAssets=function(ue){this.initState=this.INIT_STATE.NotInitialized,this.loadedAssets=ue},a})),define("bindings/fadeVisible",["ko","$"],(function(ue,he){"use strict";function i(){}return i.prototype.init=function(pe,me){var fe=me();he(pe).toggle(ue.unwrap(fe))},i.prototype.update=function(pe,me){var fe=me();ue.unwrap(fe)?he(pe).fadeIn():he(pe).fadeOut()},ue.bindingHandlers.fadeVisible=new i,ue.bindingHandlers.fadeVisible})),define("spinViewer/component",["$","spinViewerView","utils/scene7.config","utils/scene7.ImageLoader","utils/scene7.DataProvider","spinViewer/DataProvider","spinViewer/AssetsProvider","spinViewer/ViewModel","spinViewer/Controller","bindings/fadeVisible"],(function(ue,he,pe,me,fe,ge,ve,be,ye){"use strict";return{viewModel:{createViewModel:function(he,Se){var xe=ue({}),we=ue({}),ke={window:window,root:Se.element,spin:Se.element.querySelector(".amp-spin"),images:Se.element.querySelector(".amp-spin .amp-images")},_e=new pe(he.scene7.imageServer,he.scene7.videoServer),Ie=new fe(_e),Ce=new ge(_e,Ie),Pe=new ve(Ce),Te=new me(_e,he.viewer.useCors),ze=new be(xe,he.messages);he.viewer.zoomFactors.container&&(he.viewer.zoomFactors=he.viewer.zoomFactors.container);var Ae=new ye(Pe,Te,he.viewer,ze,ke,we),Ee={setAssets:Ae.setAssets.bind(Ae),loadAssets:Ae.loadAssets.bind(Ae),init:Ae.init.bind(Ae),zoomIn:Ae.zoomIn.bind(Ae),zoomOut:Ae.zoomOut.bind(Ae),zoomReset:Ae.zoomReset.bind(Ae),events:Ae.events};return he.api(Ee),ze}},template:he,synchronous:!0}})),define("Asos.Utils.MediaPlayers",["videoPlayer/component","videoPlayer/DataMapper","videoPlayer/AssetsProvider","spinViewer/component","utils/scene7.config","utils/scene7.DataProvider","spinViewer/DataProvider","spinViewer/AssetsProvider"],(function(ue,he,pe,me,fe,ge,ve,be){"use strict";function c(){this.videoPlayer=ue,this.spinViewer=me}return c.prototype.getSpinViewerAssetsProvider=function(ue){var he=new fe(ue),pe=new ge(he),me=new ve(he,pe);return new be(me)},c.prototype.getVideoPlayerAssetsProvider=function(ue){var me=new fe(null,ue),ve=new ge(me),be=new he(me);return new pe(me,ve,be)},new c})),define("ProductUtils/Window",[],(function(){return window})),define("ProductUtils/MergeJson",[],(function(){return function(ue,he){var pe=JSON.parse(JSON.stringify(ue)),me=JSON.parse(JSON.stringify(he));for(var fe in me)try{pe[fe]=me[fe]}catch(ue){console.warn("couldn't merge JSONS: "+ue)}return pe}})),define("ProductUtils/StockPrice",["ProductUtils/Window","ProductUtils/MergeJson"],(function(ue,he){return function(){this.getStockPrice=function(he,pe,me,fe){null!=he&&ue.asos.pdp.getStockPrice(fe).then(function(ue){this.successRequest.call(this,ue,{callback:pe,products:he})}.bind(this)).catch(me)},this.successRequest=function(ue,he){var pe=this.combineData(he.products,ue);he.callback(pe)},this.combineData=function(ue,he){var pe,me=void 0!==ue.products,fe=this.createVariantMap(ue,me);if(me){for(var ge={},ve=0;ve<ue.products.length;ve++)ge[ue.products[ve].id]=ve;var be=[];be.length=he.length;for(var ye=0;ye<he.length;ye++){be[ge[he[ye].productId]]=he[ye]}for(var Se=0;Se<ue.products.length;Se++)ue.products[Se]=this.mergeJsons(ue.products[Se],be[Se]);pe=ue;for(var xe=[],we=0;we<ue.products.length;we++)xe.push(this.mapVariantData(ue.products[we],pe.products[we],fe[ue.products[we].productId]));return pe.products=xe,pe}return fe=fe[ue.id],pe=this.mergeJsons(ue,he[0]),this.mapVariantData(ue,pe,fe)},this.mapVariantData=function(ue,he,pe){for(var me=!1,fe=0;fe<ue.variants.length;fe++)me||(me=he.variants[fe].isInStock),he.variants[fe].size=pe[he.variants[fe].id].size,he.variants[fe].sizeOrder=pe[he.variants[fe].id].sizeOrder,he.variants[fe].colour=pe[he.variants[fe].id].colour,he.variants[fe].colourWayId=pe[he.variants[fe].id].colourWayId,he.variants[fe].isPrimary=pe[he.variants[fe].id].isPrimary,he.variants[fe].sizeId=pe[he.variants[fe].id].sizeId,he.variants[fe].productImage=void 0!==ue.productImage?ue.productImage.url:"";return he.isInStock=me,he},this.createVariantMap=function(ue,he){var pe=[];if(he)for(var me=0;me<ue.products.length;me++)pe[ue.products[me].id]=[],pe=this.loopVariants(ue.products[me],pe);else pe[ue.id]=[],pe=this.loopVariants(ue,pe);return pe},this.loopVariants=function(ue,he){for(var pe=0;pe<ue.variants.length;pe++){var me=ue.variants[pe].variantId;he[ue.id][me]=ue.variants[pe]}return he},this.mergeJsons=he}})),define("Models/VariantDecorator",[],(function(){function e(ue,he){for(var pe=0;pe<ue.length;pe++)if(he(ue[pe]))return pe}return function(){this.getData=function(ue,he){he=void 0!==he&&he;var pe=void 0!==ue.productImage?[ue.productImage]:ue.images,me={};if(pe)for(var fe=0;fe<pe.length;fe++){var ge=pe[fe];if(ge.colourWayId)void 0===me[ge.colourWayId]&&(me[ge.colourWayId]=ge.colour)}var ve=ue.variants;ve.sort((function(ue,he){var pe=he.colour.localeCompare(ue.colour);return 0===pe?he.sizeOrder-ue.sizeOrder:pe}));var be,ye=ue.productId?ue.productId:ue.id,Se=ve.length,xe={},we={productId:ye,colours:[],rrpPrice:void 0,maxPrevPrice:void 0,minPrice:void 0,isInStock:!1},ke=0;for(ve.length>0&&ve[0].price.isOutletPrice&&(we.rrpPrice=ve[0].price.rrp);Se--;){var _e=ve[Se];_e.productId=ye,void 0===we.hasDifferentPrices&&_e.isInStock&&(void 0===be?be=_e.price.current:_e.price.current.value!==be.value&&(we.hasDifferentPrices=!0)),(he||_e.isInStock)&&(void 0===we.minPrice||we.minPrice.value>_e.price.current.value)&&(we.minPrice=_e.price.current);var Ie=_e.isInStock;_e.colourName=me[_e.colourWayId];var Ce=xe[_e.colour];void 0===Ce&&(we.colours.push({colour:_e.colour,colourName:_e.colourName,variants:[],colourWayId:_e.colourWayId}),Ce=xe[_e.colour]={index:ke,variantsInStock:0},ke++),Ie&&(Ce.variantsInStock++,we.isInStock||(we.isInStock=!0)),we.colours[Ce.index].variants.push(_e),(void 0===Ce.lowestPrice||Ce.lowestPrice.value>_e.price.current.value)&&(Ce.lowestPrice=_e.price.current),void 0===we.rrpPrice&&_e.price.isMarkedDown&&(void 0===Ce.maxPreviousPrice||Ce.maxPreviousPrice.value<_e.price.previous.value)&&(Ce.maxPreviousPrice=_e.price.previous)}for(var Pe=Object.keys(xe),Te=Pe.length-1;Te>=0;Te--){var ze=Pe[Te],Ae=xe[ze],Ee=e(we.colours,(function(ue){return ue.colour===ze}));he||0!==Ae.variantsInStock?(void 0!==Ae.maxPreviousPrice&&(void 0===we.maxPrevPrice||we.maxPrevPrice.value<Ae.maxPreviousPrice.value)&&(we.maxPrevPrice=Ae.maxPreviousPrice),we.colours[Ee].price=Ae.lowestPrice,we.colours[Ee].prevPrice=Ae.maxPreviousPrice):we.colours.splice(Ee,1)}return we}}})),define("text",{load:function(ue){throw new Error("Dynamic load not allowed: "+ue)}}),define("text!Components/product-image/product-image.html",[],(function(){return'<div class="grid-row">\n    <img data-bind="attr: { src: imgUrl }"/>\n    \x3c!-- ko if: !hideSaveButton --\x3e\n        <div data-bind=\'component:{\n            name: "save-button",\n            params:{\n                productId: productId,\n                state: state,\n                productImage: imgUrl,\n                context: context,\n                productData: productData\n            }\n        }\'></div>\n    \x3c!-- /ko --\x3e\n</div>\n'})),define("ProductUtils/NewRelicLogger",["PageConfig"],(function(ue){var t=function(){var he;this.init=function(ue){he=ue},this.logError=function(pe,me){window.newrelic&&(me.pageVersion=ue.version,me.pageUrl=window.location.href,me.pageType=he,me.codebase="Knockout",window.newrelic.addPageAction(pe.message,me))}};return t.prototype.PAGE_TYPE={PRD:"ProductPage.SingleProduct",GRP:"ProductPage.MixAndMatch"},t.prototype.ERROR_TYPE={AjaxError:"Ajax Error",ParseError:"Parse Error",UserActionFailed:"User Action Failed",FitAssistantError:"Fit Assistant Error"},new t})),define("asos-web-seo-path",[],(function(){"use strict";function e(he){return Object.values(he).map((function(he){var pe=ue.find((function(ue){return ue[0]===he}));return pe?pe[1]:he})).join("")}function i(ue){return function t(ue){return Object.values(ue.normalize("NFD")).map((function(ue){return ue.match(/[0-9A-Za-z \-/.]/g)?ue:void 0})).join("").normalize("NFC")}(ue.trim()).replace(/\//g,"-").replace(/\s/g,"-").replace(/-+/g,"-").replace(/\./g,"").replace(/^-/,"").replace(/-$/,"").toLowerCase()}function n(ue,he,pe){var me=ue,fe=he;return pe&&"ru-ru"===pe.toLowerCase()&&(me=e(ue),fe=e(he)),{romanProductName:me,romanBrandName:fe}}var ue=[["","A"],["","a"],["","B"],["","b"],["","V"],["","v"],["","G"],["","g"],["","D"],["","d"],["","E"],["","e"],["","Yo"],["","yo"],["","Zh"],["","zh"],["","Z"],["","z"],["","I"],["","i"],["","J"],["","j"],["","K"],["","k"],["","L"],["","l"],["","M"],["","m"],["","N"],["","n"],["","O"],["","o"],["","P"],["","p"],["","R"],["","r"],["","S"],["","s"],["","T"],["","t"],["","U"],["","u"],["","F"],["","f"],["","H"],["","h"],["","Ts"],["","ts"],["","Ch"],["","ch"],["","Sh"],["","sh"],["","Sch"],["","sch"],["",""],["",""],["","Y"],["","y"],["",""],["",""],["","E"],["","e"],["","Yu"],["","yu"],["","Ya"],["","ya"]];return function s(ue){return function(he,pe,me){if("function"!=typeof"".normalize)return"";if(!he)return ue&&ue.error("createSeoPath - productName was not passed in"),"";var fe=n(he,pe,me),ge=fe.romanProductName,ve=fe.romanBrandName,be=i(ge),ye=i(ve);return"".concat(ye,"/").concat(be)}}})),define("ProductUtils/UrlUtils",["PageConfig","ProductUtils/NewRelicLogger","asos-web-seo-path","ProductUtils/Window"],(function(ue,he,pe,me){return function(){var fe=pe();this.formatUrl=function(ue){return ue?"http"===ue.substring(0,4)?ue.replace("http:","https:"):"/"===ue.substring(0,1)?ue:"//"+ue:ue},this.getUrlParam=function(ue,he){he||(he=me.location.href),ue=ue.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var pe=new RegExp("[\\?&]"+ue+"=([^&#]*)","i").exec(he);return null===pe?null:decodeURIComponent(pe[1].replace(/\+/g," "))},this.getVariantFromUrl=function(ue,he){var pe=ue.split("?")[0];if((pe=null!=pe?pe.split("/prd/"):null).length>0&&(pe=parseInt(pe[1])),pe||(pe=parseInt(this.getUrlParam("iid",ue))),!pe)return null;for(var me=0;me<he.length;me++)if(he[me].variantId===pe)return he[me];return null},this.getProductUrl=function(pe,me,ge){if(!ge)return he.logError(new TypeError("ProductId was not provided")),ue.siteDomain;var ve="";return pe&&me?ve="/"+fe(pe,me,ue.language):he.logError(new TypeError("missing brand name or product name, returning generic link"),{productId:ge}),ue.siteDomain+ve+"/prd/"+ge}}})),define("ProductUtils/Analytics/Utils/Common",["ProductUtils/UrlUtils"],(function(ue){var he=new ue;return{getChannel:function t(){var ue=he.getUrlParam("SearchQuery"),pe=he.getUrlParam("cid");if(pe)return pe;if(null!==ue)return"search";var me=he.getUrlParam("ctaref");if(me){if(/bag/i.test(me))return"basket page";if(/saved items/i.test(me))return"saved items";if(/wishlists/i.test(me))return"wishlists"}return"product page"},getLinkTrackEvents:function i(ue){return ue.map((function(ue){return ue.split("=")[0]}))},getGlobalEvars:function n(){return["eVar1","eVar6","eVar10","eVar15","eVar17","eVar18","eVar19","eVar20","eVar29","eVar30","eVar45","eVar47","eVar60","eVar61","eVar69","eVar112","eVar113"]},addMerchEVarToProducts:function s(ue,he){return ue.split(",;").map((function(ue){return/.*;;;;evar/i.test(ue)?Array.isArray(he)?he.forEach((function(he){ue=ue+"|"+he})):ue=ue+"|"+he:Array.isArray(he)?he.forEach((function(he){ue=ue+"|"+he})):ue=ue+";;;;"+he,ue})).join(",;")},getProductAreaAttribute:function r(ue){return{buythelook:"buy the look",youmightlike:"you might also like",oosproduct:"oos product page",main:"product page"}[ue.toLowerCase()]}}})),define("ProductUtils/calculateDiscount",[],(function(){return function(ue,he){return Math.floor((1e3*he-1e3*ue)/(10*he)).toString()}})),define("ProductUtils/Analytics/PageLoad",["PageConfig","ProductUtils/UrlUtils","ProductUtils/Analytics/Utils/Common","ProductUtils/calculateDiscount"],(function(ue,he,pe,me){return function(fe){var ge=window.s,ve=new he,be=ue.storeCode.toLowerCase(),ye=[],Se=fe.commons,xe=ue.countryCode.toLowerCase(),we=ue.currency.toLowerCase();if(ge.pageName=ue.platform+" "+be+"|"+fe.pageType+"|"+ue.pageTitle,ge.channel=pe.getChannel(),ge.server=ue.platform+" "+be,ge.campaign=ge.getCampaignID(),ge.products=";"+fe.productId,ge.eVar1=ge.getVisitNum(),ge.eVar17=ge.getNewRepeat(365),ge.eVar19=function a(){var ue=window.innerHeight||"",he=window.innerWidth||"";return"number"==typeof he&&"number"==typeof ue?he+":"+ue:""}(),ve.getUrlParam("SearchQuery")&&(ge.eVar25=ve.getUrlParam("SearchQuery")),"performance"in window){var ke=window.performance.timing;ge.eVar29=ke.responseStart-ke.navigationStart,ge.eVar30=ke.domContentLoadedEventEnd-ke.navigationStart,ye.push("event128="+ge.eVar30)}else window.performance={now:function(){return 0}};if(ge.eVar45=ue.version,ge.eVar70=ge.getBagItems(),ge.eVar112=xe,ge.eVar113=we,ge.prop5=ge.getCustomTimeDate(),ve.getUrlParam("CTAref")&&(ge.prop6=ve.getUrlParam("CTAref").toLowerCase()),ge.prop8="product page",ge.prop10=ge.getPreviousValue(ge.pageName,"gpv_p10","").toLowerCase(),ge.prop11=encodeURI(window.location.href.replace(/%20/gi,"+")),"product"===fe.pageType){var _e=function o(ue){var he=[];if(!ue)return"";for(var pe=0;pe<ue.length;pe++){var me=ue[pe];he.push("variantstockstatus:"+me.variantId+"_"+(me.isInStock?"1":"0"))}return he.join(",")}(fe.product.variants),Ie=fe.product.variants.length,Ce=function r(ue){return ue.filter((function(ue){return!0===ue.isInStock})).length}(fe.product.variants),Pe=0===Ie?"0":(Ce/Ie*100).toFixed(2)+"%|",Te=void 0!==fe.product.productPrice?fe.product.productPrice:fe.product.price;if(ge.eVar26=function s(ue){return ue.reduce((function(ue,he){return ue[he.size]||ue.push(he.size),ue}),[]).length}(fe.product.variants),ge.eVar31=ge.eVar36=Ie+"|"+Ce+"|"+Pe+"null|null|null|null|null|null",fe.product.sellingFast&&(ge.eVar152="selling fast"),fe.product.shippingRestrictions&&fe.product.shippingRestrictions.shippingRestrictionsVisible&&ye.push("event217"),fe.zeekitEnabled&&ye.push("event243"),fe.product.media&&fe.product.media.catwalkUrl.length&&ye.push("event245"),Te.rrp.value?ge.eVar161=me(Te.current.value,Te.rrp.value):ge.eVar161=me(Te.current.value,Te.previous.value),fe.isInStock?(Ie===Ce?ye.push("event43"):ye.push("event44"),Object.keys(fe.ratings).length&&(ge.eVar185=(fe.ratings.averageOverallRating/5).toFixed(2),ye.push("event257="+ge.eVar185),ge.eVar186=String(fe.ratings.totalReviewCount),ye.push("event258="+ge.eVar186),ye.push("event275"),fe.ratings.mostRecent&&(ge.eVar201=(fe.ratings.mostRecent.rating/5).toFixed(2),ye.push("event274="+ge.eVar201)))):ye.push("event45"),ge.list1=_e,fe.product.hasPaymentPromotionAvailable){var ze=Object.keys(fe.product.paymentPromotions).filter((function(ue){return Te.current.value>=fe.product.paymentPromotions[ue][xe][we].minimumTransactionAmount&&Te.current.value<=fe.product.paymentPromotions[ue][xe][we].maximumTransactionAmount}));ze&&(ge.prop66=ze.join(","))}}else{ge.eVar181="mix & match",ye.push("event15");var Ae="";for(var Ee in fe.mixAndMatch.productIds)Ae+=";"+fe.mixAndMatch.productIds[Ee]+",";Ae=Ae.slice(0,-1),ge.products=Ae,fe.isInStock?ye.push("event43"):ye.push("event45")}ye.push("prodView"),ye.push("event1"),ye.push("event35"),ge.events=ye.join(","),Se.setLinkTrackVars(["products"],"eVar185","eVar186","eVar201"),ge.linkTrackEvents=pe.getLinkTrackEvents(ye).join(","),ge.setContentHierarchy("product page",ue.breadcrumb),ge.t()}})),define("Providers/localFeaturesManifest",[],(function(){return{features:{"pdp-fit-assistant-logging":{probability:0}},mvt:{"emf-163-web-ratings-reviews-pdp-value-test":{}}}})),define("Providers/testFeaturesManifest",[],(function(){return{features:{},mvt:{}}})),define("Providers/SdkProvider",["Promise","PageConfig","Providers/localFeaturesManifest","Providers/testFeaturesManifest"],(function(ue,he,pe,me){function s(he){return function(){return new ue((function(ue){var i=function(){ue(window.asos.sdk[he])};window.asos.sdk&&window.asos.sdk[he]?i():window.asos.eventBus.once(he+"-sdk-ready",(function(){i()}))}))}}return{getSavedItems:s("savedItems"),getBag:s("bag"),getIdentity:s("identity"),getFeatures:function r(){var fe=new ue((function(ue){s("features")().then((function(fe){he.useTestFeaturesManifest?fe.addManifest(me,{}):fe.addManifest(pe,{}),ue(fe)}))}));return function(){return fe}}()}})),define("ProductUtils/Analytics/Utils/FitAnalytics",["Providers/SdkProvider","PageConfig"],(function(ue,he){function i(ue){switch(ue){case 1:return"first time interaction";case 2:return"partial recommendation";case 3:return"full recommendation";case 4:return"recommendation not in stock"}}function n(){return ue.getIdentity()}function s(ue){return ue.customer.profile()}var pe="signed in",me="not signed in",fe="no state set",ge="previous purchase data",ve="no previous purchase data",be="no body category set",ye="no recommended size set";return{getFitAnalyticsState:function o(ue){return n().then(s).then(function r(ue){return function(he){return(he.isRecognised||he.isAuthenticated?pe:me)+"-"+(i(ue.recommendationType)?i(ue.recommendationType):fe)+"-"+(ue.hasPreviousPurchaseData?ge:ve)+"-"+(ue.bodyCategory?ue.bodyCategory.toLowerCase():be)}}(ue))},getFitAnalyticsSize:function a(ue){var pe=ue.recommendedSize?ue.recommendedSize.toLowerCase():ye;return he.storeCode.toLowerCase()+"|"+pe},states:{SIGNED_IN:pe,SIGNED_OUT:me,NO_RECOMMENDATION_STATE:fe,PREVIOUS_PURCHASES:ge,NO_PREVIOUS_PURCHASES:ve,NO_BODY_CATEGORY:be,NO_RECOMMENDED_SIZE:ye,NO_VIEWED_SCREENS:"no viewed screens set"}}})),define("ProductUtils/Analytics/Utils/Performance",[],(function(){var ue=["pdp:start","pdp:hero_image_displayed","pdp:title_displayed","pdp:stock_api_returned","pdp:price_displayed","pdp:size_selector_interactive","pdp:add_to_bag_interactive","pdp:save_for_later_interactive"],he=[{eVar:"eVar163",event:"event233"},{eVar:"eVar164",event:"event234"},{eVar:"eVar165",event:"event235"},{eVar:"eVar166",event:"event236"},{eVar:"eVar167",event:"event237"},{eVar:"eVar168",event:"event238"},{eVar:"eVar169",event:"event239"},{eVar:"eVar170",event:"event240"}];return{performanceMetricsToGather:ue,getPerformanceMetricsValues:function e(){return window.performance.getEntriesByType?window.performance.getEntriesByType("measure").filter((function(he){return ue.indexOf(he.name)>-1})).map((function(ue,pe){var me=he[pe];return{eVar:me.eVar,event:me.event,duration:Math.floor(ue.duration)}})):[]}}})),define("ProductUtils/Analytics/FitAnalytics",["ProductUtils/Analytics/Utils/FitAnalytics","ProductUtils/Analytics/Utils/Common","ProductUtils/Analytics/Utils/Performance"],(function(ue,he,pe){function n(ue,he){if(ue&&he){for(var pe=ue+"_"+he,ge=0;ge<fe.length;ge++)if(pe.match(fe[ge]))return;var ve=me[pe];return ve||ue+":"+he}}function s(ue){var he=[];if(ue.widgetScreenEvents)for(var pe=0;pe<ue.widgetScreenEvents.length;pe++){var me=ue.widgetScreenEvents[pe],fe=n(me.event,me.value);fe&&he.push(fe)}return he.join(",")}var me={entryScreen_landed:1,entryScreen_submit:2,entryScreen_tooltip:3,immediateRecommendation_upper:11,immediateRecommendation_lower:12,immediateRecommendation_shoes:13,bcScreen_landed:14,bcScreen_skip:15,bcScreen_submit:16,lbwBcScreen_landed:17,lbwBcScreen_skip:18,lbwBcScreen_submit:19,managePurchasesScreen_landed:20,managePurchasesScreen_submit:21,managePurchasesScreen_skip:22,lbwRiseScreen_landed:23,lbwRiseScreen_submit:24,lbwSizeSelectScreen_landed:25,lbwSizeSelectScreen_submit:26,lbwCategoryScreen_landed:27,lbwCategoryScreen_submit:28,lbwCategoryScreen_skip:29,shapeSelectScreen_1_landed:30,shapeSelectScreen_1_skip:31,shapeSelectScreen_1_submit:32,shapeSelectScreen_1_tooltip:33,shapeSelectScreen_2_landed:34,shapeSelectScreen_2_skip:35,shapeSelectScreen_2_submit:36,shapeSelectScreen_2_tooltip:37,ageScreen_landed:38,ageScreen_skip:39,ageScreen_submit:40,braScreen_landed:41,braScreen_skip:42,braScreen_submit:43,resultsScreen_initial_landed:44,resultsScreen_final_landed:45,sizeRecommendation_returning_lower_results_sp:46,sizeRecommendation_returning_upper_results_sp:47,sizeRecommendation_upper_results_sp:48,sizeRecommendation_lower_results_sp:49,sizeRecommendation_out_of_scale:50,close_lower_results_sp:51,close_upper_results_sp:52,close_brand_compare:53,close_upper_form:54,close_lower_form:55,close_upper_out_of_scale:56,outOfScaleScreen_landed:57,loadingScreen_open:58,loadingScreen_close:59,loadingScreen_timeout:60,entryScreen_close:61,outOfScaleScreen_back:62,outOfScaleScreen_close:63,brandCompareScreen_landed:64,brandCompareScreen_back:65,brandCompareScreen_submit:66,brandCompareScreen_close:67,brandCompareScreen_skip:68,initialResultsScreen_landed:69,initialResultsScreen_close:70,initialResultsScreen_back:71,finalResultsScreen_landed:72,finalResultsScreen_close:73,finalResultsScreen_back:74,tummyShapeScreen_landed:75,tummyShapeScreen_back:76,tummyShapeScreen_submit:77,tummyShapeScreen_close:78,tummyShapeScreen_skip:79,hipShapeScreen_landed:80,hipShapeScreen_back:81,hipShapeScreen_submit:82,hipShapeScreen_close:83,hipShapeScreen_skip:84,ageScreen_back:86,ageScreen_close:88,braScreen_back:91,braScreen_close:93,managePurchasesScreen_back:96,managePurchasesScreen_close:98,lowerCategoryScreen_landed:100,lowerCategoryScreen_back:101,lowerCategoryScreen_submit:102,lowerCategoryScreen_close:103,lowerCategoryScreen_skip:104,fitPreferenceScreen_landed:105,fitPreferenceScreen_submit:106,genderScreen_landed:107,genderScreen_submit:108,immediateRecommendation_out_of_scale:109,lowerBrandScreen_landed:110,lowerBrandScreen_skip:111,lowerBrandScreen_submit:112,lowerModelScreen_landed:113,lowerSizeScreen_landed:114,lowerSizeScreen_submit:115,resultsScreen_returned_landed:116,resultsScreen_submitted_landed:117,shoesBrandScreen_landed:118,shoesBrandScreen_submit:119,shoesSizeScreen_landed:120,shoesSizeScreen_submit:121,shoesWidthScreen_landed:122,shoesWidthScreen_submit:123,"warningScreen_error: loading timeout":124,"warningScreen_error: no fit indicators for result screen":125,"warningScreen_warning: long loading time":126,chestShapeScreen_landed:127,chestShapeScreen_submit:128,close_age:129,close_body_mass:130,close_body_shape:131,close_bra:132,close_fit:133,close_gender:134,close_lower_brand:135,close_lower_size:136,close_lower_type_mobile:137,close_manage_purchases:138,close_out_of_scale:139,close_results:140,close_shoes_brand:141,close_shoes_size:142,close_shoes_type_mobile:143,close_shoes_width_mobile:144,close_warning:145,lowerRiseScreen_landed:146,shoesCategoryScreen_landed:147,shoesCategoryScreen_submit:148,shoesModelScreen_landed:149,shoesModelScreen_skip:150,shoesModelScreen_submit:151,sizeRecommendation_lower_results:152,sizeRecommendation_returning_lower_results:153,sizeRecommendation_returning_shoes_results:154,sizeRecommendation_returning_upper_results:155,sizeRecommendation_shoes_results:156,sizeRecommendation_upper_results:157},fe=[/^(resultsScreen_close)$/,/^(shapeSelectScreen_close)$/,/^(shoes_type_close)$/,/^(suggestBrand).*/,/^(enterData).*/];return function(me){var fe=window.s;return ue.getFitAnalyticsState(me.faContext).then((function(ge){var ve={},be=me.faContext,ye=me.commons,Se=ue.states.NO_VIEWED_SCREENS,xe=[],we=me.context.toLowerCase(),ke=s(be)?s(be):Se;"fit analytics impression"===we?(pe.getPerformanceMetricsValues().forEach((function(ue){fe[ue.eVar]=ue.duration,xe.push(ue.event+"="+ue.duration)})),xe.push("event50"),xe.push("event114")):"launch widget"===we?(xe.push("event51"),xe.push("event124")):"close widget"===we&&(fe.prop70=ke,xe.push("event124"));fe.prop36=ge,fe.eVar50=ue.getFitAnalyticsSize(be),fe.events=xe.join(","),ve.linkTrackVars=ye.setLinkTrackVars(["products","prop36","prop70","eVar50","eVar163","eVar164","eVar165","eVar166","eVar167","eVar168","eVar169","eVar170"].concat(he.getGlobalEvars())),ve.linkTrackEvents=ye.setLinkTrackEvents(he.getLinkTrackEvents(xe)),fe.tl(!0,"o",we,ve)}))}})),define("ProductUtils/Analytics/SaveForLater",["PageConfig","ProductUtils/Analytics/Utils/Common","ProductUtils/Analytics/Utils/FitAnalytics"],(function(ue,he,pe){function n(ue,he){ue.tl(!0,"o","save for later click",he)}return function(me){var fe=window.s,ge={},ve=[],be=me.commons,ye=me.saveForLaterType.toLowerCase(),Se=[];fe.products=";"+(me.product.variantId||me.product.productId);var xe=he.getProductAreaAttribute(ye);return fe.eVar92=xe,fe.products=he.addMerchEVarToProducts(fe.products,"eVar13="+xe),"main"===ye&&(me.sellingFast&&(fe.products=he.addMerchEVarToProducts(fe.products,"eVar151=selling fast")),"product"===ue.pageType&&me.ratings&&Object.keys(me.ratings).length&&(fe.eVar185=(me.ratings.averageOverallRating/5).toFixed(2),fe.eVar186=String(me.ratings.totalReviewCount),ve.push("event257="+fe.eVar185,"event258="+fe.eVar186),Se.push("eVar185","eVar186")),"mix&match"===ue.pageType&&(fe.products=he.addMerchEVarToProducts(fe.products,"eVar182=mix & match"))),ve.push("event10"),fe.prop32="save for later",fe.events=ve.join(","),ge.linkTrackVars=be.setLinkTrackVars(["products","eVar66","eVar67","eVar92"].concat(he.getGlobalEvars(),Se)),ge.linkTrackEvents=be.setLinkTrackEvents(he.getLinkTrackEvents(ve)),me.faContext?pe.getFitAnalyticsState(me.faContext).then((function(ue){fe.products=he.addMerchEVarToProducts(fe.products,"eVar150="+ue)})).then((function(){n(fe,ge)})):void n(fe,ge)}})),define("ProductUtils/Analytics/AddToBag",["PageConfig","ProductUtils/Analytics/Utils/FitAnalytics","ProductUtils/Analytics/Utils/Common","ProductUtils/calculateDiscount"],(function(ue,he,pe,me){return function(fe){function a(){!function r(ue,he,me,fe,ge,ve){ue.events=ge.join(","),he.linkTrackVars=me.setLinkTrackVars(ve),he.linkTrackEvents=me.setLinkTrackEvents(pe.getLinkTrackEvents(ge)),ue.tl(!0,"o",fe,he)}(ge,ve,be,Se,we,ke)}for(var ge=window.s,ve={},be=fe.commons,ye=fe.context.toLowerCase(),Se="add to bag",xe=[],we=[],ke=["products","prop38","eVar66","eVar67","prop75","eVar91","eVar92","eVar151","eVar152"].concat(pe.getGlobalEvars()),_e=0;_e<fe.variants.length;_e++)xe.push(fe.variants[_e].variantId);ge.products=";"+xe.join(",;");var Ie=pe.getProductAreaAttribute(fe.addToBagType);if(ge.eVar92=Ie,ge.products=pe.addMerchEVarToProducts(ge.products,"eVar13="+Ie),"main"===fe.addToBagType&&"mix&match"===ue.pageType&&(ge.products=pe.addMerchEVarToProducts(ge.products,"eVar182=mix & match")),"addtobagerror"===ye?(Se="add to bag error",we.push("event149"),ge.prop38=fe.errorId+"|"+fe.errorCode):(we.push("event150="+fe.variants.length),we.push("event151="+function s(ue){return ue.reduce((function(ue,he){return ue+(void 0===he.price.current?he.price:he.price.current.value)}),0)}(fe.variants)),we.push("scAdd"),we.push("scOpen")),"product page"===Ie){if(fe.variants.length){if(fe.ratings&&Object.keys(fe.ratings).length){var Ce=(fe.ratings.averageOverallRating/5).toFixed(2),Pe=fe.ratings.totalReviewCount;if(ge.products=pe.addMerchEVarToProducts(ge.products,["eVar189="+Ce,"eVar190="+Pe]),we.push("event257="+Ce),we.push("event258="+Pe),fe.ratings.percentageRecommended){var Te=fe.ratings.percentageRecommended;ge.products=pe.addMerchEVarToProducts(ge.products,"eVar191="+Te),we.push("event259="+Te)}if(fe.ratings.mostRecent){var ze=(fe.ratings.mostRecent.rating/5).toFixed(2);ge.products=pe.addMerchEVarToProducts(ge.products,"eVar202="+ze),we.push("event274="+ze)}if(fe.ratings.subRatings&&fe.ratings.subRatings.length){var Ae=fe.ratings.subRatings[0],Ee=(Ae.percentage/100).toFixed(2);ge.products=pe.addMerchEVarToProducts(ge.products,"eVar192="+Ae.id+" "+Ee),we.push("event260="+Ee)}}else if(fe.ratings&&"product"===ue.pageType){var Me="value not in response";ge.products=pe.addMerchEVarToProducts(ge.products,["eVar189="+Me,"eVar190="+Me,"eVar191="+Me,"eVar192="+Me,"eVar202="+Me])}if(fe.variants[0].priceObj.rrp)var Le=fe.variants[0].priceObj.rrp.value;var Ve=fe.variants[0].priceObj.current.value;if(Le)ge.eVar161=me(Ve,Le);else{var Re=fe.variants[0].priceObj.previous.value;ge.eVar161=me(Ve,Re)}fe.variants[0].zeekitEnabled&&(ge.eVar67="zeekit modal impression"),fe.variants[0].sellingFast&&(ge.products=pe.addMerchEVarToProducts(ge.products,"eVar151=selling fast"))}if(ke=ke.concat(["prop36","eVar50","eVar51","eVar150","eVar161"]),fe.faContext)return he.getFitAnalyticsState(fe.faContext).then((function(ue){ge.prop36=ge.eVar150=ue,ge.products=pe.addMerchEVarToProducts(ge.products,"eVar150="+ue),ge.eVar50=ge.eVar51=he.getFitAnalyticsSize(fe.faContext)})).then((function(){a()}));a()}else a()}})),define("ProductUtils/Analytics/PageInteraction",["ProductUtils/Analytics/Utils/Common"],(function(ue){return function(he){function i(he){ve.events=fe.join(","),pe.linkTrackVars=me.setLinkTrackVars(["prop15"].concat(ue.getGlobalEvars())),pe.linkTrackEvents=me.setLinkTrackEvents(ue.getLinkTrackEvents(fe)),ve.tl(!0,"o",he,pe)}function u(){ve.prop15=ge,i(ge)}var pe={},me=he.commons,fe=[],ge=he.eventData.context.toLowerCase(),ve=window.s;he.eventData.productIID&&(ve.products=";"+he.eventData.productIID),fe.push("event18"),{socialshare:function n(){var ue="social share intent";he.eventData.socialPlatform&&(ue=ue.concat("|"+he.eventData.socialPlatform)),ve.prop15=ue,i("social share")},launchsizeguide:function c(){ve.prop15="launch size guide",fe.push("event103"),i("size guide click")},freedeliveryandreturns:function a(){ve.prop15="free delivery and returns",fe.push("event95"),i("free delivery and returns click")},shippingrestrictions:function o(){void 0===window.trackingShippingRestrictionsClick&&(window.trackingShippingRestrictionsClick=1,ve.prop15="shipping restrictions",i("shipping restrictions click"))},showmore:function s(){void 0===window.trackingEventMore&&(window.trackingEventMore=1,ve.prop15="show more",i("show more click"))},showless:function r(){void 0===window.trackingEventLess&&(window.trackingEventLess=1,ve.prop15="show less",i("show less click"))},openmodal:function l(){ve.prop15="mix and match|open modal",i("mix and match modal click")},chevronclick:function d(){void 0===window.trackingChangeThumbnail&&(window.trackingChangeThumbnail=1,ve.prop15="product chevron click",i("product chevron click"))},"360launch":u,"360zoom":u,thumbnailclick:u,video:function h(){ve.prop15="video progress "+he.eventData.videoEvent,i(ge)},zeekitopened:function p(){var ue="zeekit modal click";ve.prop15=ue,i(ue)}}[ge]()}})),define("ProductUtils/Analytics/Signal",["jquery","PageConfig","ProductUtils/UrlUtils"],(function(ue,he,pe){function n(pe,me){var fe={keyStoreDataVersion:he.keyStoreDataversion,selectedCountry:he.countryCode,selectedCurrency:he.currency,selectedLanguage:he.language,selectedSizeSchema:he.sizeSchema,sitechromeTemplateVersion:he.siteChromeTemplateVersion};Object.keys(fe).forEach((function(ue){me[ue]=fe[ue]})),ue(window).trigger("tracking.productPage."+pe,me)}function s(ue){return ue.filter((function(ue){return!0===ue.isInStock})).length}function r(ue){return ue.reduce((function(ue,he){return ue[he.size]||ue.push(he.size),ue}),[]).length}function o(ue){return ue.map((function(ue){return{variantId:ue.variantId,variantSku:ue.sku,stockStatus:ue.isInStock?"in stock":"out of stock"}}))}var me=new pe;return{singleProductPageLoad:function a(ue){var pe=void 0!==ue.productPrice?ue.productPrice:ue.price;window.Product={ProductIID:ue.id,ProductCode:ue.productCode,OriginalPrice:pe.xrp,CurrentPrice:pe.current,AvailbleSku:s(ue.variants),AvailibleSizes:r(ue.variants),ProductURL:document.querySelector("link[rel=canonical]").href,CID:me.getUrlParam("cid"),BreadCrumb:he.breadcrumb,Platform:he.platform,StoreID:he.storeId,PageType:"product",PageName:he.pageTitle,Channel:he.gender,ProductCategoryName:he.breadcrumb.split("/").splice(2).join(" | "),VariantStockStatus:o(ue.variants)},n("pageLoad",window.Product)},mixAndMatchProductPageLoad:function c(ue){window.Product={ProductURL:document.querySelector("link[rel=canonical]").href,CID:me.getUrlParam("cid"),BreadCrumb:he.breadcrumb,AvailibleProducts:ue.productIds,Platform:he.platform,PageType:"mix&match",PageName:he.pageTitle,Channel:he.gender,ProductCategoryName:he.breadcrumb.split("/").splice(2).join(" | ")},n("pageLoad",window.Product)},addToBag:function l(ue,he){var pe=[],me=0;ue=void 0===ue.length?[ue]:ue;for(var fe=0;fe<ue.length;fe++){var ge=void 0===ue[fe].price.current?ue[fe].price:ue[fe].price.current.value;me+=ge,pe.push({productIID:ue[fe].productId,variantIID:ue[fe].variantId,units:ue.length,salePrice:ge,sellingFast:ue[fe].sellingFast})}n("addToBag",{context:"addToBag",totalValue:me,productsAdded:pe.length,addToBagType:he,products:pe})},saveForLater:function d(ue,he){he=void 0===he?"main":he;for(var pe=0;ue.length>pe;pe++)n("saveForLater",{context:"saveForLater",productIID:ue[pe].productId,variantIID:ue[pe].variantId,saveForLaterType:he,SellingFast:ue[pe].sellingFast})}}})),define("ProductUtils/Analytics",["ProductUtils/Analytics/PageLoad","ProductUtils/Analytics/FitAnalytics","ProductUtils/Analytics/SaveForLater","ProductUtils/Analytics/AddToBag","ProductUtils/Analytics/PageInteraction","ProductUtils/Analytics/Signal"],(function(ue,he,pe,me,fe,ge){return new function(){var ve;window.CommonAnalytics&&(ve=new window.CommonAnalytics),this.firePageInteraction=function(ue){fe({eventData:ue,commons:ve})},this.normalizeError=function(ue,he){var pe=[{errorCode:null,errorMessage:he}];return ue.message=Array.isArray(ue.message)?ue.message:pe,ue},this.addVariants=function(ue,he,pe,fe,be){ue=void 0===ue.length?[ue]:ue,void 0===pe&&(pe="main"),he?me({context:"addToBagError",addToBagType:pe,variants:ue,errorCode:he.message[0].errorCode,errorId:he.message[0].errorMessage,faContext:fe,commons:ve,ratings:be}):(me({context:"addToBag",addToBagType:pe,variants:ue,faContext:fe,commons:ve,ratings:be}),ge.addToBag(ue,pe))},this.saveVariants=function(ue,he,me){var fe;void 0===me&&(me="main",fe=he.fitAnalyticsContext);for(var be=0;ue.length>be;be++)pe({product:ue[be],saveForLaterType:me,commons:ve,sellingFast:he.sellingFast,faContext:fe,ratings:he.ratings}),ge.saveForLater(ue,me)},this.fireFitAnalyticsOpenWidgetEvent=function(ue){he({context:"launch widget",commons:ve,faContext:ue})},this.fireFitAnalyticsOutOfScaleEvent=function(ue){he({context:"out of scale",commons:ve,faContext:ue})},this.fireFitAnalyticsCloseWidgetEvent=function(ue){he({context:"close widget",commons:ve,faContext:ue})},this.fireFitAnalyticsLoadEvent=function(ue){he({context:"fit analytics impression",commons:ve,faContext:ue})},this.fireProductLoadEvent=function(he,pe){ue({pageType:"product",productId:he.id,isInStock:he.isInStock,product:he,zeekitEnabled:pe.zeekitEnabled,commons:ve,ratings:pe.ratings}),ge.singleProductPageLoad(he)},this.fireMixMatchLoadEvent=function(he){ue({pageType:"mix&match",productId:he.id,isInStock:this.mixMatchInStock(he.products),mixAndMatch:{productIds:he.productIds},commons:ve}),ge.mixAndMatchProductPageLoad(he)},this.mixMatchInStock=function(ue){for(var he=!1,pe=0;pe<ue.length;pe++)ue[pe].isInStock&&(he=!0);return he}}})),define("ProductUtils/Bag",["ProductUtils/Analytics","ProductUtils/NewRelicLogger","Providers/SdkProvider"],(function(ue,he,pe){return function(me,fe){function r(ue,he){for(var pe in he)he.hasOwnProperty(pe)&&(ue[pe]=he[pe]);return ue}function o(ue){return{productId:ue.productId,colour:ue.colourName,sizeId:ue.sizeId,variantId:ue.variantId,price:ue.price.current.value,priceObj:ue.price,sellingFast:me.state.sellingFast,zeekitEnabled:me.state.zeekitEnabled}}return this.error="",void 0!==me&&(this.error=me.state.resources.pdp_status_error_max_items),this.addItems=function(ue,he){pe.getBag().then(function(pe){var me;if(ue.length>1){var ge=this.formatAddProducts(ue);me=pe.addVariants(ge),this.watchPromise(me,he,ge,fe)}else{var ve=void 0!==ue[0]?ue[0]:ue;ve.colourName=void 0===ve.colourName?ve.colour:ve.colourName;var be=o(ve);me=pe.addVariant(be),this.watchPromise(me,he,be,fe)}}.bind(this))},this.formatErrorMessage=function(ue){var he=ue.userMessage||"";return ue.hasOwnProperty("messageContext")&&ue.messageContext&&ue.messageContext.length>0&&(he=he.replace(/{(\d)}/g,(function(he,pe){var me=ue.messageContext[parseInt(pe,10)];return me||"..."}))),he},this.watchPromise=function(pe,fe,ge,ve){pe.then((function(){return ue.addVariants(ge,!1,ve,me.state.fitAnalyticsContext,me.state.ratings),fe({success:!0,error:""})}),function(pe){pe=ue.normalizeError(pe,me.state.resources.pdp_status_add_to_bag_failure),ue.addVariants(ge,pe,ve,me.state.fitAnalyticsContext,me.state.ratings);var be,ye={action:"AddToBag"};ye=r(ye,ge),ye=r(ye,pe),ye=r(ye,pe.message[0]),he.logError(new Error(he.ERROR_TYPE.UserActionFailed),ye),be="LegacyQuantityLimitReached"===pe.message[0].errorCode?this.error:this.formatErrorMessage(pe.message[0]),fe({success:!1,error:be})}.bind(this))},this.formatAddProducts=function(ue){for(var he=[],pe=0;pe<ue.length;pe++){var me=o(ue[pe]);me.colourName=void 0===me.colourName?me.colour:me.colourName,he.push(me)}return he},this}})),define("Components/product-image/product-image",["ko","text!./product-image.html","ProductUtils/Bag"],(function(ue,he,pe){return{viewModel:function n(he){this.imgUrl=he.imgUrl;var me=he.data,fe=new pe;this.state=he.state,this.productId=he.productId,this.saveForLaterCalled=ue.observable(!1),this.context=he.context,this.productData=he.productData,this.saveForLater=function(){!0!==this.saveForLaterCalled()&&(fe.saveProduct(me),this.saveForLaterCalled(!0))}.bind(this),this.hideSaveButton=he.hideSaveButton},template:he}})),define("text!Components/product-price/product-price.html",[],(function(){return'<div class="grid-row rendered" data-bind="attr: {\'aria-label\': getAriaLabel()}">\n  <span aria-hidden="true">\n    <span data-id="rrp-price" data-bind="text: rrpPriceText, visible: showRrpPrice" class="product-prev-price"> </span>\n    <span data-id="previous-price" data-bind="text: prevPriceText, visible: showPrevPrice" class="product-prev-price"></span>\n    <span data-id="from-price" data-bind="visible: showFromLabel, text: fromLabelText, css: { \'price-from-discounted\' : isDiscountedPrice }" class="price-from"></span>\n    <span class="current-price-container">\n        <span data-id="current-price" data-bind="text: priceText(), css: {\'product-price-discounted\' : isDiscountedPrice }, markAndMeasure: \'pdp:price_displayed\'" class="current-price"></span><span data-bind="text: discountText(), visible: isDiscountedPrice" class="product-discount-percent"></span>\n    </span>\n    <span data-id="german-vat-message" data-bind="text: i18n.pdp_misc_vat_message, visible: showGermanVatMessage" class="product-german-vat"></span>\n  </span>\n</div>\n\x3c!-- ko if: showPrevPrice --\x3e\n<div class="clear-element"></div>\n\x3c!-- /ko --\x3e'})),define("ProductUtils/Cookies",["Utils"],(function(ue){return function(){this.getXSiteOrigin=function(){var he=ue.Cookies.readCookie("x-site-origin",!0);return he||null}}})),define("ProductUtils/Ajax",["$","uuid","ProductUtils/Cookies","ProductUtils/NewRelicLogger","ProductUtils/UrlUtils"],(function(ue,he,pe,me,fe){return function(){this.execute=function(he){var ge,ve,be="ProductPage",ye=new pe,Se=new fe;he.callerContext?be+="."+he.callerContext:be=!1,ve=void 0!==he.retryCount?he.retryCount:null,ge=void 0!==he.authorization?he.authorization:null,void 0===he.cache&&(he.cache=!0);var xe=function r(ue,he){if(!he)return ue;var pe="";return Object.keys(he).sort().forEach((function(me){var fe=he[me];null!=fe&&(ue.indexOf(me+"=")>-1||(pe+="&"+me+"="+fe))})),-1===ue.indexOf("?")&&(pe="?"+pe.slice(1)),ue+pe}(he.url,he.storeParams),we={},ke=Se.getUrlParam("x-site-origin")||ye.getXSiteOrigin();return ke&&(we["x-site-origin"]=ke),ue.ajax({cache:he.cache,url:xe,data:we,tryCount:0,retryLimit:ve,dataType:he.dataType,jsonpCallback:he.jsonpCallback,beforeSend:function(ue){this.addRequestHeaders(ue,be,ge)}.bind(this),success:function(ue){this.successRequest(he.successCallback,ue,he.callbackArgs)}.bind(this),error:function(pe){return me.logError(new Error(me.ERROR_TYPE.AjaxError),{apiName:he.apiName,requestUrl:xe,status:pe.status,caller:he.callerContext,response:pe.response,xSiteOrigin:ke,requestHeaders:pe.headers,responseHeaders:pe.getAllResponseHeaders()}),null!==this.retryLimit&&this.tryCount<=this.retryLimit?(this.tryCount++,void ue.ajax(this)):void this.errorRequest(he.errorCallback,pe,he.callbackArgs)}.bind(this)})},this.addRequestHeaders=function(ue,pe,me){if(ue.headers={},!1!==pe){var fe=he();ue.setRequestHeader("asos-c-name",pe),ue.setRequestHeader("asos-cid",fe),ue.headers["asos-c-name"]=pe,ue.headers["asos-cid"]=fe}null!==me&&(ue.setRequestHeader("Authorization",me),ue.headers.Authorization=me)},this.successRequest=function(ue,he,pe){ue&&ue(he,pe)},this.errorRequest=function(ue,he,pe){ue&&ue(he,pe)}}})),define("ProductUtils/Discount",["ko","Providers/SdkProvider","ProductUtils/calculateDiscount"],(function(ue,he,pe){function n(ue,he){return"(-"+pe(ue,he)+"%)"}var me=ue.observable(!1),fe=[];return he.getFeatures().then((function(ue){me(ue.ifActive("plp-show-discount-label"))})),me.subscribe((function(ue){ue&&fe.forEach((function(ue){ue.observable(n(ue.currentPrice,ue.previousPrice))}))})),{getDiscountText:function s(ue,he,pe){return me()?void ue(n(he,pe)):(fe.push({observable:ue,currentPrice:he,previousPrice:pe}),ue(""))}}})),define("Components/product-price/product-price",["ko","text!./product-price.html","ProductUtils/Ajax","ProductUtils/Discount"],(function(ue,he,pe,me){return{viewModel:function s(he){var fe,ge=he.state,ve=ge.productData;this.i18n=ge.resources,this.ajax=new pe,this.showRrpPrice=void 0!==ve.rrpPrice,this.rrpPriceText=this.showRrpPrice?this.i18n.pdp_price_rrp+" "+ve.rrpPrice.text:"",this.showGermanVatMessage=!!he.showGermanVatMessage,this.prevPrice=ue.computed(function(){return void 0===ge.selectedColour()&&void 0!==ve.maxPrevPrice?ve.maxPrevPrice:void 0!==ge.selectedColour()&&void 0!==ge.selectedColour().prevPrice?ge.selectedColour().prevPrice:void 0}.bind(this)),this.prevPriceText=ue.computed(function(){return this.prevPrice()?this.prevPrice().text:""}.bind(this)),this.showPrevPrice=ue.computed(function(){return""!==this.prevPriceText()}.bind(this)),this.showFromLabel=ue.computed((function(){return void 0!==ve.hasDifferentPrices&&void 0===ge.selectedColour()})),this.fromLabelText=this.i18n.pdp_misc_from,this.isDiscountedPrice=ue.computed(function(){return this.showPrevPrice()||this.showRrpPrice}.bind(this)),fe=void 0===ge.selectedColour()?ve.minPrice:ge.selectedColour().price,this.price=ue.observable(fe),he.isDisplayPrice&&this.price.subscribe(function(ue){he.state.displayPrice(ue.value)}.bind(this)),this.discountText=ue.observable(""),this.showRrpPrice?this.price()&&ve.rrpPrice&&me.getDiscountText(this.discountText,this.price().value,ve.rrpPrice.value):this.price()&&this.prevPrice()&&me.getDiscountText(this.discountText,this.price().value,this.prevPrice().value),this.priceText=ue.computed(function(){return void 0===this.price()?"":this.price().text}.bind(this)),this.getAriaLabel=ue.computed(function(){var ue="";this.showPrevPrice()&&(ue=ue.concat(this.i18n.pdp_price_was," ",this.prevPriceText())),this.showRrpPrice&&(ue=ue.concat(this.i18n.pdp_price_rrp_longform||this.i18n.pdp_price_rrp," ",ve.rrpPrice.text));var he=this.isDiscountedPrice()?this.i18n.pdp_price_sale:this.i18n.generic_current_price;return ue=ue.concat(" "+he+" "+this.priceText()+" "+this.discountText()),this.showGermanVatMessage&&(ue=ue.concat(" ",this.i18n.pdp_misc_vat_message_longform||this.i18n.pdp_misc_vat_message)),ue}.bind(this)),ge.selectedColour.subscribe(function(ue){ue?this.price(ue.price):this.price(ve.minPrice)}.bind(this))},template:he}})),define("text!Components/social-share/social-share.html",[],(function(){return'<button\n    class="link social-share-icon"\n    id="social-share-button"\n    data-bind="click: toggleShareIcons, clickBubble: false, attr: { \'aria-expanded\': isVisible }"\n    aria-haspopup="true"\n    aria-controls="share-bar"\n>\n    <span class="product-share-icon" data-bind="attr: { \'aria-label\': state.resources.pdp_cta_social_share }"></span>\n</button>\n<div class="share-bar-wrap" data-bind="visible: isVisible">\n    <div class="triangle-up"></div>\n    <ul role="menu" id="share-bar" aria-labelledby="social-share-button">\n        \x3c!-- ko if : isRussia --\x3e\n        <li role="menuitem" tabindex="-1"><a data-bind="attr: { href: vkLink }, click: handleClick" data-id="vk" aria-label="vk" class="product-vk-icon"></a></li>\n        \x3c!-- /ko --\x3e\n        <li role="menuitem" tabindex="-1"><a data-bind="attr: { href: facebookLink }, click: handleClick" data-id="facebook" aria-label="facebook" class="product-facebook-icon"></a></li>\n        <li role="menuitem" tabindex="-1"><a data-bind="attr: { href: pinterestLink }, click: handleClick" data-id="pinterest" aria-label=pinterest" class="product-pinterest-icon"></a></li>\n        \x3c!-- ko if : isMobile --\x3e\n        <li role="menuitem" tabindex="-1"><a data-bind="attr: { href: whatsappLink }, click: handleClick" data-id="whatsapp" aria-label="whatsapp" class="product-whatsapp-icon"></a></li>\n        <li role="menuitem" tabindex="-1"><a data-bind="attr: { href: emailLink }, click: fireAnalytics" data-id="email" aria-label="email" class="product-email-icon"></a></li>\n        \x3c!-- /ko --\x3e\n    </ul>\n</div>\n'})),define("Components/social-share/social-share",["ko","text!./social-share.html","PageConfig","ProductUtils/Analytics","ProductUtils/NewRelicLogger"],(function(ue,he,pe,me,fe){return{viewModel:function r(he){function r(ue){for(var he=[],pe=Object.keys(ue),me=0;me<pe.length;me++){var fe=pe[me];he.push(fe+"="+encodeURIComponent(ue[fe]))}return he.join("&")}this.isVisible=ue.observable(!1),this.isMobile="mobile"===pe.platform,this.isRussia="ru"===pe.storeCode.toLowerCase();var ge,ve,be,ye=he.data,Se=ye.images[0].url,xe=document.querySelector("link[rel=canonical]").href;this.facebookLink="https://www.facebook.com/sharer/sharer.php?"+r({u:xe+"?ctaref=product_share_facebook"}),this.vkLink="http://vk.com/share.php?"+r({url:xe+"?ctaref=product_share_vk"}),this.pinterestLink="https://pinterest.com/pin/create/button/?"+r({url:xe+"?ctaref=product_share_pinterest",media:Se,description:ye.name}),this.whatsappLink="https://wa.me/?"+r({text:ye.name+" "+xe+"?ctaref=product_share_whatsapp"}),this.emailLink="mailto:?"+r({subject:ye.name,body:ye.name+" "+xe+"?ctaref=product_share_email"}),this.setClickListener=function(ue){document.addEventListener("click",ge=function(he){-1===ue.indexOf(he.target)&&(this.isVisible(!1),document.removeEventListener("click",ge))}.bind(this))}.bind(this),this.setKeydownListener=function(ue,he,pe){document.addEventListener("keydown",ve=function(me){27===me.keyCode&&(ue.focus(),this.isVisible(!1),document.removeEventListener("keydown",ve)),("Tab"===me.key||9===me.keyCode)&&(me.shiftKey?document.activeElement===he&&(pe.focus(),me.preventDefault()):document.activeElement===pe&&(he.focus(),me.preventDefault()))}.bind(this))}.bind(this),this.fireAnalytics=function(ue,he){var pe,fe=ye.id+"";return he&&(pe=he.target.dataset.id),me.firePageInteraction({context:"socialShare",socialPlatform:pe,productIID:fe}),!0},this.handleClick=function(ue,he){this.fireAnalytics(ue,he),window.open(he.target.href,"SocialShareWindow","width=700,height=600,resizable,scrollbars=yes,status=1")},this.openSocialShare=function(){var ue=document.activeElement,he=Array.prototype.slice.call(ue.parentElement.querySelectorAll("#share-bar, #share-bar a")),pe=he.slice(1),me=pe[0],fe=pe[pe.length-1];return this.isVisible()?(this.isVisible(!1),void ue.focus()):(be||(be=!0,this.fireAnalytics()),this.setClickListener(he),this.setKeydownListener(ue,me,fe),this.isVisible(!0),void me.focus())}.bind(this),this.toggleShareIcons=function(){navigator.share&&this.isMobile?navigator.share({title:ye.name,text:ye.name,url:xe+"?ctaref=product_share_native"}).then(function(){this.fireAnalytics()}.bind(this)).catch(function(ue){fe.logError(ue),this.openSocialShare()}.bind(this)):this.openSocialShare()}.bind(this)},template:he}})),define("Components/content/content",[],(function(){return{viewModel:function e(ue){this.state=ue.state,this.product=ue.data}}})),define("text!Components/out-of-stock/out-of-stock.html",[],(function(){return'\x3c!-- ko if: !inStock --\x3e\n    \x3c!-- ko if: productCode --\x3e\n    <p class="product-code">\n        <span class="label" data-bind="text:productCodeLabel"></span>\n        <span data-bind="text:productCode"></span>\n    </p>\n    \x3c!-- /ko --\x3e\n    \n<div data-bind="visible: isMoreFromMessageVisible()"> \n    <div class="more-from">\n        <h2 data-bind="text:moreFromMessage"></h2>\n\n        <ul data-bind="foreach: moreFrom">\n            <li><a href="#" data-bind="attr: { href: $parent.getTrackedLinkUrl(linkUrl) }, text: friendlyName"></a></li>\n        </ul>\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n'})),define("Components/out-of-stock/out-of-stock",["ko","text!./out-of-stock.html"],(function(ue,he){return{viewModel:function i(ue){var he=ue.state;if(this.inStock=he.productData.isInStock,this.inStock)return!1;this.moreFromMessage=he.resources.pdp_carousel_more_from_title,this.productCodeLabel=he.resources.pdp_description_product_code_title,this.productCode=ue.data.productCode;var pe=ue.data;this.moreFrom=pe.categories,this.isMoreFromMessageVisible=function(){return!1},this.getTrackedLinkUrl=function(ue){return ue+(-1===ue.indexOf("?")?"?":"&")+"CTAref=More+From"}},template:he}})),define("text!Components/size-guide/size-guide.html",[],(function(){return'\x3c!-- ko if: render() --\x3e\n<div class="size-guide-button">\n    \x3c!-- ko if: !isMobile --\x3e\n        <button id="size-guide-button" class="link" data-bind="click : toggleSizeGuideVisibility, text : text"></button>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: isMobile --\x3e\n    <a href="#" target="_blank" data-bind="click: fireSizeGuideEvent, attr : { href : sizeGuideUrl }, text : text"></a>\n    \x3c!-- /ko --\x3e\n</div>\n\n<div id="size-guide-modal" data-bind="component: { name: \'side-modal\', params: { showModal: sizeGuideVisible, data: { sizeGuideUrl: sizeGuideUrl, closeSizeGuide: closeSizeGuide, closeSizeGuideLabel: closeSizeGuideLabel, ariaLabel: sizeGuideAriaLabel, tabHandler: tabHandler } } }">\n    <button class="size-guide-close" id="size-guide-close" data-bind="click : closeSizeGuide, attr: {\'aria-label\': closeSizeGuideLabel}, event: {keydown: tabHandler}"></button>\n    <iframe id="size-guide-iframe" frameborder="0" seamless="seamless" data-bind="attr: { src: sizeGuideUrl }"></iframe>\n</div>\n\n\x3c!-- /ko --\x3e\n'})),define("Components/size-guide/size-guide",["ko","text!./size-guide.html","PageConfig","ProductUtils/Analytics"],(function(ue,he,pe,me){return{viewModel:function s(he){this.text=he.dictionary.pdp_size_guide_link,this.sizeGuideUrl=he.url,this.sizeGuideAriaLabel=he.dictionary.pdp_size_guide_aria_label,this.closeSizeGuideLabel=he.dictionary.pdp_misc_close,this.isMobile="mobile"===pe.platform,this.sizeGuideVisible=ue.observable(!1),this.render=he.visible,this.deferFocus=function(ue){setTimeout((function(){document.getElementById(ue).focus()}),100)}.bind(this),this.fireSizeGuideEvent=function(){return me.firePageInteraction({context:"launchSizeGuide",productIID:he.id}),!0},this.closeSizeGuide=function(){this.sizeGuideVisible(!1),this.deferFocus("size-guide-button")}.bind(this),this.toggleSizeGuideVisibility=function(){this.sizeGuideVisible(!this.sizeGuideVisible()),this.sizeGuideVisible()&&(this.fireSizeGuideEvent(),this.deferFocus("size-guide-close"))},this.tabHandler=function(ue,he){return!he.shiftKey||9!==he.keyCode||void document.getElementById("size-guide-iframe").contentWindow.postMessage("tabprev","*")},window.addEventListener("message",(function(ue){"tabnext"===ue.data&&document.getElementById("size-guide-close").focus()}),!1)},template:he}})),define("text!Components/might-like/might-like.html",[],(function(){return'\x3c!-- ko if: isVisible --\x3e\n<section>\n    <div class="layout-width you-might-also-like" data-bind="visible: carousel.items().length > 0">\n        <div class="layout-module">\n            <h2 class="might-like-title" data-bind="text: title"></h2>\n            <div class="carousel">\n                <div class="row">\n                    <div class="arrows">\n                        <a class="arrow left-arrow" data-bind="click:carousel.moveLeft, css: {active : carousel.hasPreviousPanel }, visible: carousel.hasOtherPanels"><span></span></a>\n                    </div>\n                    <div class="window" data-bind="swipe">\n                        <ul class="slide-panel" data-bind="foreach: carousel.visibleItems, style: { width: carousel.width(), marginLeft:carousel.slidePosition()},css: { suppressSlide : !carousel.animate() }">\n                            <li data-bind="style: { width: $parent.carousel.itemWidth()}">\n                                <a data-bind="attr: { href: $parent.getProductLink($data, $index())}">\n                                    <div class="product-tile">\n                                        <img data-bind="attr: { src: $parent.getImageSrc($data), \'aria-describedby\': \'product-tile-header\', alt: \'\'}" />\n                                        <div data-bind=\'component:{\n                                            name: "save-button",\n                                            params:{\n                                                colourWayId: $parent.getColourWayId($data),\n                                                productId: id,\n                                                productImage : $parent.getImageSrc($data),\n                                                context : "youMightLike",\n                                                productData: { name: name },\n                                                state: state\n                                            }\n                                           }\'></div>\n                                        <div class="tile-info">\n                                            <h1 id="product-tile-header" data-bind="text:$parent.formatTitle(name)"></h1>\n                                            <div class="price-container">\n                                                <span class="discounted-price" data-bind="visible: $parent.isPriceDiscounted(price), text:$parent.getDiscountedPriceText(price)"></span>\n                                                <span id="current-price-container">\n                                                    <span class="price" data-bind="text:$parent.getPriceText(price), css: { \'price-highlighted\' : $parent.isPriceDiscounted(price) }"></span>\n                                                    <span data-bind="text: $parent.discountText(price), visible: $parent.isPriceDiscounted(price)" class="discounted-percent"></span>\n                                                </span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </a>\n                            </li>\n                        </ul>\n                    </div>\n                    <div class="arrows">\n                        <a class="arrow right-arrow" data-bind="click:carousel.moveRight, css: {active : carousel.hasNextPanel }, visible: carousel.hasOtherPanels"><span></span></a>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <ul class="nav" data-bind="foreach: carousel.panels, visible: carousel.hasOtherPanels">\n            <li data-bind="click: $parent.carousel.currentPanel.bind($data)">\n                <a data-bind="css:{active:$parent.carousel.currentPanel() == $data}" href="#"></a>\n            </li>\n        </ul>\n    </div>\n</section>\n\x3c!-- /ko --\x3e\n'})),define("ProductUtils/debouncer",[],(function(){return this.debounce=function(ue,he,pe){var me;return function(){var fe=this,ge=arguments,o=function(){me=null,pe||ue.apply(fe,ge)},ve=pe&&!me;clearTimeout(me),me=setTimeout(o,he),ve&&ue.apply(fe,ge)}},this})),define("Models/CarouselControl",["ko","jquery","PageConfig","ProductUtils/debouncer"],(function(ue,he,pe,me){return function(){var fe=this,ge=ue.observable(4),ve=4,be=ue.observable(0),ye="slide",Se=ue.observable(0),xe=ue.observable(),we="desktop"===pe.platform.toLowerCase()?1:2,ke=document.querySelector("html");fe.events=he({}),fe.items=ue.observableArray(),fe.panels=ue.observableArray(),fe.loop=ue.observable(!1),fe.animate=ue.observable(!0),fe.setData=function(ue){null!=ue&&ue instanceof Array?this.items(ue):fe.items.removeAll()},fe.currentPanel=ue.computed({read:function(){return be()},write:function(ue,he){fe.animate(void 0===he||he),ue>=-1&&ue<fe.panels().length&&be(ue)}}),fe.itemsInView=ue.computed({read:function(){return ge()},write:function(ue){ue&&ue>0&&(ge(ue),ve=ue)}}),fe.panels.subscribe((function(){if(be()>=fe.panels().length){var ue=0===fe.panels().length?0:fe.panels().length-1;be(ue)}}));var m=function(ue){for(var he=Math.ceil(ue.length/ge()),pe=fe.panels().length,me=pe;he>me;me++)fe.panels.push(me);for(var ve=he;pe>ve;ve++)fe.panels.pop()};ge.subscribe((function(){m(fe.items())})),fe.items.subscribe(m),fe.width=ue.computed((function(){return(fe.items().length>ge()?100*fe.items().length/ge():100)+"%"})),fe.itemWidth=ue.computed((function(){var ue=fe.items().length>=ge()?100/fe.items().length:100/ge();return ue===1/0&&(ue=0),ue+"%"})),fe.slidePosition=ue.computed((function(){return Se(),"slide"===ye?"-"+100*Math.max(0,be())+"%":Se()+"px"})),fe.moveLeft=function(){var ue;fe.animate(!0),be()>0?(ue=be()-1,be(ue)):fe.loop()&&(ue=fe.panels().length-1,be(ue))},fe.moveRight=function(){fe.animate(!0),be()<fe.panels().length-1?be(be()+1):fe.loop()&&be(0)},fe.hasPreviousPanel=ue.computed((function(){return fe.loop()?fe.panels().length>1:be()>0})),fe.hasNextPanel=ue.computed((function(){return fe.loop()?fe.panels().length>1:fe.panels().length>0&&be()+1<fe.panels().length})),fe.hasOtherPanels=ue.computed((function(){return fe.hasNextPanel()||fe.hasPreviousPanel()})),fe.setAnimationType=function(ue){ye=ue};var f=function(ue){fe.itemsInView(ue),fe.events.trigger("resize")};fe.resize=function(ue,he,pe,me){if(fe.landscapePanels=pe,fe.portraitPanels=me,"mobile"===ue)return fe.setAnimationType("move"),f(he.innerWidth>he.innerHeight?pe:me);if(ke.classList.contains("MasterLayout"))return fe.events.trigger("resize");var ge=ve;return he.innerWidth<=568?(f(Math.ceil(2)),void(ve=ge)):he.innerWidth<=720?(f(Math.ceil((ve+2)/2)),void(ve=ge)):f(Math.ceil(ve))},be.subscribe((function(ue){!xe()&&ue>0&&xe(!0)})),fe.visibleItems=ue.computed((function(){return xe()?fe.items():fe.items.slice(0,Math.ceil(fe.itemsInView())*we)})),window.addEventListener("resize",me.debounce((function(){fe.resize(pe.platform,window,fe.landscapePanels,fe.portraitPanels)}))),ue.bindingHandlers.swipe={init:function(ue){he(ue).scroll((function(){xe()||xe(!0)}))}}}})),define("Components/might-like/might-like",["ko","$","text!./might-like.html","Models/CarouselControl","PageConfig","Utils","ProductUtils/Ajax","Product.Config","Providers/SdkProvider","ProductUtils/UrlUtils","ProductUtils/Discount","events"],(function(ue,he,pe,me,fe,ge,ve,be,ye,Se,xe,we){return{viewModel:function h(he){var pe=he.data,ge=new Se;this.isVisible=ue.observable(!1),this.isVisible.subscribe(function(ue){ue&&this.update(this.serviceUrl)}.bind(this)),ye.getFeatures().then(function(ue){ue.ifActive("pdp-react-might-like")||this.isVisible(!0)}.bind(this)),this.state=he.state,this.resources=this.state.resources,this.features=this.state.features,this.ajax=new ve,this.serviceUrl="",this.useRecs=this.features.recommendationsEnabledStores.indexOf(fe.storeCode.toLowerCase())>-1,this.title=this.useRecs&&!this.state.productData.isInStock?this.state.resources.pdp_carousel_recommendations_out_of_stock:this.state.resources.pdp_carousel_recommendations_title,this.createFredHopperUrl=function(ue,he){return be.ymalApiUrl+ue+"?channel="+he.platform+"-web"},this.createRecsUrl=function(ue){var he=be.recsApiUrl+"?";return"string"==typeof window.mvtMightLikeEndpoint&&window.mvtMightLikeEndpoint.length>0&&(he=window.mvtMightLikeEndpoint),he+this.getRecsApiStockSpecificQueryParams(this.state.productData.isInStock)+"&limit=16&ctx_productIds="+ue},this.getRecsApiStockSpecificQueryParams=function(ue){return ue?"&ctx_origin=pdt":"&ctx_origin=oos"},this.serviceMapper=function(ue){return this.useRecs?this.createRecsUrl(ue):this.createFredHopperUrl(ue,fe)},this.serviceUrl=this.serviceMapper(pe.id),this.carousel=new me,this.carousel.itemsInView(4),this.carousel.resize(fe.platform,window,3.7,1.7),this.getImageSrc=function(ue){return this.useRecs?ge.formatUrl(ue.images[0].url+"?$XL$&wid=200&fit=constrain"):ge.formatUrl(ue.imageUrl+"?$XL$&wid=200&fit=constrain")},this.getColourWayId=function(ue){for(var he=0;he<ue.images.length;he++)if(!0===ue.images[he].isPrimary&&ue.images[he].colourWayId)return ue.images[he].colourWayId},this.getProductLink=function(ue,he){var pe=ge.getProductUrl(ue.name,ue.brandName,ue.id),me="?CTAref=We+Recommend+Carousel_"+(he+1)+"&featureref1=we+recommend";return this.useRecs&&(me+="+pers"),pe+me}.bind(this),this.getPriceText=function(ue){return ue.current.text},this.getDiscountedPriceText=function(ue){return this.isPriceDiscounted(ue)?ue.isOutletPrice?this.state.resources.pdp_price_rrp+ue.rrp.text:ue.previous.text:""},this.discountText=function(he){var pe=ue.observable(""),me=he.isOutletPrice?he.rrp.value:he.previous.value;return xe.getDiscountText(pe,he.current.value,me),pe},this.isPriceDiscounted=function(ue){return ue.isMarkedDown||ue.isOutletPrice},this.formatTitle=function(ue){var he=ue;return he.length>50&&(he=he.substring(0,48),he+="..."),he},this.getAuthorizationHeader=function(){return ye.getIdentity().then((function(ue){return ue.customer.customerGuid().then((function(ue){return"Bearer "+(ue||"null")}),(function(){return"Bearer null"}))}))},this.getRecommendations=function(ue,he){return this.ajax.execute({url:ue,apiName:"Presentation",callerContext:"YMAL",storeParams:{store:fe.storeCode,country:fe.countryCode,currency:fe.currency,lang:fe.language,sizeSchema:fe.sizeSchema,keyStoreDataversion:fe.keyStoreDataversion},authorization:he,successCallback:this.bindCarouselResponse.bind(this)})},this.update=function(ue){return this.getAuthorizationHeader().then(this.getRecommendations.bind(this,ue),this.getRecommendations.bind(this,ue)).then(this.bindCarouselResponse.bind(this))},this.bindCarouselResponse=function(ue){this.carousel.setData(ue.recommendations),this.state.submodulesCompleted.recommendations(this.carousel.items().length>0?this.state.CAROUSEL_LOADING_STATE.HAS_DATA:this.state.CAROUSEL_LOADING_STATE.NO_DATA)},we.on("updateMightLike",function(ue,he){this.carousel.items([]),this.update(he+"&ctx_productids="+pe.id)}.bind(this)),we.on("setMightLikeData",function(ue,he){this.useRecs=!0,this.bindCarouselResponse(he.recData)}.bind(this))},template:pe}})),define("text!Components/buy-the-look/buy-the-look.html",[],(function(){return'<section data-bind="visible: isVisible" class="buy-the-look">\n    <div class="layout-width">\n        <div class="layout-module">\n            <h2 class="btl-title" data-bind="text: state.resources.pdp_carousel_buy_the_look_title"></h2>\n            <div class="carousel">\n                <div class="row">\n                    <div class="arrows">\n                        <a class="arrow left-arrow" data-bind="click:carousel.moveLeft, css: {active : carousel.hasPreviousPanel }, visible: carousel.hasOtherPanels"><span></span></a>\n                    </div>\n                    <div class="window" data-bind="swipe">\n                        <ul data-bind="foreach: {data: carousel.visibleItems, afterRender: renderedHandler}, style: { height: uniformHeight, width: carousel.width(), marginLeft:carousel.slidePosition()},css: { suppressSlide : !carousel.animate() }, afterRender: postRender ">\n                            <li data-bind="style: { width: $parent.carousel.itemWidth() }, css : { \'out-of-stock\' : !isInStock, \'in-stock\' : isInStock}">\n                                <div class="item card-container">\n                                    <div class="card" data-bind="css : { \'flipped\' : state.showAddToBagError() }">\n                                        <div class="front">\n                                            <div class="btl-product-details">\n                                                <a data-bind="attr: { href: $parent.getProductLink(product, $index()) }">\n                                                    <div class="product-image" data-bind=\'component: {\n                                                        name: "product-image",\n                                                        params: {\n                                                            imgUrl: imgUrl,\n                                                            state: state,\n                                                            productId: product.id,\n                                                            context: "buythelook",\n                                                            productData: { name: product.name }\n                                                        }\n                                                    }\'></div>\n                                                    <div class="product-title" data-bind="text:$parent.formatTitle(product.name)"></div>\n                                                </a>\n                                            </div>\n                                            <div class="btl-options">\n                                                <div class="product-price" data-bind=\'component: { name: "product-price", params: {state: state, hideDeliveryLink: true, showGermanVatMessage: showGermanVatMessage}}\'></div>\n                                                <div class="separator"></div>\n                                                <div data-bind=\'component:{\n                                        name: "product-colour",\n                                        params: {\n                                            hideLabels: true,\n                                            useShortSelectColourLabel: true,\n                                            state: state,\n                                            data: product,\n                                            context: "btl",\n                                            selectorIndex: $index()}\n                                        }\'></div>\n\n                                                <div class="separator"></div>\n                                                <div data-bind=\'component:{\n                                        name: "product-size",\n                                        params: {\n                                            hideLabels: true,\n                                            hideLowInStock: true,\n                                            state: state,\n                                            data: product,\n                                            context: "btl",\n                                            selectorIndex: $index()}\n                                        }\'></div>\n                                                \x3c!-- ko if: isInStock --\x3e\n                                                <div class="add-status">\n                                                    <div data-component-id="add-item" data-bind=\'component: { name: "add-item",\n                                             params:{\n                                                 productId: product.id,\n                                                 showTryAgain: false,\n                                                 productImage : product.images[0].url,\n                                                 state: state,\n                                                 initiator : "buyTheLook"\n                                             }}\'></div>\n                                                </div>\n                                                \x3c!-- /ko --\x3e\n                                                <div class="out-of-stock-button" data-bind="visible: !isInStock">\n                                                    <span data-bind="text: state.resources.pdp_carousel_buy_the_look_out_of_stock"></span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div class="back">\n                                            <div class="btl-product-details">\n                                                <a data-bind="attr: { href: $parent.getProductLink(product, $index()) }">\n                                                    <img class="product-image" data-bind="attr: { src: imgUrl }" alt="" />\n                                                </a>\n                                            </div>\n                                            <div class="add-failed">\n                                                <div class="add-to-bag-error" data-bind="html: state.addToBagErrorMessage"></div>\n                                                <div class="retry-add">\n                                                    <a class="failed" data-bind="click: $parent.tryAgain($index())">\n                                                        <span data-bind="text: state.resources.pdp_status_error_add_item_try_again"></span>\n                                                    </a>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </li>\n                        </ul>\n                    </div>\n                    <div class="arrows">\n                        <a class="arrow right-arrow" data-bind="click:carousel.moveRight, css: {active : carousel.hasNextPanel }, visible: carousel.hasOtherPanels"><span></span></a>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <ul class="nav" data-bind="foreach: carousel.panels, visible: carousel.hasOtherPanels">\n            <li data-bind="click: $parent.carousel.currentPanel.bind($data)">\n                <a data-bind="css:{active:$parent.carousel.currentPanel() == $data}" href="#"></a>\n            </li>\n        </ul>\n    </div>\n</section>\n'})),define("ProductUtils/BuyTheLook",["ProductUtils/Ajax","ProductUtils/UrlUtils","Product.Config","PageConfig"],(function(ue,he,pe,me){return function(){this.productArray=[],this.callbacks=[],this.ajax=new ue;var fe=new he;this.getBuyTheLook=function(ue,he){this.ajax.execute({storeParams:{store:me.storeCode,currency:me.currency,lang:me.language,sizeSchema:me.sizeSchema,keyStoreDataversion:me.keyStoreDataversion},url:pe.buyTheLookApiUrl+ue,apiName:"Product Catalogue",callerContext:"BuyTheLook",successCallback:this.success.bind(this),retryCount:5,callbackArgs:{callback:he}})},this.success=function(ue,he){var pe=ue.products;pe.sort((function(ue,he){return ue.order-he.order}));for(var me=0;me<pe.length;me++){var ge=pe[me].product;ge.sizeGuide=fe.formatUrl(ge.sizeGuide);for(var ve=0;ve<ge.images.length;ve++)ge.images[ve].url=fe.formatUrl(ge.images[ve].url);for(var be=0;be<ge.variants.length;be++){var ye=ge.variants[be];ye.size=ye.brandSize,ye.variantId=ye.id,ye.sizeDescription&&(ye.size+=" - "+ye.sizeDescription)}}he.callback(pe)}}})),define("Components/buy-the-look/buy-the-look",["ko","text!./buy-the-look.html","Models/CarouselControl","Models/VariantDecorator","PageConfig","$","ProductUtils/BuyTheLook","ProductUtils/UrlUtils"],(function(ue,he,pe,me,fe,ge,ve,be){return{viewModel:function c(he){this.state=he.state,this.product=he.data,this.carousel=new pe,this.buyTheLook=new ve,this.render=he.render,this.uniformHeight=ue.observable(),this.expectedCarouselLength=ue.observable(0),this.renderedCount=ue.observable(0),this.urlUtils=new be,this.adjustCarouselHeight=function(){var ue=ge(".buy-the-look .item"),he=[];ue.each((function(ue){var pe=ge(this).find(".btl-product-details").outerHeight(),me=ge(this).find(".btl-options").outerHeight()+pe+20;he.push(ue),he[ue]=me}));var pe=Math.max.apply(Math,he);this.uniformHeight(pe+"px")}.bind(this),this.renderedHandler=function(){this.renderedCount(this.renderedCount()+1),this.expectedCarouselLength()>0&&this.renderedCount()===this.carousel.visibleItems().length&&setTimeout(this.adjustCarouselHeight,1)}.bind(this),this.carousel.events.on("resize",function(){this.adjustCarouselHeight()}.bind(this)),this.isVisible=ue.computed(function(){return null!==ue.utils.arrayFirst(this.carousel.items(),(function(ue){return ue.isInStock}))}.bind(this)),this.formatTitle=function(ue){var he=ue;return he.length>32&&(he=he.substring(0,29),he+="..."),he},this.getProductLink=function(ue,he){return this.urlUtils.getProductUrl(ue.name,ue.brandName,ue.id)+("?CTAref=Complete+the+Look+Carousel_"+(he+1)+"&featureref1=complete+the+look")},this.tryAgain=function(ue){this.carousel.items()[ue].state.showAddToBagError(!1)},this.product.buyTheLookId?this.buyTheLook.getBuyTheLook(this.product.buyTheLookId,function(pe){if(pe){var ge=[];this.expectedCarouselLength(pe.length);for(var ve=0;ve<pe.length;ve++){var be=pe[ve].product,ye=be.variants.filter((function(ue){return ue.isInStock})).length>0,Se={state:{productData:(new me).getData(be,!ye),selectedColour:ue.observable(),selectedSize:ue.observable(),showNoColourSelectedWarning:ue.observable(!1),showNoSizeSelectedWarning:ue.observable(!1),showAddToBagError:ue.observable(!1),addToBagErrorMessage:ue.observable(""),resources:he.state.resources},product:be,showGermanVatMessage:he.showGermanVatMessage},xe=be.images.filter((function(ue){return!0===ue.isPrimary?ue.url:""}));Se.isInStock=ye,Se.imgUrl=xe.length>0?xe[0].url:be.images[0].url,Se.imgUrl=Se.imgUrl+"?$L$&wid=190&fit=constrain",ge.push(Se)}ge.sort((function(ue,he){return ue.isInStock===he.isInStock?0:ue.isInStock?-1:1})),pe.length>0&&(this.carousel.itemsInView(4),this.carousel.setData(ge.slice(0,6)),this.carousel.resize(fe.platform,window,3.7,1.7)),this.state.submodulesCompleted.buyTheLook(this.isVisible()?this.state.CAROUSEL_LOADING_STATE.HAS_DATA:this.state.CAROUSEL_LOADING_STATE.NO_DATA)}else this.state.submodulesCompleted.buyTheLook(this.state.CAROUSEL_LOADING_STATE.NO_DATA)}.bind(this)):this.state.submodulesCompleted.buyTheLook(this.state.CAROUSEL_LOADING_STATE.NO_DATA)},template:he}})),define("text!Components/product-gallery/product-gallery.html",[],(function(){return'\x3c!-- ko if: !isMobile--\x3e\n    <div class="gallery-aside-wrapper">\n        <p id="thumbnailsDescription" data-bind="text: state.resources.pdp_media_gallery_thumbnail_instruction"></p>\n        <ul class="thumbnails" data-bind="attr: { \'aria-label\': galleryText.thumbnailLabel }" aria-describedby="thumbnailsDescription">\n            \x3c!-- ko foreach: galleryItems--\x3e\n            \x3c!-- ko if: $index() > 0  --\x3e\n            <li class="image-thumbnail" data-bind="css: { active: $parent.thumbIndex() === $index() }, attr: { \'aria-current\': $parent.thumbIndex() === $index() }">\n                <button data-bind="click: $parent.selectThumbnail.bind($data, $index())">\n                    \x3c!-- ko if: $index() === 1 --\x3e\n                    <img data-bind="attr: { src: $parent.colourOptionImage().url + \'?$S$&wid=40&fit=constrain\', alt: $parent.getThumbnailAlt($index())}"/>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: $index() > 1 --\x3e\n                    <img data-bind="attr: { src: url + \'?$S$&wid=40&fit=constrain\', alt: $parent.getThumbnailAlt($index())}" />\n                    \x3c!-- /ko --\x3e\n                </button>\n            </li>\n            \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </ul>\n\n        \x3c!-- ko if : showInteractiveButtons --\x3e\n        <div class="interactives">\n            \x3c!-- ko if : isSmallViewport --\x3e\n            <button class="zeekit-back" data-bind="click: closeZeekitCarouselIframe, visible: zeekitCarouselIframeVisible, attr: { \'aria-label\': state.resources.zeekit_back_button }">\n                <span class="interactive-icon product-returns"></span>\n                <span class="interactive-text" data-bind="text: state.resources.zeekit_back_button"></span>\n            </button>\n            \x3c!-- /ko --\x3e\n            <div class="zeekit-container" data-bind="visible: isZeekitEnabled">\n                <div class="zeekit-onboarding-wrapper" data-bind="visible: zeekitOnboardingMessage">\n                    <p class="onboarding-text" id="zeekit-models-description" data-bind="text: state.resources.zeekit_button_hint"></p>\n                    <button class="onboarding-close" data-bind="click: closeOnboardingMessage, attr: { \'aria-label\': state.resources.pdp_misc_close }">\n                        <div class="product-closesmall"></div>\n                    </button>\n                </div>\n                <button id="zeekit-models-button" class="zeekit" aria-describedby="zeekit-model-description" data-bind="click: openZeekitModelsIframe, visible: isZeekitEnabled, attr: { \'aria-current\': zeekitCarouselIframeVisible, \'aria-pressed\': zeekitCarouselIframeVisible, \'aria-label\': zeekitButtonText() }">\n                    <span class="zeekit-promo-dot" data-bind="visible: zeekitOnboardingVisible"></span>\n                    <span class="interactive-icon product-zeekit-models"></span>\n                    <span class="interactive-text" data-bind="css: { \'active\': zeekitCarouselIframeVisible }, text: zeekitButtonText()"></span>\n                </button>\n                <p class="aria-description" aria-hidden="true" id="zeekit-model-description" data-bind="text: zeekitAriaDescription()"></p>\n            </div>\n            <button class="catwalk" data-bind="visible: isVideoButtonVisible(), click: onVideoButtonActivated, attr: { \'aria-current\': isVideoVisible, \'aria-label\': state.resources.pdp_media_video_player_label }">\n                <span class="interactive-icon product-play" data-bind="css: { \'product-play-filled\': isVideoVisible }"></span>\n                <span class="interactive-text" data-bind="text: state.resources.pdp_misc_video, css: { \'active\': isVideoVisible }"></span>\n            </button>\n            <button class="spinset" data-bind="visible: isSpinViewerButtonVisible(), click: onSpinViewerButtonActivated, attr: { \'aria-current\': isSpinViewerVisible, \'aria-pressed\': isSpinViewerPressed, \'aria-label\': state.resources.pdp_media_spinset_label }">\n                \x3c!-- ko if: !isMobile --\x3e\n                <span class="interactive-icon product-360" data-bind="css: { \'product-360-selected\': isSpinViewerVisible }"></span>\n                <span class="interactive-text" data-bind="css: { \'active\': isSpinViewerVisible }, text: state.resources[\'pdp_misc_spinset\']"></span>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: isMobile --\x3e\n                <span class="interactive-icon product-360" data-bind="css: { \'product-returns\': isSpinViewerVisible }"></span>\n                <span class="interactive-text" data-bind="css: { \'active\': isSpinViewerVisible }, text: spinViewerLabelText"></span>\n                \x3c!-- /ko --\x3e\n            </button>\n        </div>\n        \x3c!--/ko --\x3e\n\n        \x3c!-- ko if : product && isInStock --\x3e\n            <div class="social-share social-share-gallery" id="social-share" data-bind=\'component: { name: "social-share", params: { state: state, data: product } }\'></div>\n        \x3c!-- /ko --\x3e\n    </div>\n\x3c!-- /ko --\x3e\n\n<div class="product-carousel" tabindex="-1" id="product-gallery" data-bind="attr: { \'aria-label\': galleryText.carouselLabel }">\n    <div class="window" data-bind="swipe">\n        <div class="selling-fast" data-bind="visible: showSellingFastLabel">\n            <span class="selling-fast__label" data-bind="text: state.resources.pdp_misc_selling_fast"></span>\n        </div>\n        <div class="gallery-images" data-bind="foreach: galleryItems, css: { animate : animate() }, style: { width : galleryWidth, marginLeft : galleryPosition }">\n            <div class="image-container" data-bind="style: { width : $parent.itemWidth}, css: { \'zoomable\': $parent.imageData(), \'hide-image\': $parent.thumbIndex() !== $index() }, attr: { \'data-gallery-index\': $index, \'aria-hidden\': $parent.thumbIndex() !== $index() }">\n                <div class="asos-media spinset imageviewer" data-bind=\'component: { name: "asos-spin-viewer-prod", params: { scene7: $parent.playerParams.scene7, viewer: { showCloseButton: false, zoomFactors: $parent.zoomFactors, baseJpgQlt: 80, zoomJpgQlt: 90, handleLoadingErrors: false, showHint: false }, api: $parent.imageViewerApis()[$index()], messages: $parent.playerParams.messages } }, visible: $parent.imageViewersVisibility()[$index()]\'></div>\n                \x3c!-- ko if: $index() === 1 --\x3e\n                <img class="gallery-image" data-bind="attr: { src: $parent.colourOptionImage().url + \'?$XXL$&wid=513&fit=constrain\', alt: $parent.getImageAlt($index()) }, event: { onload: window.asos.performance.markAndMeasure(\'pdp:gallery_image_\'+$index()+\'_displayed\')}" />\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: $index() !== 1 --\x3e\n                <img class="gallery-image" data-bind="attr: { src: url + \'?$XXL$&wid=513&fit=constrain\', alt: $parent.getImageAlt($index()) }, event: { onload: window.asos.performance.markAndMeasure(\'pdp:gallery_image_\'+$index()+\'_displayed\')}" />\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        <button class="arrow-button arrow-button-right" aria-controls="product-gallery" data-bind="click:moveRight, markAndMeasure: \'pdp:gallery_swiping_right_interactive\', attr: { \'aria-label\': state.resources.pdp_media_gallery_carousel_next }">\n            <div class="product-chevron-right-large"></div>\n        </button>\n        <button class="arrow-button arrow-button-left" aria-controls="product-gallery" data-bind="click:moveLeft, markAndMeasure: \'pdp:gallery_swiping_left_interactive\', attr: { \'aria-label\': state.resources.pdp_media_gallery_carousel_previous }">\n            <div class="product-chevron-left-large"></div>\n        </button>\n        \x3c!-- ko if: isMobile--\x3e\n        <div class="carousel-bullets">\n            <ul id="mobile-gallery-bullets" data-bind="foreach: galleryItems, attr: { \'aria-label\': selectImageAlt }">\n                \x3c!-- ko if: $index() > 0 --\x3e\n                <li data-bind="css: { active: $parent.thumbIndex() === $index() }">\n                    <button aria-describedby="mobile-gallery-bullets" data-bind="click: $parent.selectThumbnail.bind($data, $index()), attr: { \'aria-current\': ($parent.thumbIndex() === $index()).toString() }"></button>\n                </li>\n                \x3c!-- /ko --\x3e\n            </ul>\n        </div>\n        \x3c!-- /ko --\x3e\n    </div>\n    <div class="asos-media catwalk" style="display: none" data-bind=\'component: { name: "asos-video-player-prod", params: { scene7: playerParams.scene7, player: { startInFullScreen: startVideoInFullScreen, closeOnFullScreenExited: closeVideoOnFullScreenExited, initialLoopCount: 2 }, api: videoPlayerApi, messages: playerParams.messages } }, visible: isVideoVisible\'></div>\n    <div class="asos-media spinset spinviewer" style="display: none" data-bind=\'component: { name: "asos-spin-viewer-prod", params: { scene7: playerParams.scene7, viewer: { spinSpeed: spinSpeed, showCloseButton: showSpinViewerCloseButton, zoomFactors: zoomFactors, reverseVerticalDirection: false, reverseHorizontalDirection: false, baseJpgQlt: 80, zoomJpgQlt: 90, showHint: showSpinViewerContainerHint, useInitialAnimation: true, animationIntervalStart: 100, animationIntervalPeak: 100, animationFramesCount: 5, preloadingTimeout: 30000 }, api: spinViewerApi, messages: playerParams.messages } }, visible: isSpinViewerVisible, css: { "zoomable": isSpinViewerLoadedWithoutErrors }\'></div>\n    <div class="asos-media" data-bind=\'style: { visibility: zeekitCarouselIframeVisible() ? "" : "hidden" }\'>\n        \x3c!-- ko if : isZeekitEnabled --\x3e\n        <iframe id="zeekit-carousel-iframe" frameborder="0" seamless="seamless" data-bind="attr: { src: zeekitCarouselUrl }"></iframe>\n        \x3c!-- /ko --\x3e\n    </div>\n</div>\n\n\x3c!-- ko if: isMobile--\x3e\n    <div class="gallery-aside-wrapper">\n    \x3c!-- ko if : showInteractiveButtons --\x3e\n        <div class="interactives">\n        \x3c!-- ko if : isSmallViewport --\x3e\n        <button class="zeekit-back" data-bind="click: closeZeekitCarouselIframe, visible: zeekitCarouselIframeVisible, attr: { \'aria-label\': state.resources.zeekit_back_button }">\n            <span class="interactive-icon product-returns"></span>\n            <span class="interactive-text" data-bind="text: state.resources.zeekit_back_button"></span>\n        </button>\n        \x3c!-- /ko --\x3e\n        <div class="zeekit-container" data-bind="visible: isZeekitEnabled">\n            <div class="zeekit-onboarding-wrapper" data-bind="visible: zeekitOnboardingMessage">\n                <p class="onboarding-text" id="zeekit-models-description" data-bind="text: state.resources.zeekit_button_hint"></p>\n                <button class="onboarding-close" data-bind="click: closeOnboardingMessage, attr: { \'aria-label\': state.resources.pdp_misc_close }">\n                    <div class="product-closesmall"></div>\n                </button>\n            </div>\n            <button id="zeekit-models-button" class="zeekit" aria-describedby="zeekit-model-description" data-bind="click: openZeekitModelsIframe, visible: isZeekitEnabled, attr: { \'aria-current\': zeekitCarouselIframeVisible, \'aria-pressed\': zeekitCarouselIframeVisible, \'aria-label\': zeekitButtonText() }">\n                <span class="zeekit-promo-dot" data-bind="visible: zeekitOnboardingVisible"></span>\n                <span class="interactive-icon product-zeekit-models"></span>\n                <span class="interactive-text" data-bind="css: { \'active\': zeekitCarouselIframeVisible }, text: zeekitButtonText()"></span>\n            </button>\n            <p class="aria-description" aria-hidden="true" id="zeekit-model-description" data-bind="text: zeekitAriaDescription()"></p>\n        </div>\n        <button class="catwalk" data-bind="visible: isVideoButtonVisible(), click: onVideoButtonActivated, attr: { \'aria-current\': isVideoVisible, \'aria-label\': state.resources.pdp_media_video_player_label }">\n            <span class="interactive-icon product-play" data-bind="css: { \'product-play-filled\': isVideoVisible }"></span>\n            <span class="interactive-text" data-bind="text: state.resources.pdp_misc_video, css: { \'active\': isVideoVisible }"></span>\n        </button>\n        <button class="spinset" data-bind="visible: isSpinViewerButtonVisible(), click: onSpinViewerButtonActivated, attr: { \'aria-current\': isSpinViewerVisible, \'aria-pressed\': isSpinViewerPressed, \'aria-label\': state.resources.pdp_media_spinset_label }">\n            \x3c!-- ko if: !isMobile --\x3e\n            <span class="interactive-icon product-360" data-bind="css: { \'product-360-selected\': isSpinViewerVisible }"></span>\n            <span class="interactive-text" data-bind="css: { \'active\': isSpinViewerVisible }, text: state.resources[\'pdp_misc_spinset\']"></span>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: isMobile --\x3e\n            <span class="interactive-icon product-360" data-bind="css: { \'product-returns\': isSpinViewerVisible }"></span>\n            <span class="interactive-text" data-bind="css: { \'active\': isSpinViewerVisible }, text: spinViewerLabelText"></span>\n            \x3c!-- /ko --\x3e\n        </button>\n    </div>\n    \x3c!--/ko --\x3e\n\n    \x3c!-- ko if : product && isInStock --\x3e\n        <div class="social-share social-share-gallery" id="social-share" data-bind=\'component: { name: "social-share", params: { state: state, data: product } }\'></div>\n    \x3c!-- /ko --\x3e\n</div>\n\x3c!-- /ko --\x3e\n\n<div class="zeekit-models-modal" data-bind="component: { name: \'side-modal\', params: { showModal: zeekitModelsIframeVisible, data: { zeekitIframe: zeekitModelsUrl, zeekitModelsIframeInitialised: zeekitModelsIframeInitialised } } }">\n    \x3c!-- ko if : zeekitModelsIframeInitialised --\x3e\n    <iframe id="zeekit-models-iframe" frameborder="0" seamless="seamless" data-bind="attr: { src: zeekitIframe }"></iframe>\n    \x3c!-- /ko --\x3e\n</div>\n'})),define("ProductUtils/Zeekit",["Promise","PageConfig","ProductUtils/NewRelicLogger","ProductUtils/Window"],(function(ue,he,pe,me){function s(ue,he,pe){ue&&he&&pe({displayUrl:ue,modelsUrl:he})}function r(ue){return!(ue&&["uk","us"].indexOf(ue.toLowerCase())>-1)}function o(){return Boolean(he.zeekitQaMode)||me.location.href.toLowerCase().indexOf("zeekitqamode=true")>-1}var fe,ge,ve=!1;return function(me,be,ye,Se){return new ue((function(ue){if(ve)s(fe,ge,ue);else{ve=!0;var xe=document.createElement("script");xe.setAttribute("id","zeekit-script"),xe.type="text/javascript",xe.src=he.zeekitClientScript,xe.onload=function(){try{window.Zeekit.init({asosProductCode:me,lang:he.language,sizeSchema:he.sizeSchema,metrics:r(he.sizeSchema),debugMode:!1,qaMode:o(),onModelsUrl:function(he){s(fe,ge=he,ue)},onDisplayUrl:function(he){s(fe=he,ge,ue)},closeModelsFrame:be,modelsSelected:ye,frameReady:Se})}catch(ue){pe.logError(new Error(pe.ERROR_TYPE.ParseError),{action:"ZeekitInit",message:"Zeekit failed to initialise"})}},document.head.appendChild(xe)}}))}})),define("ProductUtils/Browser",["ko","ProductUtils/Window"],(function(ue,he){function i(){ve(ge.large.matches?fe:ge.medium.matches?me:pe)}var pe="SMALL_VIEWPORT",me="MEDIUM_VIEWPORT",fe="LARGE_VIEWPORT",ge={medium:he.matchMedia("(min-width: 720px)"),large:he.matchMedia("(min-width: 1024px)")},ve=ue.observable();return ge.medium.addListener(i),ge.large.addListener(i),i(),{isOnline:function n(){return!he.navigator||he.navigator.onLine},viewportSize:ve,isUpToViewport:function s(he){return ue.computed((function(){var ue=!1;switch(he){case pe:ue=ve()===pe;break;case me:ue=[pe,me].indexOf(ve())>-1;break;case fe:ue=[pe,me,fe].indexOf(ve())>-1}return ue}))},viewports:{SMALL_VIEWPORT:pe,MEDIUM_VIEWPORT:me,LARGE_VIEWPORT:fe}}})),define("Components/product-gallery/product-gallery",["ko","$","text!./product-gallery.html","Models/CarouselControl","PageConfig","hammer","Asos.Utils.MediaPlayers","ProductUtils/Analytics","ProductUtils/UrlUtils","ProductUtils/Zeekit","ProductUtils/Browser","Providers/SdkProvider"],(function(ue,he,pe,me,fe,ge,ve,be,ye,Se,xe,we){return{viewModel:function h(he){function n(){pe.errorBanner.message(pe.resources.zeekit_no_internet_copy),pe.errorBanner.displayError(!0)}function h(){pe.errorBanner.message(""),pe.errorBanner.displayError(!1)}var pe=he.state;this.product=he.data.product;var me=he.data.images;this.defaultProductId=he.data.defaultProductId,this.galleryItems=ue.observableArray(),this.galleryWidth=ue.observable(),this.itemWidth=ue.observable(),this.itemWidthValue=ue.observable(),this.galleryPosition=ue.observable(),this.galleryIndex=ue.observable(0),this.animate=ue.observable(!1),this.thumbIndex=ue.observable(0),this.isInStock=ue.observable(!1),this.isMobile="mobile"===fe.platform,this.isSmallViewport=xe.isUpToViewport(xe.viewports.SMALL_VIEWPORT);var ke=new ye,_e={imageChanged:!1,thumbnailClick:!1,imageViewerZoomIn:!1,spinViewerInit:!1,spinViewerSpin:!1,spinViewerZoomIn:!1,videoPlayerInit:!1,videoProgress:{50:!1,100:!1}};this.checkIfInStockAndSetFlag=function(){this.isInStock(!pe.productData||pe.productData.isInStock)},this.getVisibleImages=function(he){var pe=he.filter((function(ue){return!0===ue.isVisible}));if(!pe[0].colourWayId||null===pe[0].colourWayId){var me=ue.utils.arrayFirst(he,(function(ue){return ue.isPrimary}));if(me||(me=ue.utils.arrayFirst(he,(function(ue){return ue.colourWayId&&null!==ue.colourWayId}))),me){var fe=pe.indexOf(me);fe>=0&&pe.splice(fe,1),pe.splice(0,0,me)}}return pe};var Ie,Ce=this.getVisibleImages(me);this.getThumbnailAlt=function(ue){return pe.resources.pdp_media_gallery_thumbnail_count.replace("%{index}",ue).replace("%{total}",Ce.length-1)}.bind(this),this.getImageAlt=function(ue){return(this.product?this.product.name:he.data.productName)+", "+pe.resources.pdp_misc_count.replace("%{index}",ue).replace("%{total}",Ce.length-1)}.bind(this),this.selectImageAlt=pe.resources.pdp_media_gallery_select_image,pe.mainImage=this.colourOptionImage=ue.observable(Ce[0]),this.init=function(){this.galleryItems(this.shuffleLastImage(Ce)),this.galleryWidth(this.getGalleryWidth()),this.itemWidth(this.getItemWidth()),this.setSwipe(),this.setImageViewers(),this.setGalleryPosition(1),this.defaultProductId>0?this.trySetProductImage(this.defaultProductId):pe.selectedColour()&&pe.selectedColour().colourWayId!==this.colourOptionImage().colourWayId&&this.trySetColour(pe.selectedColour().colourWayId)},this.setGalleryPosition=function(ue){this.galleryIndex(ue),0===ue?this.thumbIndex(this.galleryItems().length-1):this.thumbIndex(ue),this.galleryPosition("-"+100*Math.abs(this.galleryIndex())+"%")},this.getItemWidth=function(){return 100/this.galleryItems().length+"%"},this.getGalleryWidth=function(){return 100*this.galleryItems().length+"%"},this.shuffleLastImage=function(ue){var he=ue,pe=ue[ue.length-1];return he.unshift(pe),he},this.moveLeft=function(){return this.resetImageViewer(),0===this.galleryIndex()?(this.animate(!1),this.setGalleryPosition(this.galleryItems().length-1),setTimeout(function(){this.animate(!0),this.setGalleryPosition(this.galleryItems().length-2),_e.imageChanged||(be.firePageInteraction({context:"chevronClick",productIID:he.data.id}),_e.imageChanged=!0)}.bind(this),10),!1):(this.animate(!0),this.setGalleryPosition(this.galleryIndex()-1),_e.imageChanged||(be.firePageInteraction({context:"chevronClick",productIID:he.data.id}),_e.imageChanged=!0),!1)},this.moveRight=function(){return this.resetImageViewer(),this.galleryIndex()===this.galleryItems().length-1?(this.animate(!1),this.setGalleryPosition(0),setTimeout(function(){this.animate(!0),this.setGalleryPosition(1),_e.imageChanged||(be.firePageInteraction({context:"chevronClick",productIID:he.data.id}),_e.imageChanged=!0)}.bind(this),10),!1):(this.animate(!0),this.setGalleryPosition(this.galleryIndex()+1),_e.imageChanged||(be.firePageInteraction({context:"chevronClick",productIID:he.data.id}),_e.imageChanged=!0),!1)},this.selectThumbnail=function(ue,pe){this.exitVideo(),this.exitSpinViewer(),this.closeZeekitCarouselIframe(),this.resetImageViewer(),this.animate(!1),this.setGalleryPosition(ue),!0===pe||_e.thumbnailClick||(be.firePageInteraction({context:"thumbnailClick",productIID:he.data.id}),_e.thumbnailClick=!0)}.bind(this),this.trySetColour=function(ue){var he=function i(ue){for(var he=-1,pe=0;pe<me.length;pe++)if(me[pe].colourWayId===ue){he=pe;break}return he}(ue);if(-1!==he){this.colourOptionImage(me[he]),this.exitVideo(),this.exitSpinViewer(),this.setGalleryPosition(1),this.imageViewersVisibility()[1]&&this.initImageViewer(1)}},this.trySetProductImage=function(ue){for(var he=1,pe=0;pe<me.length;pe++)if(me[pe].productId===ue){he=pe+1;break}this.setGalleryPosition(he)},pe.selectedColour.subscribe(function(ue){null==ue?(this.colourOptionImage(me[0]),this.initImageViewer(1)):ue.colourWayId&&this.trySetColour(ue.colourWayId)}.bind(this)),this.videoPlayerApi=ue.observable(),this.exitVideo=function(){if(this.isVideoVisible(!1),this.videoPlayerApi()&&this.videoPlayerApi().stop)try{this.videoPlayerApi().stop()}catch(ue){console.warn("could not stop video: "+ue)}},this.keydownEventListener=function(){var ue;document.addEventListener("keydown",(ue=function(he){("Escape"===he.key||27===he.keyCode)&&(this.exitVideo(),document.removeEventListener("keydown",ue))}).bind(this))},this.keydownEventListener(),document.body.addEventListener("modalClosed",function(){this.exitVideo()}.bind(this)),this.startVideoInFullScreen=this.isMobile,this.closeVideoOnFullScreenExited=this.isMobile,this.canDisplayVideoButton=ue.observable(!1),this.isVideoVisible=ue.observable(!1),this.playerParams=he.data.playerParams,this.isVideoButtonVisible=ue.computed(function(){return!(!this.canDisplayVideoButton()||!this.isInStock())&&!(this.isSmallViewport()&&this.zeekitCarouselIframeVisible())}.bind(this)),this.playerParams.messages={errorHeaderText:pe.resources.pdp_media_video_player_error_header,errorMessageText:pe.resources.pdp_media_video_player_error_message,spinsetErrorMessageText:pe.resources.pdp_media_spinset_error_message,refreshButtonText:pe.resources.pdp_media_video_player_refresh_button,unsupportedHeaderText:pe.resources.pdp_media_video_player_unsupported_header,unsupportedMessageText:pe.resources.pdp_media_video_player_unsupported_message,closeButtonText:pe.resources.pdp_media_video_player_close_button,hintDragText:pe.resources.pdp_media_spinset_hint_drag,hintTapText:pe.resources.pdp_media_spinset_hint_tap,zoomHint:pe.resources.pdp_media_gallery_zoom_hint,zoomOneHundred:pe.resources.pdp_media_gallery_zoom_one_hundred,zoomTwoHundred:pe.resources.pdp_media_gallery_zoom_two_hundred,zoomFourHundred:pe.resources.pdp_media_gallery_zoom_four_hundred},this.onVideoButtonActivated=function(){_e.videoFirstPlaybackCompleted=!1,this.isVideoVisible()||(this.resetImageViewer(),this.isVideoVisible(!0),this.exitSpinViewer(),this.closeZeekitCarouselIframe(),this.videoPlayerApi().start(Ie),_e.videoPlayerInit||(be.firePageInteraction({context:"video",productIID:he.data.id,videoEvent:"start"}),_e.videoPlayerInit=!0))},this.videoPlayerApi.subscribe(function(ue){ue.events.on("playerExitRequested allLoopsEnded",function(){this.exitVideo()}.bind(this)),ue.events.on("progress",(function(ue,pe){if(pe.detail.value)for(var me in _e.videoProgress){var fe=parseInt(me,10);!_e.videoProgress[me]&&pe.detail.value>=fe&&(_e.videoProgress[me]=!0,be.firePageInteraction({context:"video",productIID:he.data.id,videoEvent:me}))}}));var pe={formats:["m3u8","mp4","ogg"],preferredFPS:this.isMobile?25:50,preferredBitrates:{720:1200}};he.data.useProductIdForVideos?ue.loadAssets(he.data.id,pe,function(){this.canDisplayVideoButton(!0),this.checkIfInStockAndSetFlag()}.bind(this)):he.data.media&&he.data.media.catwalkUrl&&ve.getVideoPlayerAssetsProvider(he.data.playerParams.scene7.videoServer).getAssets(ke.formatUrl(he.data.media.catwalkUrl),pe).then(function(ue){Ie=ue,this.canDisplayVideoButton(!0),this.checkIfInStockAndSetFlag()}.bind(this))}.bind(this)),this.spinViewerApi=ue.observable(),this.exitSpinViewer=function(){this.spinViewerApi()&&this.spinViewerApi().zoomReset(),this.isSpinViewerVisible(!1)},this.spinSpeed=this.isMobile?1.5:3,this.showSpinViewerCloseButton=this.isMobile,this.showSpinViewerContainerHint=!this.isMobile,this.zoomFactors=[.5,1],this.isSpinViewerButtonVisible=ue.observable(!1),this.isSpinViewerVisible=ue.observable(!1),this.isSpinViewerPressed=ue.computed(function(){return this.isMobile?this.isSpinViewerVisible().toString():void 0}.bind(this)),this.isSpinViewerLoadedWithoutErrors=ue.observable(!1),this.spinViewerLabelText=ue.observable(pe.resources.pdp_misc_spinset),this.onSpinViewerButtonActivated=function(){this.spinViewerLabelText(pe.resources.pdp_misc_gallery),this.isSpinViewerVisible()?this.isMobile&&(this.spinViewerLabelText(pe.resources.pdp_misc_spinset),this.exitSpinViewer()):(this.resetImageViewer(),this.exitVideo(),this.closeZeekitCarouselIframe(),this.isSpinViewerVisible(!0),this.spinViewerApi().init(),_e.spinViewerInit||(be.firePageInteraction({context:"360Launch",productIID:he.data.id}),_e.spinViewerInit=!0))},this.spinViewerApi.subscribe(function(ue){ue.events.on("zoomedIn",(function(){_e.spinViewerZoomIn||(be.firePageInteraction({context:"360Zoom",productIID:he.data.id}),_e.spinViewerZoomIn=!0)})),ue.events.on("allImagesLoaded",function(ue,he){he&&this.isSpinViewerLoadedWithoutErrors(he)}.bind(this));var me=he.data.id;ue.loadAssets(me,function(){this.isSpinViewerButtonVisible(!pe.productData||pe.productData.isInStock)}.bind(this))}.bind(this)),this.zeekitModelsUrl=ue.observable(),this.zeekitCarouselUrl=ue.observable(),this.isZeekitEnabled=ue.observable(!1),this.zeekitModelsIframeInitialised=ue.observable(!1),this.zeekitModelsIframeVisible=ue.observable(!1),this.zeekitCarouselIframeVisible=ue.observable(!1),this.zeekitPreSelectedModels=ue.observable(!1),this.zeekitOnboardingVisible=ue.observable(!1),this.zeekitOnboardingMessage=ue.observable(!1);var Pe="asos-pdp-zeekit-hasBeenViewed",Te="asos-pdp-zeekit-onboardingDismissed";this.zeekitButtonText=ue.computed(function(){return this.zeekitCarouselIframeVisible()?pe.resources.zeekit_button_editmode:pe.resources.zeekit_button}.bind(this)),this.zeekitAriaDescription=ue.computed(function(){return this.zeekitCarouselIframeVisible()?pe.resources.zeekit_button_editmode_accessibility:pe.resources.zeekit_button_accessibility}.bind(this)),this.openZeekitModelsIframe=function(){return xe.isOnline()?(h(),this.zeekitOnboardingVisible(!1),this.closeOnboardingMessage(),window.localStorage.setItem(Pe,"true"),!this.zeekitCarouselIframeVisible()&&this.zeekitPreSelectedModels()?(this.openZeekitCarouselIframe(),void this.zeekitModelsIframeInitialised(!0)):(this.exitVideo(),this.zeekitModelsIframeInitialised(!0),this.zeekitModelsIframeVisible(!0),setTimeout((function(){document.getElementById("zeekit-models-iframe").focus()}),100),void be.firePageInteraction({context:"zeekitOpened"}))):void n()}.bind(this),this.closeZeekitModelsIframe=function(){this.zeekitModelsIframeVisible(!1),setTimeout((function(){document.getElementById("zeekit-models-button").focus()}),100),h()}.bind(this),this.zeekitModelsIframeVisible.subscribe((function(ue){ue||(h(),document.getElementById("zeekit-models-iframe").contentWindow.postMessage("zeekit-modelsClosed","*"))})),this.openZeekitCarouselIframe=function(){return xe.isOnline()?(h(),this.zeekitModelsIframeVisible(!1),this.zeekitCarouselIframeVisible(!0),this.zeekitPreSelectedModels(!0),this.exitVideo(),this.exitSpinViewer(),document.getElementById("zeekit-carousel-iframe").contentWindow.postMessage("Zeekit-displayFrameOpen","*"),void setTimeout((function(){document.getElementById("zeekit-carousel-iframe").focus()}),100)):void n()}.bind(this),this.closeZeekitCarouselIframe=function(){this.zeekitCarouselIframeVisible(!1)}.bind(this),this.closeOnboardingMessage=function(){this.zeekitOnboardingMessage(!1),window.localStorage.setItem(Te,"true")}.bind(this),this.zeekitFrameReady=function(ue){ue>0?this.zeekitPreSelectedModels(!0):this.zeekitModelsIframeInitialised(!0)}.bind(this),this.product&&this.product.zeekit&&this.product.zeekit.enabled&&(we.getFeatures().then(function(ue){ue.ifActive("emf-64-web-zeekit-v2",!0).then(function(ue){ue&&ue.isActive&&Se(this.product.productCode,this.closeZeekitModelsIframe,this.openZeekitCarouselIframe,this.zeekitFrameReady).then(function(ue){this.isZeekitEnabled(!0),this.zeekitModelsUrl(ue.modelsUrl),this.zeekitCarouselUrl(ue.displayUrl)}.bind(this))}.bind(this))}.bind(this)),"true"!==window.localStorage.getItem(Pe)&&this.zeekitOnboardingVisible(!0),"true"!==window.localStorage.getItem(Te)&&this.zeekitOnboardingMessage(!0)),this.imageData=ue.observable(),this.imageViewerApis=ue.observableArray([]),this.imageViewersVisibility=ue.observableArray([]),this.areAllImageViewerApisReady=function(){for(var ue=0;ue<this.imageViewerApis().length;ue++)if(!this.imageViewerApis()[ue]())return!1;return!0},this.initImageViewer=function(ue){var pe=this.imageViewersVisibility(),me=this.imageData(),fe=this.imageViewerApis()[ue](),ge=he.data.rootElement.querySelector('.image-container[data-gallery-index="'+ue+'"] img.gallery-image');if(ge.complete){if(ge.complete&&fe&&me){pe[ue]=!0,this.imageViewersVisibility(pe);var ve=ge.cloneNode();ve.style.visibility="visible",fe.setAssets(me[this.getImageIndexFromGalleryIndex(ue)]),fe.init(null,ve),ge.style.visibility="hidden"}}else ge.onload=this.initImageViewer.bind(this,ue)},this.loadImagesMetadata=function(ue){ve.getSpinViewerAssetsProvider(he.data.playerParams.scene7.imageServer).getAssets(ue,function(ue){this.imageData(ue),this.checkIfInStockAndSetFlag()}.bind(this))},this.imageData.subscribe(function(ue){if(ue)for(var he=0;he<this.imageViewerApis().length;he++)this.initImageViewer(he)}.bind(this)),this.onImageViewerApiReady=function(ue){var pe=he.data.rootElement.querySelector('[data-gallery-index="'+ue+'"]');this.imageData()&&this.initImageViewer(ue,pe)},this.getImageIndexFromGalleryIndex=function(he){var pe=1===he?this.colourOptionImage():this.galleryItems()[he],fe=ue.utils.arrayFirst(me,(function(ue){return ue.url===pe.url}));return me.indexOf(fe)},this.setImageViewers=function(){for(var he,pe=this.galleryItems(),fe=[],ge=0;ge<me.length;ge++)fe.push(me[ge].url);for(ge=0;ge<pe.length;ge++)he=ue.observable(),this.imageViewerApis.push(he),this.imageViewersVisibility.push(!1),he.subscribe(this.onImageViewerApiReady.bind(this,ge));this.loadImagesMetadata(fe)},this.resetImageViewer=function(){var ue=this.imageViewerApis()[this.galleryIndex()]&&this.imageViewerApis()[this.galleryIndex()]();ue&&ue.zoomReset()},this.setSwipe=function(){if(window.addEventListener){var ue=document.querySelector(".product-gallery .window"),he=new ge(ue,{inputClass:ge.TouchInput});he.on("swipeleft",function(){this.moveRight()}.bind(this)),he.on("swiperight",function(){this.moveLeft()}.bind(this))}},this.showSellingFastLabel=ue.computed(function(){var ue=!this.isVideoVisible()&&!this.isSpinViewerVisible();return this.isInStock()&&he.state.sellingFast&&ue}.bind(this)),this.galleryText={thumbnailLabel:pe.resources.pdp_media_gallery_thumbnail_label,carouselLabel:pe.resources.pdp_media_gallery_carousel_label},this.showInteractiveButtons=ue.computed(function(){return!!this.isInStock&&(this.zeekitCarouselIframeVisible()||this.isZeekitEnabled()||this.isVideoButtonVisible()||this.isSpinViewerButtonVisible())}.bind(this)),this.init()},template:pe}})),define("text!Components/product-colour/product-colour.html",[],(function(){return'\x3c!-- ko if: render --\x3e\n<section>\n    <div class="colour-size colour-component">\n        <div class="grid-row colour-section">\n            <label for="colourSelect" class="disabled" data-bind="text: colourLabel, visible: !hideLabels"></label>\n            <span class="product-colour" data-bind="visible: colourLabelVisible(), text: selectedColourLabel(), css: { disabled: isDisabled }"></span>\n            <div class="colour-size-select" data-bind="visible: colourDropdownVisible()">\n                <select id="colourSelect"\n                        data-id="colourSelect"\n                        data-bind="optionsCaption: selectColourText,\n                        disable: isDisabled,\n                        options: data,\n                        optionsAfterRender: setColourOptionText,\n                        value: colour,\n                        css:{ required : noColourSelected()},\n                        attr: {\n                            \'id\': colourSelectorId,\n                            \'aria-describedby\': noColourSelected() ? \'selectColourError\' : null,\n                            \'aria-invalid\': noColourSelected() ? true : null\n                        }"></select>\n                \x3c!-- ko if: noColourSelected() --\x3e\n                <span id="selectColourError" class="error basic-error-box" data-bind="text:selectColourPrompt"></span>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </div>\n</section>\n\x3c!-- /ko --\x3e'})),define("Components/product-colour/product-colour",["ko","text!./product-colour.html","PageConfig"],(function(ue,he,pe){return{viewModel:function n(he){var me=he.state,fe="undefined"!==he.hideOnOutOfStock&&he.hideOnOutOfStock;this.render=!(fe&&!me.productData.isInStock),this.noColourSelected=he.state.showNoColourSelectedWarning,this.data=ue.observableArray(),this.colour=me.selectedColour,this.hideLabels=he.hideLabels,this.useShortSelectColourLabel=he.useShortSelectColourLabel,this.selectColourPrompt=me.resources.pdp_select_colour_message,this.colourLabel=me.resources.pdp_misc_colour+":",this.isMobile="mobile"===pe.platform,this.notAvailableText=me.resources.pdp_status_not_available,this.selectorIndex=he.selectorIndex,this.context=he.context,this.colourSelectorId=this.context+"-colour-select-"+this.selectorIndex,this.useShortSelectColourLabel?this.selectColourText=me.resources.pdp_select_colour_label:this.selectColourText=me.resources.pdp_select_colour_from_label,this.lowInStockText=me.resources.pdp_status_low_in_stock;var ge=he.state.productData;this.isDisabled=!he.state.productData.isInStock;var ve=ge.colours;this.noColourSelected.subscribe(function(ue){ue&&document.getElementById(this.colourSelectorId).focus()}.bind(this)),this.data(ve),this.selectColourText=this.selectColourText.replace("%{count}",this.data().length),this.colourDropdownVisible=ue.computed(function(){return this.data().length>1}.bind(this)),this.colourLabelVisible=ue.computed(function(){return!this.colourDropdownVisible()}.bind(this)),this.setColourOptionText=function(ue,he){he&&(ge.hasDifferentPrices?ue.text=he.colour+" "+he.price.text:ue.text=he.colour)},this.selectedColourLabel=ue.computed(function(){return this.colour()?this.colour().colour:""}.bind(this)),this.setDefaultColour=function(){1===this.data().length&&this.colour(this.data()[0])},this.setDefaultColour(),this.setVariantColour=function(ue,he){for(var pe=0;pe<ue.length;pe++)if(ue[pe].colourWayId===he){this.colour(ue[pe]);break}},he.state.defaultVariant&&this.setVariantColour(this.data(),he.state.defaultVariant.colourWayId)},template:he}})),define("text!Components/product-size/product-size.html",[],(function(){return'\x3c!-- ko if: render --\x3e\n<section>\n    <div class="colour-size size-component">\n        <div class="size-section" data-bind="visible: sizeSectionVisible()">\n            <div style="display: table; width: 100%">\n                <label for="sizeSelect" style="display: table-cell; vertical-align: bottom" data-bind="text: sizeLabel, visible: !hideLabels, disable: isDisabled"></label>\n                <div style="display: table-cell; vertical-align: top; width: 100%">\n                    \x3c!-- ko if: isOneSize --\x3e\n                    <span class="product-size" data-bind="visible: sizeLabelVisible(), text: selectedSizeLabel(), css: { disabled: isDisabled }"></span>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: !showFitAnalyticsSection() --\x3e\n                    <div id="size-guide" class="size-guide" style="float: right;" data-bind=\'component: { name: "size-guide", params: {dictionary: sizeGuideDictionary , url: sizeGuideLink, visible: state.showSizeGuide, id:id}}\'></div>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko if: showFitAnalyticsSection() --\x3e\n                    <div class="fit-analytics upper" style="line-height: 1.57; letter-spacing: 0.4px;" data-bind="style: { float: fitAnalyticsViewModel.recommendation() === fitAnalyticsViewModel.RecommendationType.None ? \'right\' : \'none\' }">\n                        <div class="table">\n                            <div class="cell" data-bind="click: fitAnalyticsOpen, visible: fitAnalyticsViewModel.recommendation() === fitAnalyticsViewModel.RecommendationType.None">\n                                <div class="circle" style="float: left">\n                                    <span class="no-recommendation"></span>\n                                </div>\n                            </div>\n                            <div class="cell">\n                                <a id="fit-link-upper" href="" data-bind="click: fitAnalyticsOpen, text: fitAnalyticsLinkText"></a>\n                            </div>\n                        </div>\n                    </div>\n                    \x3c!-- /ko --\x3e\n                </div>\n            </div>\n            \x3c!-- ko if: !isOneSize --\x3e\n            <span class="product-size" data-bind="visible: sizeLabelVisible(), text: selectedSizeLabel(), css: { disabled: isDisabled }"></span>\n            \x3c!-- /ko --\x3e\n            <div class="colour-size-select" data-bind="visible: sizeDropdownVisible(), markAndMeasure: \'pdp:size_selector_interactive\'">\n                <select\n                        data-id="sizeSelect"\n                        data-bind="options: variants,\n                            optionsAfterRender: disableSizeIfOutOfStock,\n                            optionsText: \'Size\',\n                            optionsCaption: selectSizeText,\n                            value: size,\n                            disable: isDisabled || sizeDropdownDisabled(),\n                            css:{ required : noSizeSelected() && !isDesktopMixMatch},\n                            attr: {\n                                \'id\': sizeSelectorId,\n                                \'aria-describedby\': noSizeSelected() ? isDesktopMixMatch ? \'selectSizesError\' : \'selectSizeError\' : null,\n                                \'aria-invalid\': noSizeSelected() && !isDesktopMixMatch ? true : null\n                            }"></select>\n                \x3c!-- ko if: noSizeSelected() && !isDesktopMixMatch --\x3e\n                <span id="selectSizeError" class="error basic-error-box" data-bind="text:selectSizePrompt"></span>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n        <div class="grid-row low-in-stock" data-bind="visible: isLowInStock() && !hideLowInStock">\n            <span class="clock"></span><span data-bind="text:lowInStockText"></span>\n        </div>\n    </div>\n</section>\n\x3c!-- /ko --\x3e\n'})),define("Components/product-size/product-size",["ko","text!./product-size.html"],(function(ue,he){return{viewModel:function i(he){var pe=he.data,me=he.state,fe="undefined"!==he.hideOnOutOfStock&&he.hideOnOutOfStock;this.state=me,this.render=!(fe&&!me.productData.isInStock),this.noSizeSelected=he.state.showNoSizeSelectedWarning,this.sizeGuideDictionary=he.state.resources,this.sizeGuideLink=pe.sizeGuide,this.colour=me.selectedColour,this.size=me.selectedSize,this.alwaysDisplaySizeLabel=!1,this.isLowInStock=ue.observable(!1),this.hideLabels=he.hideLabels,this.hideLowInStock=he.hideLowInStock,this.displayOnlyAsDropDown=he.displayOnlyAsDropDown||!1,this.doNotSelectDefaultSize=he.doNotSelectDefaultSize||this.displayOnlyAsDropDown,this.id=pe.id,this.isOneSize=pe.isOneSize,this.size.subscribe(function(){var ue=void 0!==this.size()&&!0===this.size().isLowInStock;this.isLowInStock(ue)}.bind(this)),this.isDesktopMixMatch=he.isMixMatch&&!he.isMobile,this.selectorIndex=he.selectorIndex,this.context=he.context,this.sizeSelectorId=this.context+"-size-select-"+this.selectorIndex,this.variants=ue.computed(function(){return void 0===this.colour()?[]:this.colour().variants}.bind(this)),me.showSizeGuide||(me.showSizeGuide=ue.observable(!1)),me.showSizeGuide(!0===he.showSizeGuide&&pe.sizeGuideVisible),this.selectSizePrompt=me.resources.pdp_select_colour_size_message,this.sizeLabel=me.resources.pdp_misc_size+":",this.outOfStockText=me.resources.pdp_status_out_of_stock,this.notAvailableText=me.resources.pdp_status_not_available,this.selectSizeText=me.resources.pdp_select_size_label,this.lowInStockText=me.resources.pdp_status_low_in_stock;var ge=he.state.productData;this.isDisabled=!he.state.productData.isInStock;for(var ve=ge.colours,be=0,ye=ve.length-1;ye>=0;ye--){var Se=ve[ye];Se.variants.length>be&&(be=Se.variants.length)}this.noSizeSelected.subscribe(function(ue){var he=document.getElementById(this.sizeSelectorId);ue&&he.focus()}.bind(this)),!this.displayOnlyAsDropDown&&!pe.isNoSize&&ve.length>1&&1===be&&(this.alwaysDisplaySizeLabel=!0),this.colour.subscribe(function(ue){void 0===ue||1!==this.colour().variants.length||this.displayOnlyAsDropDown?this.setDefaultSize():this.size(this.colour().variants[0])}.bind(this)),this.sizeDropdownVisible=ue.computed(function(){if(this.alwaysDisplaySizeLabel)return!1;if(this.displayOnlyAsDropDown)return!0;if(pe.isNoSize)return!1;var ue=void 0===this.colour(),he=ue?0:this.colour().variants.length;return ue||he>1}.bind(this)),this.sizeLabelVisible=ue.computed(function(){return!!this.alwaysDisplaySizeLabel||!this.displayOnlyAsDropDown&&!pe.isNoSize&&!this.sizeDropdownVisible()}.bind(this)),this.sizeSectionVisible=ue.computed(function(){return this.sizeLabelVisible()||this.sizeDropdownVisible()}.bind(this)),this.disableSizeIfOutOfStock=function(he,pe){null!=pe&&(he.text=pe.isInStock?pe.size:pe.size+" - "+this.notAvailableText,ue.applyBindingsToNode(he,{enable:pe.isInStock},pe))}.bind(this),this.sizeDropdownDisabled=ue.computed(function(){return void 0===this.colour()}.bind(this)),this.selectedSizeLabel=ue.computed(function(){return this.alwaysDisplaySizeLabel?ve[0].variants[0].size:this.size()?this.size().size:""}.bind(this)),this.setDefaultSize=function(){if(!this.doNotSelectDefaultSize&&void 0!==ge&&void 0!==this.variants()&&1===ge.colours.length){for(var ue,he=ge.colours[0],pe=he.variants.length-1;pe>=0;pe--)if(he.variants[pe].isInStock){if(void 0!==ue){ue=void 0;break}ue=this.variants()[pe]}void 0!==ue&&this.size(ue)}},this.setVariantSize=function(ue,he){for(var pe=0;pe<ue.length;pe++)if(ue[pe].variantId===he){if(!ue[pe].isInStock){this.size(void 0);break}this.size(ue[pe]);break}},he.useFitAnalytics&&he.state.fitAnalyticsViewModel()?this.fitAnalyticsViewModel=he.state.fitAnalyticsViewModel():this.fitAnalyticsViewModel={isLoaded:ue.observable(!1)},this.showFitAnalyticsSection=ue.computed(function(){return!(!this.fitAnalyticsViewModel.isLoaded()||!this.fitAnalyticsViewModel.recommendation)&&void 0!==this.fitAnalyticsViewModel.recommendation()}.bind(this)),this.getFitAnalyticsText=function(){if(this.fitAnalyticsViewModel.recommendation){var ue;switch(this.fitAnalyticsViewModel.recommendation()){case this.fitAnalyticsViewModel.RecommendationType.Partial:ue=me.resources.pdp_fit_analytics_recommendation_profile_partial;break;case this.fitAnalyticsViewModel.RecommendationType.Complete:ue=me.resources.pdp_fit_analytics_recommendation_profile_complete;break;case this.fitAnalyticsViewModel.RecommendationType.OOS:ue=me.resources.pdp_fit_analytics_recommendation_oos;break;default:ue=me.resources.pdp_fit_analytics_recommendation_profile_none}if(ue)return ue.replace("%{size}",this.fitAnalyticsViewModel.recommendedSize())}},this.fitAnalyticsLinkText=ue.computed(function(){return this.getFitAnalyticsText()}.bind(this)),this.fitAnalyticsOpen=function(ue,he){this.fitAnalyticsViewModel.openRecommendations&&this.fitAnalyticsViewModel.openRecommendations(ue,he)}.bind(this),this.setDefaultSize(),he.state.defaultVariant&&this.setVariantSize(this.variants(),he.state.defaultVariant.variantId)},template:he}})),define("text!Components/product-ratings/product-ratings.html",[],(function(){return'\x3c!-- ko if : shouldRender --\x3e\n  \x3c!-- ko if : ratings.displayRatingsSection --\x3e\n  <button\n    data-bind=\'template: { name: "star-rating-template" }, attr: { "aria-label": averageOverallRatingAriaLabel }, click: handleClick\'\n    class="star-rating-button">\n  </button>\n  \x3c!-- /ko --\x3e\n  \x3c!-- ko ifnot : ratings.displayRatingsSection --\x3e\n  <div \n    data-bind=\'template: { name: "star-rating-template" }, attr: { "aria-label": averageOverallRatingAriaLabel }\'\n    class="star-rating-button arrow-cursor">\n  </div>\n  \x3c!-- /ko --\x3e\n  <script type="text/html" id="star-rating-template">\n    <div class="star-rating"\n        aria-hidden="true"\n        data-bind=\'attr: { "data-rating": ratings.averageOverallStarRating }\'>\n        <span class="star-rating__item"></span>\n        <span class="star-rating__item"></span>\n        <span class="star-rating__item"></span>\n        <span class="star-rating__item"></span>\n        <span class="star-rating__item"></span>\n      </div>\n      <div class="numeric-rating"\n        data-bind="text: getAverageRating()"\n        aria-hidden="true"\n      ></div>\n      <div class="total-reviews"\n        data-bind="text: getReviewCount()"\n        aria-hidden="true"\n      ></div>\n  <\/script>\n\x3c!-- /ko --\x3e'})),define("Components/product-ratings/product-ratings",["ko","text!./product-ratings.html","Providers/SdkProvider","ProductUtils/Window","PageConfig"],(function(ue,he,pe,me,fe){return{viewModel:function r(he){var ge=me.Intl.NumberFormat;this.ratings=he.state.ratings,this.isClientEnabled=ue.observable(!1),this.ratings.averageOverallRating&&(this.averageOverallRatingAriaLabel=(he.state.resources.pdp_ratings_reviews_accessibility_overall_rating_and_count+(this.ratings.displayRatingsSection?" "+he.state.resources.pdp_misc_details_link:"")).replace("%{averageOverallRating}",this.ratings.averageOverallRating.toString()).replace("%{totalReviewCount}",this.ratings.totalReviewCount.toString()));var ve=he.state.features.ratings,be=he.state.productData.isInStock;this.shouldRender=ue.pureComputed((function(){return ve&&this.isClientEnabled()&&be&&"number"==typeof this.ratings.totalReviewCount&&this.ratings.totalReviewCount>0}),this),pe.getFeatures().then(function(ue){ue.ifActive("emf-163-web-ratings-reviews-pdp-value-test",!0).then(function(ue){ue&&"v2-ratings-enabled"===ue.variant&&this.isClientEnabled(!0)}.bind(this))}.bind(this)),this.getReviewCount=function(){return"("+new ge(fe.language).format(this.ratings.totalReviewCount)+")"}.bind(this),this.getAverageRating=function(){return new ge(fe.language,{minimumFractionDigits:1}).format(this.ratings.averageOverallRating)}.bind(this),this.handleClick=function(ue,he){var pe="scrollBehavior"in me.document.documentElement.style,fe=me.document.getElementById("reviewTitle"),ge=fe.getBoundingClientRect().top;ge+=me.pageYOffset,he.preventDefault(),pe?me.scrollTo({top:ge,behavior:"smooth"}):me.scrollTo(0,ge),setTimeout((function(){fe.focus()}),500)}},template:he}})),define("text!Components/delivery-and-returns/delivery-and-returns.html",[],(function(){return'\x3c!-- ko if : !hideDeliveryLink--\x3e\n<button class="link product-delivery" data-bind="click: deliveryAndReturnsClicked"><span class="product-delivery-text" data-bind="text: deliveryReturnsLink"></span></button>\n\x3c!-- /ko --\x3e\n'})),define("ProductUtils/SpinnerLoader",[],(function(){return function(ue){this.loader=null,ue&&ue.selector?this.loader=document.querySelector(ue.selector):this.loader=document.querySelector(".loader"),this.show=function(){null!==this.loader&&(this.loader.style.display="block")},this.hide=function(){null!==this.loader&&(this.loader.style.display="none")}}})),define("ProductUtils/ModalWindow",["ko","PageConfig","ProductUtils/ComponentLoader","ProductUtils/SpinnerLoader"],(function(ue,he,pe,me){return function(){this.components=new pe,this.body=document.body,this.html=document.querySelector("html"),this.container=document.querySelector("#modal"),this.titleText=ue.observable(""),this.lockBodyScroll=!0,this.title=this.container.querySelector(".modal-title h1"),this.content=this.container.querySelector(".modal-content"),this.closeArrow=this.container.querySelector(".modal-close"),this.modalScroll=this.container.querySelector(".modal-scroll"),this.modalWindow=this.container.querySelector(".modal-window"),this.modalCloseButton=this.container.querySelector(".modal-window .modal-close button.link"),this.customClasses=[],this.config=he;var fe="mobile"===this.config.platform?".loader.mobile":".loader.fullwidth";this.loader=new me({selector:fe}),this.componentName=null,this.hasLoaded=!1,this.open=function(ue){ue.showSpinner&&!this.hasLoaded&&this.loader.show(),this.setup(ue),this.bindClose(),this.modalCloseButton.focus()},this.close=function(){this.tearDown()}.bind(this),this.setClass=function(ue){this.customClasses.push(ue),this.container.classList.add(ue)},this.setAriaLabel=function(ue){void 0!==ue?this.modalWindow.setAttribute("aria-label",ue):this.modalWindow.removeAttribute("aria-label")},this.setTitle=function(ue){this.titleText(ue),this.title.innerHTML=ue},this.addContent=function(ue){this.content.innerHTML=ue,this.modalScroll.style.display=""},this.componentLoaded=function(){this.hasLoaded=!0,this.loader.hide()},this.addComponent=function(ue,he,pe){this.componentName=ue;var me="modal-"+this.componentName,fe='<div id="'+me+'"></div>';this.addContent(fe),he.loadedCallback=this.componentLoaded.bind(this),this.components.register({type:this.componentName,name:this.componentName,elementId:me,useComponentTemplate:!0},he,pe)},this.setup=function(ue){this.body.classList.add("lockScroll"),this.html.classList.add("lockScroll"),this.setClass("open"),this.params=ue},this.tearDown=function(){this.components.unregister(this.componentName),this.setTitle(""),this.setAriaLabel(),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.trapFocus),this.title.removeEventListener("click",this.stopEventPropagation),this.content.removeEventListener("click",this.stopEventPropagation),this.closeArrow.removeEventListener("click",this.onArrowClick),this.container.removeEventListener("click",this.close),this.content.style.height="";for(var ue=0;ue<this.customClasses.length;ue++)this.container.classList.remove(this.customClasses[ue]);this.body.classList.remove("lockScroll"),this.html.classList.remove("lockScroll");var he=document.createEvent("CustomEvent");he.initCustomEvent("modalClosed",!1,!1,{}),this.body.dispatchEvent(he),this.params&&this.params.openerElement&&this.params.openerElement.focus()},this.checkEscapeKey=function(ue){return 27===ue.keyCode},this.onKeyUp=function(ue){this.checkEscapeKey(ue)&&this.close()}.bind(this),this.stopEventPropagation=function(ue){ue.stopPropagation()},this.onArrowClick=function(ue){this.close(),ue.preventDefault(),ue.stopPropagation()}.bind(this),this.trapFocus=function(ue){var he=this.container.querySelectorAll('a[href], button, input[type="text"]'),pe=he[0],me=he[he.length-1];("Tab"===ue.key||9===ue.keyCode)&&(ue.shiftKey?document.activeElement===pe&&(me.focus(),ue.preventDefault()):document.activeElement===me&&(pe.focus(),ue.preventDefault()))}.bind(this),this.bindClose=function(){document.addEventListener("keyup",this.onKeyUp),this.title.addEventListener("click",this.stopEventPropagation),this.content.addEventListener("click",this.stopEventPropagation),this.closeArrow.addEventListener("click",this.onArrowClick),this.container.addEventListener("click",this.close),document.addEventListener("keydown",this.trapFocus)}}})),define("Models/LocalStorageWrapper",[],(function(){return function(){var ue=window.localStorage;return this.isStorageAvailable=function(){try{var ue=window.localStorage,he="__storage_test__";return ue.setItem(he,he),ue.removeItem(he),!0}catch(ue){return!1}},this.addItem=function(he,pe,me){this.isStorageAvailable()&&ue.setItem(he,JSON.stringify({item:pe,expiry:me}))},this.getItem=function(he){if(this.isStorageAvailable()){var pe=ue.getItem(he);if(pe){var me=JSON.parse(pe);return new Date(me.expiry)<new Date?void ue.removeItem(he):me.item}}},this}})),define("Components/delivery-and-returns/delivery-and-returns",["ko","text!./delivery-and-returns.html","ProductUtils/Ajax","Product.Config","PageConfig","ProductUtils/ModalWindow","ProductUtils/Analytics","Models/LocalStorageWrapper","Providers/SdkProvider"],(function(ue,he,pe,me,fe,ge,ve,be,ye){function l(he){this.state=he.state,this.isCssTagAdded=!1,this.resources=he.state.resources,this.features=he.state.features,this.deliveryReturnsLink=ue.observable(null),this.apiUrl=me.deliveryApiEndpoint,this.hideDeliveryLink=he.hideDeliveryLink,this.modalWindow=new ge,this.currentDeliveryAndReturnsData=null,this.isPremierUser=ue.observable(null),this.ajax=new pe;var Se=new be;ye.getFeatures().then(function(ue){var pe=ue.ifActive("all-qualifies-for-free-returns-feature")?"pdp_delivery_and_returns_free_returns_countries":"pdp_delivery_and_returns_paid_returns_countries";this.deliveryReturnsLink(he.state.resources[pe])}.bind(this)),this.getExpiryDate=function(){var ue=new Date;return ue.setSeconds(0),ue.setMilliseconds(0),ue.setDate(ue.getDate()+1),ue},this.getDeliveryAndReturnsCountryCode=function(){var ue=Se.getItem("DeliveryAndReturnsCountryCode");return ue||null}.bind(this),this.error=function(ue){var he="";if(ue.responseJSON&&Array.isArray(ue.responseJSON)){var pe=ue.responseJSON[0];pe.errorCode&&"DNR_"===pe.errorCode.substring(0,4)&&(he=pe.errorMessage)}he||(he=this.resources.pdp_status_error_technical_difficulties);var me={content:he};this.showModal("error-container",this.resources.pdp_delivery_and_returns_error_technical_difficulties_title,me)}.bind(this),this.setIsPremierUser=function(){var ue=function(ue){var he=ue.length>0&&ue.indexOf(fe.countryCode)>=0?"true":"false";this.isPremierUser(he)}.bind(this);return ye.getIdentity().then(function(he){return he.customer.subscriptions().then(ue,ue.bind(this,[]))}.bind(this))},this.setDeliveryAndReturnsContent=function(ue){var pe={content:ue.result,showCountrySelectionCallback:this.requestCountriesContent,closeModalCallback:this.modalWindow.close};this.currentDeliveryAndReturnsData=ue,this.showModal("delivery-and-returns-content",pe.content.title,pe,he.state.resources.pdp_delivery_and_returns_content_aria_label)}.bind(this),this.setCountriesContent=function(ue){var pe={content:ue.result.countries,currentDestination:this.currentDeliveryAndReturnsData.result.destination,countrySelectionCallback:this.newCountrySelected,cancelCallback:this.cancelCountrySelectionCallback};this.showModal("delivery-and-returns-countries",he.state.resources.pdp_delivery_and_returns_select_country_title,pe,he.state.resources.pdp_delivery_and_returns_select_country_aria_label)}.bind(this),this.showModal=function(ue,pe,me,fe){this.modalWindow.close(),this.modalWindow.addComponent(ue,me,he.state),this.modalWindow.setTitle(pe),this.modalWindow.setClass("modal-"+ue),this.modalWindow.setAriaLabel(fe),this.modalWindow.open({openerElement:document.querySelector("button.link.product-delivery")})}.bind(this),this.requestDeliveryAndReturnsContent=function(ue){var he="";ue&&(he="&deliverycountry="+ue);var pe={url:this.apiUrl+"?api=1"+he+"&userispremiercustomer="+this.isPremierUser(),callerContext:"DeliveryAndReturns.MainContent",successCallback:this.setDeliveryAndReturnsContent,errorCallback:this.error,apiName:"DeliveryAndReturns"};this.ajax.execute(pe)}.bind(this),this.requestCountriesContent=function(){var ue={url:this.apiUrl+this.DELIVERY_COUNTRIES_URL_PATH,callerContext:"DeliveryAndReturns.CountriesList",successCallback:this.setCountriesContent,errorCallback:this.error,apiName:"DeliveryAndReturns"};this.ajax.execute(ue)}.bind(this),this.addCssTag=function(){var ue=document.createElement("link");ue.setAttribute("rel","stylesheet"),ue.setAttribute("type","text/css"),ue.setAttribute("href",fe.flagsCssPath),document.querySelector("head").appendChild(ue),this.isCssTagAdded=!0},this.deliveryAndReturnsClicked=function(){this.isCssTagAdded||this.addCssTag();var ue=function(){var ue=void 0!==he.state.productData?he.state.productData.productId:null;ve.firePageInteraction({context:"freeDeliveryAndReturns",productIID:ue});var pe=this.getDeliveryAndReturnsCountryCode();this.requestDeliveryAndReturnsContent(pe)}.bind(this);this.setIsPremierUser().then(ue,ue)}.bind(this),this.cancelCountrySelectionCallback=function(){this.setDeliveryAndReturnsContent(this.currentDeliveryAndReturnsData)}.bind(this),this.newCountrySelected=function(ue){Se.addItem("DeliveryAndReturnsCountryCode",ue,this.getExpiryDate()),this.requestDeliveryAndReturnsContent(ue)}.bind(this)}return l.prototype.DELIVERY_COUNTRIES_URL_PATH="countries/?api=1",{viewModel:l,template:he}})),define("text!Components/shipping-restrictions/shipping-restrictions.html",[],(function(){return'<button class="link shipping-restrictions" data-bind="visible: showShippingRestrictions, click: openShippingRestrictions">\n    <span class="shipping-restrictions-text" data-bind="text: shippingRestrictionsLabel"></span>\n</button>'})),define("ProductUtils/FullProductApiClient",["ProductUtils/Ajax","Product.Config","ProductUtils/UrlUtils","PageConfig"],(function(ue,he,pe,me){return function(){this.productArray=[],this.callbacks=[],this.ajax=new ue;var fe=new pe,r=function(ue){return null!=ue};this.getFullProduct=function(ue,he,pe){return null!=ue?this.requestData(ue,he,pe):void 0},this.requestData=function(ue,pe,fe){var ge=he.fullProductUrl,ve=pe?"shippingrestrictions":void 0;return this.ajax.execute({storeParams:{store:me.storeCode,currency:me.currency,lang:me.language,sizeSchema:me.sizeSchema,keyStoreDataversion:me.keyStoreDataversion,expand:ve},url:ge+ue,apiName:"Product Catalogue",callerContext:fe,errorCallback:this.error}).done(this.productRetrieved.bind(this))}.bind(this),this.prependSiteDomain=function(ue){return ue.split('href="').join('href="'+me.siteDomain)}.bind(this),this.productRetrieved=function(ue){ue.description=this.prependSiteDomain(ue.description),ue.media.images=this.sortProductImages(ue.media.images),ue.media.catwalkUrl=this.getSingleCatwalkUrl(ue);for(var he=0;he<ue.media.images.length;he++){var pe=ue.media.images[he];pe.isVisible=pe.isPrimary||!r(pe.colourWayId),pe.url=fe.formatUrl(pe.url)}for(var me=0;me<ue.variants.length;me++)ue.variants[me].size=ue.variants[me].brandSize,ue.variants[me].sizeDescription&&(ue.variants[me].size+=" - "+ue.variants[me].sizeDescription);return ue}.bind(this),this.sortProductImages=function(ue){return ue.sort((function(ue,he){var pe=he.isPrimary.toLocaleString().localeCompare(ue.isPrimary.toLocaleString());if(0!==pe)return pe;if(void 0===ue.colour||""===ue.colour){if(void 0===he.colour||null===he.colour||""===he.colour)return ue.type.toLocaleString().localeCompare(he.type.toLocaleString());if(he.colour&&he.colour.length>0)return 1}return void 0===he.colour||null===he.colour||""===he.colour?-1:ue.colour.toLocaleString().localeCompare(he.colour.toLocaleString())})),ue}.bind(this),this.getSingleCatwalkUrl=function(ue){return ue&&ue.media&&ue.media.catwalk&&Array.isArray(ue.media.catwalk)&&ue.media.catwalk.length?ue.media.catwalk[0].url:void 0},this.error=function(){}.bind(this)}})),define("Components/shipping-restrictions/shipping-restrictions",["ko","Promise","text!./shipping-restrictions.html","ProductUtils/Ajax","ProductUtils/ModalWindow","ProductUtils/Analytics","ProductUtils/FullProductApiClient","PageConfig","Product.Config"],(function(ue,he,pe,me,fe,ge,ve,be,ye){return{viewModel:function l(pe){var Se=new ve;this.state=pe.state,this.isInStock=this.state.productData.isInStock,this.ajax=new me;var xe=pe.data.shippingRestrictions;this.modalWindow=new fe,this.showShippingRestrictions=ue.computed(function(){return this.isInStock&&xe.shippingRestrictionsVisible}.bind(this)),this.shippingRestrictionsLabel=xe.shippingRestrictionsLabel,this.getIncludedCountries=function(ue,he){return he.filter((function(he){return ue.includedCountryCodes.indexOf(he.code)>-1})).map((function(ue){return ue.name}))},this.openShippingRestrictions=function(){var ue=pe.data?pe.data.productId:null;ge.firePageInteraction({context:"shippingRestrictions",productIID:ue});var me=Se.getFullProduct(pe.data.productId,!0,"ShippingRestrictions"),fe=this.ajax.execute({storeParams:{lang:be.language,store:be.storeCode},url:ye.deliveryOptionsApiEndpoint,callerContext:"ShippingRestrictions"});return he.all([me,fe]).then(function(ue){var he=ue[0].shippingRestriction,pe=this.getIncludedCountries(he,ue[1].countries);this.showModalContent("shipping-restrictions-content",this.state.resources.pdp_shipping_restrictions_title,{ShippableCountries:pe,Description:this.state.resources.pdp_shipping_restrictions_only_ships_message})}.bind(this)).catch(function(){this.showModalContent("error-container",this.state.resources.pdp_shipping_restrictions_title,{content:this.state.resources.pdp_status_error_technical_difficulties})}.bind(this)),!1},this.showModalContent=function(ue,he,pe){this.modalWindow.close(),this.modalWindow.addComponent(ue,pe,this.state),this.modalWindow.setTitle(he),this.modalWindow.setClass("modal-"+ue),this.modalWindow.open({showSpinner:!1,openerElement:document.querySelector(".shipping-restrictions")})}},template:pe}})),define("text!Components/stock-price-retry/stock-price-retry.html",[],(function(){return'\x3c!-- ko if : state.showStockPriceRetry --\x3e\n<div class="container">\n    <h1 data-bind="text: resources.pdp_status_error_stock_price_retry_title"></h1>\n    <div data-bind="text: resources.pdp_status_error_stock_price_retry_message"></div>\n\n    <a>\n        <span data-bind="click: retry, text: resources.pdp_status_error_stock_price_retry_button"></span>\n    </a>\n</div>\n\n\x3c!-- /ko --\x3e'})),define("Components/stock-price-retry/stock-price-retry",["ko","text!./stock-price-retry.html"],(function(ue,he){return{viewModel:function i(ue){this.resources=ue.state.resources,this.retry=function(){ue.state.retryCallback()}},template:he}})),define("text!Components/save-button/save-button.html",[],(function(){return'<div class="save-button-wrapper" data-bind="click: componentClicked">\n    <button class="save-button" aria-live="polite" data-bind="\n        click:saveProduct,\n        clickBubble:false,\n        css: {\n            \'animate\' : isSaved,\n            \'active\': active,\n            \'out-of-stock-save-button\': !inStock\n        },\n        markAndMeasure: \'pdp:save_for_later_interactive\',\n        attr: {\n            \'aria-label\': isSaving ? saveForLaterActiveLabel() : saveForLaterLabel(),\n            \'disabled\' : isSaved\n        }\n    ">\n        <span class="heartPrimary"></span>\n        <span data-bind="attr: {class : heartSecondaryClasses}">\n            <span class="celebrationAnimation">\n                <span></span>\n                <span></span>\n                <span></span>\n                <span></span>\n                <span></span>\n                <span></span>\n                <span></span>\n            </span>\n        </span>\n    </button>\n    <span aria-live="polite" class="toolTip" data-bind="html:message,visible:displayMessage,css: { \'fade\' : fade , \'error\':isError , \'nonError\':!isError()}"></span>\n</div>'})),define("Models/SavedItem",[],(function(){return function(ue,he,pe,me,fe,ge){this.productId="",this.variantId="",this.sizeId="-1",this.imageUrl="",this.colour="",this.sellingFast=!1,this.init=function(){void 0!==ue&&this.setProductId(ue),void 0!==he&&this.setVariantId(he),void 0!==pe&&this.setSizeId(pe),void 0!==me&&this.setImageUrl(me),void 0!==fe&&this.setColour(fe),void 0!==ge&&this.setSellingFast(ge)},this.setProductId=function(ue){var he=parseInt(ue);he&&(this.productId=he)},this.setVariantId=function(ue){var he=parseInt(ue);he&&(this.variantId=he)},this.setSizeId=function(ue){var he=parseInt(ue);he&&(this.sizeId=he)},this.setImageUrl=function(ue){"string"==typeof ue&&(this.imageUrl=ue)},this.setColour=function(ue){"string"==typeof ue&&(this.colour=ue)},this.setSellingFast=function(ue){"boolean"==typeof ue&&(this.sellingFast=ue)},this.setValuesViaState=function(ue){ue&&(ue.selectedColour&&void 0!==ue.selectedColour()&&this.setColour(ue.selectedColour().colourName),ue.selectedSize&&void 0!==ue.selectedSize()&&(this.setVariantId(ue.selectedSize().variantId),this.setSizeId(ue.selectedSize().sizeId)),void 0!==ue.sellingFast&&this.setSellingFast(ue.sellingFast))},this.getObject=function(){return"-1"===this.sizeId&&this.setColour(""),{productId:this.productId,variantId:this.variantId,sizeId:this.sizeId,imageUrl:this.imageUrl,colour:this.colour,sellingFast:this.sellingFast}},this.init()}})),define("Components/save-button/save-button",["ko","text!./save-button.html","Models/SavedItem","PageConfig","ProductUtils/Analytics","ProductUtils/NewRelicLogger","Providers/SdkProvider"],(function(ue,he,pe,me,fe,ge,ve){return{viewModel:function a(he){function a(){return function i(){return!he.context}()||function n(){return"buythelook"===he.context}()}function c(ue,pe){he.state&&he.state.toast&&(pe&&he.state.toast.message(pe),he.state.toast.displayMessage(ue))}function l(){this.isSaved(!1),this.active(!1),this.displayMessage(!1),c(!1),clearTimeout(this.fadeTimer),clearTimeout(this.hideTimer)}function d(ue){ue&&(ue.selectedSize.subscribe(function(){l.call(this)}.bind(this)),ue.selectedColour.subscribe(function(){l.call(this)}.bind(this)))}function h(ue){return he.colourWayId?he.colourWayId:ue.selectedSize()&&ue.selectedSize().colourWayId?ue.selectedSize().colourWayId:ue.selectedColour()&&ue.selectedColour().colourWayId?ue.selectedColour().colourWayId:"function"==typeof ue.mainImage?ue.mainImage().colourWayId:ue.productData.colours?ue.productData.colours[0].colourWayId:void 0}function p(ue){return!!ue&&(ue.selectedSize()&&ue.selectedSize().variantId?ue.selectedSize().variantId:ue.selectedColour()&&ue.selectedColour().variantId?ue.selectedColour().variantId:void 0)}if(this.active=ue.observable(!1),this.fade=ue.observable(!0),this.displayMessage=ue.observable(!1),this.message=ue.observable(),this.isSaving=!1,this.isSaved=ue.observable(!1),this.heartSecondaryClasses=ue.observable("heartSecondary"),this.isError=ue.observable(!1),this.isMixMatch=!0===he.isMixMatch,this.hasSizeSelected=!1,this.fadeTimer=null,this.hideTimer=null,this.isMixMatch)for(var pe=0;pe<he.state.length;pe++)d.call(this,he.state[pe]);else d.call(this,he.state);this.saveForLaterLabel=function(){var ue="";he.state&&(ue=(this.isMixMatch?he.state[0].resources:he.state.resources).pdp_cta_save_for_later);return ue}.bind(this),this.saveForLaterActiveLabel=function(){var ue="";he.state&&(ue=(this.isMixMatch?he.state[0].resources:he.state.resources).pdp_cta_save_for_later_active,this.getProductName()&&(ue=ue+" "+this.getProductName()));return ue}.bind(this),this.getProductName=function(){return this.isMixMatch?he.productName:this.isMixMatch?void 0:he.productData.name}.bind(this),this.updateHeartSecondaryClassesForActiveCelebration=function(){ve.getFeatures().then(function(ue){var he=ue.getFeaturesState()["web-event-icon"];if("object"==typeof he){var pe=Object.keys(he);if(pe.length)for(var me=0;me<pe.length;me++){var fe=pe[me];if(he[fe]){this.heartSecondaryClasses(this.heartSecondaryClasses()+" "+fe);break}}}}.bind(this))}.bind(this),this.inStock=!0,this.isInStock=function(ue){return!a()||ue.length>0||ue.productData.isInStock},this.inStock=this.isInStock(he.state),this.saveProduct=function(){return this.active(!0),!(!this.inStock||this.isSaving||this.isSaved())&&void ve.getSavedItems().then(function(ue){var pe=function u(ue){return ue.map((function(ue){var pe={productId:he.productId?he.productId:ue.productData.productId};return a()&&p(ue)?pe.variantId=p(ue):h(ue)&&(pe.colourWayId=h(ue)),pe}))}(this.isMixMatch?he.state:[he.state]),me=ue.addItems({items:pe});fe.saveVariants(pe,he.state,he.context),this.watchPromise(me,pe)}.bind(this))}.bind(this),this.watchPromise=function(ue,pe){var me=((Array.isArray(he.state)?he.state[0]:he.state)||{}).resources||{};this.isSaving=!0,ue.then(function(){this.isSaved(!0),this.isSaving=!1}.bind(this),function(){ge.logError(new Error(ge.ERROR_TYPE.UserActionFailed),{action:"SaveForLater",additionalData:JSON.stringify(pe)}),this.active(!1),this.isSaving=!1,this.showMessage(me.pdp_status_error_not_saved,!0)}.bind(this))},this.componentClicked=function(){return this.displayMessage(!1),c(!1),!0}.bind(this),this.showMessage=function(ue,he){this.isError(he),this.message(ue),this.displayMessage(!0),c(!0,ue),this.fade(!1),this.isSaved(!1),this.runTimer()},this.runTimer=function(){this.fadeTimer=setTimeout(function(){this.fade(!0),this.hideTimer=setTimeout(function(){this.displayMessage(!1)}.bind(this),1e3)}.bind(this),4500)},this.updateHeartSecondaryClassesForActiveCelebration()},template:he}})),define("text!Components/add-item/add-item.html",[],(function(){return'<div class="add-item" data-bind="visible: isVisible">\n    <div class="is-add-item-saving" data-bind="visible: isBusy"></div>\n    <span class="aria-live" aria-role="status" aria-live="polite" data-bind="{ text: ariaLiveText, attr: { \'aria-label\': ariaLiveText }}"></span>\n    <a href="#" class="add-button" data-bind="click: addToBag, css : buttonCss, attr: { \'aria-label\': resources.pdp_cta_add_to_bag }, markAndMeasure: \'pdp:add_to_bag_interactive\'">\n        <span class="product-tick" data-bind="visible: showProductTick, text: iconText"></span>\n        <span data-bind="text: buttonText"></span>\n    </a>\n</div>'})),define("ProductUtils/ScrollTo",["$","ko"],(function(ue,he){return this.scrollToElement=function(he,pe){var me=ue(he);me.length>0&&ue("html, body").animate({scrollTop:me.offset().top+pe+"px"},"fast")},this.scrollToTop=function(){ue("html, body").animate({scrollTop:"0px"},"fast")},he.bindingHandlers.scrollTo={init:function(pe,me){var fe=me(),ge=he.unwrap(fe),ve=ge,be=0;"object"==typeof ge&&(ve=ge.selector,ge.topPadding&&(be=ge.topPadding)),ue(pe).click(function(){this.scrollToElement(ve,be)}.bind(this))}},he.bindingHandlers.scrollToTop={init:function(he){ue(he).click(function(){this.scrollToTop()}.bind(this))}},this})),define("Components/add-item/add-item",["$","ko","text!./add-item.html","ProductUtils/Bag","ProductUtils/ScrollTo","PageConfig"],(function(ue,he,pe,me,fe,ge){return{viewModel:function o(ue){this.isVisible=ue.state.productData.isInStock,this.imgUrl=ue.productImage,this.scrollToTop=ue.scrollToTop,this.url=ue.url,this.productId=ue.state.productData.productId,this.resources=ue.state.resources,this.selectedColour=ue.state.selectedColour,this.selectedSize=ue.state.selectedSize,this.noColourSelected=ue.state.showNoColourSelectedWarning,this.noSizeSelected=ue.state.showNoSizeSelectedWarning,this.addedToBag=he.observable(!1),this.showProductTick=he.observable(!1),this.failedToAdd=ue.state.showAddToBagError,this.failedToAddMessage=ue.state.addToBagErrorMessage,this.showTryAgain=he.observable(!!ue.showTryAgain&&ue.showTryAgain),this.buttonText=he.observable(this.resources.pdp_cta_add_to_bag),this.isBusy=he.observable(!1),this.ariaLiveText=he.computed((function(){var ue=this.failedToAddMessage();return ue||(this.addedToBag()?this.resources.pdp_status_add_to_bag_success:"")}),this),this.buttonCss=he.computed(function(){return this.failedToAdd()&&this.showTryAgain()?"failed":this.isBusy()?"is-disabled":""}.bind(this)),this.iconText=he.computed(function(){return this.addedToBag()?"added to basket":"add to basket"}.bind(this)),this.selectedSize.subscribe(function(ue){void 0!==ue&&this.noSizeSelected()&&this.noSizeSelected(!1)}.bind(this)),this.selectedColour.subscribe(function(ue){void 0!==ue&&this.noColourSelected()&&this.noColourSelected(!1)}.bind(this));var pe,ve=new me(ue,ue.initiator);this.addToBag=function(){this.isBusy()||(this.revertState(),void 0===this.selectedColour()?this.noColourSelected(!0):void 0===this.selectedSize()?this.noSizeSelected(!0):(this.isBusy(!0),ve.addItems(this.selectedSize(),this.addToBagResult)))},this.addToBagResult=function(he){this.isBusy(!1),he.success?(this.addedToBag(!0),"buyTheLook"!==ue.initiator&&this.showProductTick(!0),this.buttonText(this.resources.pdp_status_add_to_bag_success),this.scrollToTop&&"mobile"!==ge.platform&&fe.scrollToTop(),pe&&clearTimeout(pe),pe=setTimeout(this.revertState,5e3)):(this.showTryAgain()&&this.buttonText(this.resources.pdp_status_error_add_item_try_again),this.failedToAdd(!0),this.failedToAddMessage(he.error||this.resources.pdp_status_add_to_bag_failure))}.bind(this),this.revertState=function(){this.buttonText(this.resources.pdp_cta_add_to_bag),this.addedToBag(!1),this.showProductTick(!1),this.failedToAdd(!1),this.failedToAddMessage(""),this.isBusy(!1)}.bind(this)},template:pe}})),define("text!Components/payment-promo/payment-promo.html",[],(function(){return'\x3c!-- ko if : hasEnabledPaymentOptions && isValidTransactionAmount --\x3e\n<div data-bind="attr: { class: paymentPromoWrapperClass }">\n    \x3c!-- ko if : hasMultiplePaymentOptions --\x3e\n    <p class="payment-promo-component" data-bind="html: paymentPromoMessaging"></p>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if : !hasMultiplePaymentOptions --\x3e\n    <a data-bind="attr: { href: informationLinkUrl }" target="_blank" class="payment-promo-component">\n        <p data-bind="html: paymentPromoMessaging"></p>\n        <span class="payment-promo-information">\n            <span data-bind=\'attr: { "aria-label": logoLabel, class: logoClass }\'></span>\n            <span class="product-information-light" data-bind=\'attr: { "aria-label": moreInfoLabel }\'></span>\n        </span>\n    </a>\n    \x3c!-- /ko --\x3e\n</div>\n\x3c!-- /ko --\x3e'})),define("Asos.Web.Currency.Formatter",["exports"],(function(ue){"use strict";var he={cultures:{default:{currencyFormatting:{default:"1",RUB:"2"},numberFormat:"1"},"ar-AE":{currencyFormatting:{default:"4"},numberFormat:"1"},"ar-KW":{currencyFormatting:{default:"4"},numberFormat:"1"},"ar-QA":{currencyFormatting:{default:"4"},numberFormat:"1"},"ar-SA":{currencyFormatting:{default:"4"},numberFormat:"1"},"cs-CZ":{currencyFormatting:{default:"4"},numberFormat:"3"},"de-DE":{currencyFormatting:{default:"4"},numberFormat:"2"},"da-DK":{currencyFormatting:{default:"4"},numberFormat:"2"},"en-AU":{currencyFormatting:{default:"1",RUB:"2"},numberFormat:"1"},"en-GB":{currencyFormatting:{default:"1",RUB:"2"},numberFormat:"1"},"en-US":{currencyFormatting:{default:"1",RUB:"2"},numberFormat:"1"},"es-AR":{currencyFormatting:{default:"1",RUB:"2"},numberFormat:"1"},"es-CL":{currencyFormatting:{default:"1",RUB:"2"},numberFormat:"1"},"es-ES":{currencyFormatting:{default:"4"},numberFormat:"2"},"es-MX":{currencyFormatting:{default:"1",RUB:"2"},numberFormat:"1"},"fa-IR":{currencyFormatting:{default:"4"},numberFormat:"1"},"fr-FR":{currencyFormatting:{default:"4"},numberFormat:"3"},"he-IL":{currencyFormatting:{default:"4"},numberFormat:"1"},"hi-IN":{currencyFormatting:{default:"4"},numberFormat:"1"},"it-IT":{currencyFormatting:{default:"4"},numberFormat:"2"},"ja-JP":{currencyFormatting:{default:"2"},numberFormat:"1"},"ko-KR":{currencyFormatting:{default:"2"},numberFormat:"1"},"ms-MY":{currencyFormatting:{default:"2"},numberFormat:"1"},"nl-NL":{currencyFormatting:{default:"2"},numberFormat:"2"},"pl-PL":{currencyFormatting:{default:"4"},numberFormat:"3"},"ru-RU":{currencyFormatting:{default:"4"},numberFormat:"3"},"sv-SE":{currencyFormatting:{default:"4"},numberFormat:"2"},"tr-TR":{currencyFormatting:{default:"4"},numberFormat:"1"},"uk-UA":{currencyFormatting:{default:"4"},numberFormat:"4"}},currencyFormats:{1:{negative:"-{C}{N}",positive:"{C}{N}"},2:{negative:"-{C} {N}",positive:"{C} {N}"},3:{negative:"-{N}{C}",positive:"{N}{C}"},4:{negative:"-{N} {C}",positive:"{N} {C}"}},currencySymbols:{AED:{default:"AED"},AUD:{default:"$"},CAD:{default:"C$"},CHF:{default:"CHF"},CNY:{default:""},CZK:{default:"K"},DKK:{default:"DKK","da-DK":"kr."},EUR:{default:""},GBP:{default:""},HKD:{default:"HKD$"},ILS:{default:"ILS"},INR:{default:"INR"},IRR:{default:"IRR"},JPY:{default:"JPY"},KRW:{default:"KRW"},KWD:{default:"KWD"},MYR:{default:"RM"},NOK:{default:"NOK"},NZD:{default:"NZD$"},PLN:{default:"PLN","pl-PL":"z."},QAR:{default:"QAR"},RUB:{default:"."},SAR:{default:"SAR"},SEK:{default:"SEK"},SGD:{default:"SGD$"},TRY:{default:"TRY"},TWD:{default:"NT$"},UAH:{default:"UAH"},USD:{default:"$"}},numberFormats:{1:"###,###.##",2:"###.###,##",3:"### ###,##",4:"### ###.##"}},pe=new RegExp(/(#+)([^#])(#+)([^#]|$)(#+|$)/g),l=function(ue){var he=ue.split(pe).filter((function(ue){return""!==ue}));if(!(he.length<3))return{digitGroupingLength:he[0].length,digitGroupingSymbol:he[1],digitsBeforeDecimal:he[2].length,decimalSeparator:he[3],decimalPlaces:he[4]?he[4].length:0}},h=function(ue,he){if(he&&!function t(ue){return Math.round(ue)===ue}(ue))throw new Error("Value must be an integer when formatAsInteger is set to true, else numeric precision will be lost")},p=function(ue,pe,me){var fe=Number(ue);if(isNaN(fe)||!isFinite(fe))return ue;h(fe,me);var ge=he.cultures[pe]||he.cultures.default,ve=he.numberFormats[ge.numberFormat],be=l(ve);return be?function(ue,he,pe){var me=pe.digitGroupingSymbol,fe=pe.digitGroupingLength,ge=pe.digitsBeforeDecimal,ve=pe.decimalSeparator,be=pe.decimalPlaces,ye=!!ve&&!he,Se=function(ue){return ue.split("").reverse().join("")}(he?Math.abs(ue).toString():Math.abs(ue).toFixed(be)).split(""),xe=ye?be+1+ge:ge,we=Se.reduce((function(ue,he,pe){return ye||pe!==ge?ye&&pe===be?"".concat(ve).concat(ue):pe>=xe&&(pe-xe)%fe==0?"".concat(he).concat(me).concat(ue):"".concat(he).concat(ue):"".concat(he).concat(me).concat(ue)}));return 0>ue?"".concat("-").concat(we):we}(fe,me,be):ue},g=function(ue,pe){var me=he.currencySymbols[ue];return me?me[pe]||me.default:""},b=function(ue){return!isNaN(ue)&&isFinite(ue)},y=function(ue,pe){var me=he.cultures[ue]||he.cultures.default,fe=me.currencyFormatting[pe]||me.currencyFormatting.default;return he.currencyFormats[fe]};ue.formatPrice=function(ue,he,pe,me){var fe=Number(ue);if(!b(fe))return ue;var ge=g(pe,he),ve=y(he,pe);if(!ge)return ue;var be=p(Math.abs(fe),he,me),ye=(0>fe?ve.negative:ve.positive).replace("{C}",ge);return ye.replace("{N}",be)},ue.formatValue=p,ue.getCurrencySymbol=g,Object.defineProperty(ue,"__esModule",{value:!0})})),define("asos-web-payment-provider-instalments",[],(function(){"use strict";var i=function(ue,he){s(ue,he);for(var pe=he/ue,me=Math.floor(100*pe)/100,fe=ue-1,ge=parseFloat((he-me*fe).toFixed(2)),ve=[],be=0;fe>be;be++)ve.push(me);return ve.push(ge),ve},n=function(ue,he){s(ue,he);var pe=Math.round(100*he),me=ue-1,fe=Math.ceil(pe/ue),ge=pe-me*fe;return[fe/100,fe/100,fe/100,Math.floor(ge)/100]},s=function(ue,he){if(!he||!ue)throw"Incorrect number of arguments.  This function requires two numeric arguments, numberOfInstalments and totalValue.";if("number"!=typeof he||"number"!=typeof ue)throw"Wrong type of argument passed in.  Both totalValue and numberOfInstalments should be numeric values."};return{getSummaryLargestLast:function(ue,he){return i(ue,he)[0]},getSummarySmallestLast:function(ue,he){return n(ue,he)[0]},getInstalmentsLargestLast:i,getInstalmentsSmallestLast:n}})),define("Components/payment-promo/payment-promo",["ko","text!./payment-promo.html","PageConfig","Asos.Web.Currency.Formatter","asos-web-payment-provider-instalments","Providers/SdkProvider"],(function(ue,he,pe,me,fe,ge){return{viewModel:function o(he){function o(ue,he,me){var fe=pe.currency.toLowerCase();if(Object.keys(ue).length>0){var ge=he.split(","),ve=[];return ge.forEach((function(he){ve.push(ue[he][me][fe])})),ve}}function a(ue){var he=void 0,pe=void 0;return ue.forEach((function(ue){he=ue.minimumTransactionAmount<he?he:ue.minimumTransactionAmount,pe=ue.maximumTransactionAmount>pe?pe:ue.maximumTransactionAmount})),{minimumTransactionAmount:he,maximumTransactionAmount:pe}}function c(ue,he){var fe=ue.instalmentSummary(ue.instalmentCount,he);return me.formatPrice(fe,pe.language,pe.currency)}function l(ue){return"<a href='%{informationLinkUrl}' target='_blank' rel='no-opener no-referrer'><span aria-label='%{logoLabel}' class='%{spriteClass}'></span></a>".replace("%{informationLinkUrl}",ue.informationLinkUrl).replace("%{logoLabel}",ue.logoLabel).replace("%{spriteClass}",ue.logoClass)}this.enabledPaymentOptions=ue.observableArray([]),this.hasEnabledPaymentOptions=ue.observable(!1);var ve=pe.countryCode.toLowerCase(),be=he.state.paymentPromotions;this.hasMultiplePaymentOptions=Object.keys(be).length>1,this.canDisplayMultiplePaymentOptions=ue.observable(!1);var ye=Object.keys(be).toString();this.price=he.data.price,this.paymentPromoWrapperClass="payment-promo-wrapper",this.moreInfoLabel=ue.observable(""),this.logoLabel=ue.observable(""),this.logoClass=ue.observable(""),this.informationLinkUrl=ue.observable(""),ge.getFeatures().then(function(ue){var he=ue.ifActive("pdp-paymentOptions-"+ve);he&&he.value&&he.value.length&&(this.enabledPaymentOptions(he.value),this.init())}.bind(this)),this.getPaymentProviderConfig=function(ue,me){return this.hasMultiplePaymentOptions?this.enabledPaymentOptions().reduce((function(ue,ge){switch(ge){case"klarnaPI3":me.klarnaPI3&&(ue.klarnaPI3={instalmentCount:3,messageText:he.state.resources.pdp_payment_provider_mixed_double_message,logoLabel:he.state.resources.pdp_payment_provider_klarna_name,logoClass:"klarna-logo",informationLinkUrl:pe.siteDomain+"/payments-and-deliveries/klarna/",instalmentSummary:fe.getSummaryLargestLast});break;case"clearpay":me.clearpay&&(ue.clearpay={instalmentCount:4,messageText:he.state.resources.pdp_payment_provider_mixed_double_message,logoLabel:he.state.resources.pdp_payment_provider_clearpay_name,logoClass:"clearpay-logo",informationLinkUrl:pe.siteDomain+"/payments-and-deliveries/clearpay/",instalmentSummary:fe.getSummaryLargestLast});break;case"payPalPayIn3":me.payPalPayIn3&&(ue.payPalPayIn3={instalmentCount:3,messageText:he.state.resources.pdp_payment_provider_solo_message_with_cta_interest_free,logoLabel:he.state.resources.pdp_payment_provider_paypalpayin3_name,logoClass:"paypalpayin3-logo",informationLinkUrl:pe.siteDomain+"/payments-and-deliveries/paypal/",instalmentSummary:fe.getSummarySmallestLast});break;case"afterpay":me.afterpay&&(ue.afterpay={instalmentCount:4,messageText:he.state.resources.pdp_payment_provider_same_double_message,logoLabel:he.state.resources.pdp_payment_provider_afterpay_name,logoClass:"afterpay-logo",informationLinkUrl:pe.siteDomain+"/payments-and-deliveries/afterpay/",instalmentSummary:fe.getSummarySmallestLast});break;case"klarnaPI4":me.klarnaPI4&&(ue.klarnaPI4={instalmentCount:4,messageText:he.state.resources.pdp_payment_provider_same_double_message,logoLabel:he.state.resources.pdp_payment_provider_klarna_name,logoClass:"klarna-logo",informationLinkUrl:pe.siteDomain+"/payments-and-deliveries/klarna/",instalmentSummary:fe.getSummaryLargestLast})}return ue}),{}):this.enabledPaymentOptions().reduce((function(ue,ge){switch(ge){case"afterpay":me.afterpay&&(ue.afterpay={moreInfoLabel:he.state.resources.pdp_misc_more_information,instalmentCount:4,messageText:he.state.resources.pdp_payment_provider_solo_message,logoLabel:he.state.resources.pdp_payment_provider_afterpay_name,logoClass:"afterpay-logo",informationLinkUrl:pe.siteDomain+"/payments-and-deliveries/afterpay/",instalmentSummary:fe.getSummarySmallestLast});break;case"klarnaPI4":me.klarnaPI4&&(ue.klarnaPI4={moreInfoLabel:he.state.resources.pdp_misc_more_information,instalmentCount:4,messageText:he.state.resources.pdp_payment_provider_solo_message_interest_free,logoLabel:he.state.resources.pdp_payment_provider_klarna_name,logoClass:"klarna-logo",informationLinkUrl:pe.siteDomain+"/payments-and-deliveries/klarna/",instalmentSummary:fe.getSummaryLargestLast})}return ue}),{})}.bind(this),this.init=function(){this.promoConfig=this.getPaymentProviderConfig(ye,be);var ue=Object.keys(this.promoConfig);ue.length>0&&(ue.length>1&&this.canDisplayMultiplePaymentOptions(!0),this.hasEnabledPaymentOptions(!0))}.bind(this),this.isValidTransactionAmount=ue.computed(function(){if(this.hasEnabledPaymentOptions()){var ue;if(this.canDisplayMultiplePaymentOptions()){var he=Object.keys(this.promoConfig).toString();ue=a(o(be,he,ve))}else{var pe=Object.keys(this.promoConfig)[0].toString();ue=a(o(be,pe,ve))}return this.price()>=ue.minimumTransactionAmount&&this.price()<=ue.maximumTransactionAmount}return!1}.bind(this)),this.paymentPromoMessaging=ue.computed(function(){if(this.hasEnabledPaymentOptions()){var ue=Object.keys(this.promoConfig)[0],he=this.promoConfig[ue];if(this.promoConfig&&this.price()>0&&!this.canDisplayMultiplePaymentOptions())return this.moreInfoLabel(he.moreInfoLabel),this.logoLabel(he.logoLabel),this.logoClass(he.logoClass),this.informationLinkUrl(he.informationLinkUrl),this.promoConfig.payPalPayIn3?he.messageText.replace("%{instalmentCount}",he.instalmentCount).replace("%{price}",c(he,this.price())).replace("%{cta}",l(this.promoConfig.payPalPayIn3)):he.messageText.replace("%{instalmentCount}",he.instalmentCount).replace("%{price}",c(he,this.price()));if(this.promoConfig&&this.price()>0&&this.canDisplayMultiplePaymentOptions()){if(this.promoConfig.klarnaPI3&&this.promoConfig.clearpay)return he.messageText.replace("%{firstPrice}",c(this.promoConfig.klarnaPI3,this.price())).replace("%{secondPrice}",c(this.promoConfig.clearpay,this.price())).replace("%{firstCta}",l(this.promoConfig.klarnaPI3)).replace("%{secondCta}",l(this.promoConfig.clearpay));if(this.promoConfig.klarnaPI4&&this.promoConfig.afterpay)return he.messageText.replace("%{instalmentCount}",this.promoConfig.afterpay.instalmentCount).replace("%{firstPrice}",c(this.promoConfig.afterpay,this.price())).replace("%{firstCta}",l(this.promoConfig.afterpay)).replace("%{secondCta}",l(this.promoConfig.klarnaPI4))}}}.bind(this))},template:he}})),define("text!Components/side-modal/side-modal.html",[],(function(){return'<div class="side-modal-overlay" data-bind="click: closeModal, css: openState"></div>\n<div class="side-modal" data-bind="css: openState, attr: {\'aria-label\': data.ariaLabel}" role="region">\n    \x3c!-- ko template: { nodes: $componentTemplateNodes, data: data } --\x3e\x3c!-- /ko --\x3e\n</div>\n    '})),define("Components/side-modal/side-modal",["ko","text!./side-modal.html"],(function(ue,he){return{viewModel:function i(he){this.sideModalVisible=he.showModal,this.data=he.data,this.openState=ue.observable(""),this.sideModalVisible.subscribe(function(ue){ue?(window.addEventListener("keyup",this.handleKeyUp),document.body.style.overflow="hidden",this.openState("open")):(window.removeEventListener("keyup",this.handleKeyUp),document.body.style.overflow="",this.openState(""))}.bind(this)),this.closeModal=function(){this.sideModalVisible(!1)},this.handleKeyUp=function(ue){("Escape"===ue.key||27===ue.keyCode)&&this.closeModal()}.bind(this)},template:he}})),define("text!Components/fit-analytics/fit-analytics.html",[],(function(){return'<div id="product-size" data-bind=\'component:{\n    name: "product-size",\n    params: {\n        hideLabels: false,\n        hideLowInStock: false,\n        showSizeGuide: true,\n        state: state,\n        data: product,\n        useFitAnalytics: true,\n        hideOnOutOfStock : true,\n        context: "main",\n        selectorIndex: 0}\n    }\'></div>\n<div class="aside-action">\n    <div id="product-add" data-bind=\'component:{name: "add-item",\n                     params:{\n                         productId: product.id,\n                         productImage : product.images[0].url,\n                         scrollToTop: true,\n                         state: state,\n                         initiator : "main"\n                     }}\'></div>\n    <div id="product-save" data-bind=\'component:{name: "save-button",\n                     params:{\n                         productData : product,\n                         productId: product.id,\n                         productImage : product.images[0].url,\n                         state: state\n                     }\n                     }\'></div>\n    <div class="add-item-error error-message" data-bind="visible: state.showAddToBagError, html: state.addToBagErrorMessage" style="display: none">\n    </div>\n</div>\n\x3c!-- ko if: showLowerSection --\x3e\n<div class="fit-analytics lower">\n    <div class="size-guide-wrapper">\n        <label data-bind="text: lowerHeader"></label>\n        <span data-bind="text: lowerPreLinkText"></span>\n        \x3c!-- ko if : lowerLinkText --\x3e\n        <a href="" data-bind="click: openRecommendations, text: lowerLinkText"></a>\n        \x3c!-- /ko --\x3e\n        <span data-bind="text: lowerPostLinkText"></span>\n        <div id="size-guide" class="size-guide" data-bind=\'component: { name: "size-guide", params: {dictionary: sizeGuideDictionary , url: product.sizeGuide, visible: state.showSizeGuide, id: product.id}}\'></div>\n        <span data-bind="text: lowerPostSizeGuideText"></span>\n    </div>\n</div>\n\x3c!-- /ko --\x3e\n'})),define("Components/fit-analytics/fit-analytics",["ko","text!./fit-analytics.html","$","PageConfig","ProductUtils/Window","ProductUtils/Analytics","Providers/SdkProvider","ProductUtils/NewRelicLogger"],(function(ue,he,pe,me,fe,ge,ve,be){return{viewModel:function c(he){function c(){return this.resources.pdp_fit_analytics_sizing_help_intro}function l(ue){return ue&&ue.split("%{splitPoint}")[0]}function d(ue){return ue&&ue.split("%{splitPoint}")[1].split("%{link}")[0]}function u(ue){return ue&&ue.split("%{link}")[1].split("%{linkEnd}")[0]}function h(ue){return ue&&ue.split("%{linkEnd}")[1]}function p(){switch(me.storeCode){case"COM":return"GB";case"ROW":return"ASOS_ROW";case"ROE":return"ASOS_ROE";default:return me.storeCode}}var ye=this;this.enabled=!1,this.visible=ue.observable(!1),this.viewData=he.data,this.state=he.state,this.product=he.data,this.widget=void 0,this.resources=he.state.resources,this.isRecognised=ue.observable(!1),this.fitAssistantLogFeatureValue=ue.observable(0),this.widgetCloseTarget=null,this.features=he.state.features,this.state.fitAnalyticsViewModel(this);var Se=[],xe=!1;this.analyticsContext={analyticsLoadEventFired:!1,hasPreviousPurchases:!1,bodyPart:void 0},this.RecommendationType={None:1,Partial:2,Complete:3,OOS:4},this.recommendation=ue.observable(void 0),this.recommendedSize=ue.observable(),this.recommendedDisplaySize=ue.observable(),this.recommendationText=ue.observable(),this.userInfoLevel=ue.observable(),this.displayLinkText=ue.computed((function(){return-1!==[this.RecommendationType.None,this.RecommendationType.Complete,this.RecommendationType.Partial,this.RecommendationType.OOS].indexOf(this.recommendation())}),this),this.recommendedSize.subscribe(function(ue){this.recommendedDisplaySize(this.trimRecommendationSize(ue))}.bind(this)),this.init=function(){var ue=this.isMobileDevice(me.platform);this.isEnabled(this.viewData.isInStock,ue,me.storeCode,this.features)&&(ve.getIdentity().then(function(he){he.customer.customerId().then(function(pe){he.customer.isRecognised().then(function(he){this.isRecognised(he);var me=this.createFitData(this.viewData,pe,this.state,ue);this.createWidget(me)}.bind(this))}.bind(this))}.bind(this)),ve.getFeatures().then(function(ue){var he=ue.ifActive("pdp-fit-assistant-logging");this.fitAssistantLogFeatureValue(he.probability)}.bind(this)))},this.createFitData=function(ue,he,pe,fe){return he||(he=""),{productId:"asos-"+ue.productCode,thumbnail:pe.mainImage().url,userId:he,showMobile:fe,prefetch:!0,shopCountry:p(),language:me.languageShort,shopSizingSystem:me.sizeSchema,manufacturedSizes:this.getSizes(ue.variants)}},this.isMobileDevice=function(ue){return"mobile"===ue},this.isEnabled=function(ue,he,pe,me){return!(!ue||!this._hasMoreThanOneSize())&&(he?me.fitAnalyticsEnabledStoresMobile.indexOf(pe.toLowerCase())>-1:me.fitAnalyticsEnabledStores.indexOf(pe.toLowerCase())>-1)},this.getSizes=function(ue){for(var he={},pe=0;pe<ue.length;pe++){he[this.formatSizes(ue[pe].size)]=ue[pe].isInStock}return he},this._hasMoreThanOneSize=function(){return!this.product.isNoSize&&!this.product.isOneSize}.bind(this),this.formatSizes=function(ue){return ue.split("-")[0].replace(/\s+$/,"")};var v=function(){var ue={recommendationType:ye.recommendation(),hasPreviousPurchaseData:ye.analyticsContext.hasPreviousPurchases,userSignedIn:ye.isRecognised(),recommendedSize:ye.recommendedSize()};return ye.analyticsContext.bodyPart&&(ue.bodyCategory=ye.analyticsContext.bodyPart),he.state.fitAnalyticsContext=ue,ue};this.fireAnalyticsLoadEvent=function(){if(this.visible()&&!this.analyticsContext.analyticsLoadEventFired){var ue=v();ge.fireFitAnalyticsLoadEvent(ue),this.analyticsContext.analyticsLoadEventFired=!0}},this.fireAnalyticsOutOfScaleEvent=function(){var ue=v();ge.fireFitAnalyticsOutOfScaleEvent(ue)},this.trimRecommendationSize=function(ue){return ue?ue.replace(/(in|cm|UK|EU|Chest)/g,"").split("-")[0].trim():ue},this.onRecommendationReceived=function(ue,he){if(this.visible(!0),he&&void 0!==he.hasPastPurchases&&(this.analyticsContext.hasPreviousPurchases=he.hasPastPurchases),this.recommendation(this.RecommendationType.None),this.recommendedSize(void 0),this.recommendationText(this.resources.pdp_fit_analytics_recommendation_profile_none),"new user"!==ue){if(he){if(this.userInfoLevel(he.userInfoLevel),he.outOfScale)return void this.fireAnalyticsOutOfScaleEvent();if(ue&&this.recommendedSize(ue),he.outOfStock)return this.recommendationText(this.resources.pdp_fit_analytics_recommendation_oos.replace("%{size}",ue)),this.recommendation(this.RecommendationType.OOS),void this.fireAnalyticsLoadEvent(v());1===he.userInfoLevel?(this.recommendationText(this.resources.pdp_fit_analytics_recommendation_profile_partial.replace("%{size}",ue)),this.recommendation(this.RecommendationType.Partial)):2===he.userInfoLevel&&(this.recommendationText(this.resources.pdp_fit_analytics_recommendation_profile_complete.replace("%{size}",ue)),this.recommendation(this.RecommendationType.Complete)),this.lastRecommendationDetails=he,this.fireAnalyticsLoadEvent(v())}}else this.fireAnalyticsLoadEvent(v())},this.onLoadReceived=function(ue){ue&&ue.garment&&(this.analyticsContext.bodyPart=ue.garment.category),this.isLoaded(!0),this.fireAnalyticsLoadEvent(v())},this.openRecommendations=function(ue,he){if(this.widget){this.widget.open(),this.widgetCloseTarget=he.currentTarget;var pe=v();ge.fireFitAnalyticsOpenWidgetEvent(pe)}},this.onWidgetOpened=function(){xe=!0},this.onWidgetClosed=function(){var ue=v();ue.widgetScreenEvents=Se.slice(0),ge.fireFitAnalyticsCloseWidgetEvent(ue),xe=!1,Se.length=0},this.onMetricEventReceived=function(ue,he){xe&&Se.push({event:ue,value:he})},this.isLoaded=ue.observable(!1),this.executeByProbability=function(ue,he){he>=Math.round(100*Math.random())&&ue()},this.manageFocus=function(){ye.widgetCloseTarget&&ye.lowerLinkText()?ye.widgetCloseTarget.focus():fe.document.getElementById("fit-link-upper").focus()},this.createWidget=function(ue){fe._fitAnalytics=function(){ye.widget=new fe.FitAnalyticsWidget({productId:ue.productId,thumb:ue.thumbnail,manufacturedSizes:ue.manufacturedSizes,userId:ue.userId,language:ue.language,showMobile:ue.showMobile,shopCountry:ue.shopCountry,shopSizingSystem:ue.shopSizingSystem,prefetch:ue.prefetch,close:function(ue,he,pe){ye.onRecommendationReceived(he,pe),ye.onWidgetClosed(),ye.manageFocus()},open:function(){ye.onWidgetOpened()},metricEvent:function(ue,he,pe){ye.onMetricEventReceived(ue,he,pe)},error:function(ue,he){he&&"product_not_published"!==he.code&&"product_not_found"!==he.code&&ye.executeByProbability((function(){var pe=new Error(be.ERROR_TYPE.FitAssistantError);be.logError(pe,{productSerial:ue,errorCode:he.code,errorMessage:he.message})}),ye.fitAssistantLogFeatureValue())},recommend:function(ue,he,pe){ye.onRecommendationReceived(he,pe)},load:function(ue,he){ye.onLoadReceived(he),ye.widget.getRecommendation(),pe("#existing-size-chart").hide()}})};var he=document.createElement("script");he.id="fitAnalyticsScript",he.src="//widget.fitanalytics.com/widget.js",he.crossOrigin="anonymous",document.body.appendChild(he)},this.showLowerSection=ue.computed(function(){return!!this.isLoaded()&&(2!==this.userInfoLevel()||this.state.showSizeGuide())}.bind(this)),this.getLowerText=function(ue){if(this.recommendation()===this.RecommendationType.None)return ue(this.resources.pdp_fit_analytics_sizing_help_profile_none);switch(this.userInfoLevel()){case 1:return ue(this.resources.pdp_fit_analytics_sizing_help_profile_partial);case 2:return ue(this.resources.pdp_fit_analytics_sizing_help_profile_complete);default:return ue(this.resources.pdp_fit_analytics_sizing_help_profile_none)}},this.lowerHeader=this.resources.pdp_fit_analytics_sizing_help_title,this.lowerPreLinkText=ue.computed(function(){return c.call(this)}.bind(this)),this.lowerPostLinkText=ue.computed(function(){return this.state.showSizeGuide()?this.getLowerText(d):void 0}.bind(this)),this.lowerPostSizeGuideText=ue.computed(function(){var ue=this.getLowerText(h);if(ue&&!(ue.length<=1))return ue}.bind(this)),this.lowerLinkText=ue.computed(function(){var ue=this.getLowerText(l);if(this.lowerPostLinkText())return ue;var he=this.getLowerText(h);return!he||he.length>1?ue:ue+he}.bind(this)),this.sizeGuideDictionary={pdp_size_guide_link:ue.computed(function(){if(this.state.showSizeGuide()){var ue=this.getLowerText(u),he=this.getLowerText(h);return!he||he.length>1?ue:ue+he}}.bind(this)),pdp_misc_close:this.resources.pdp_misc_close,pdp_size_guide_aria_label:this.resources.pdp_size_guide_aria_label},this.init()},template:he}})),define("text!Components/toast/toast.html",[],(function(){return'<span class="toast" data-bind="html: message, visible: displayMessage, css: { \'fade\': fade }"></span>'})),define("Components/toast/toast",["ko","text!./toast.html"],(function(ue,he){return{viewModel:function i(he){this.fade=ue.observable(!1),this.displayMessage=he.state.toast.displayMessage,this.message=he.state.toast.message,this.fadeTimer=null,this.hideTimer=null,this.message.subscribe(function(ue){clearTimeout(this.fadeTimer),clearTimeout(this.hideTimer),ue&&(this.fade(!1),this.runTimer())}.bind(this)),this.displayMessage.subscribe(function(ue){clearTimeout(this.fadeTimer),clearTimeout(this.hideTimer),ue&&(this.fade(!1),this.runTimer())}.bind(this)),this.runTimer=function(){this.fadeTimer=setTimeout(function(){this.fade(!0),this.hideTimer=setTimeout(function(){this.displayMessage(!1)}.bind(this),1e3)}.bind(this),4500)}},template:he}})),define("ProductUtils/OutOfStockAnimator",[],(function(){function e(){function e(){return window.innerWidth<720}function n(){if(ke===Se.ANIMATION_STATUS.UP){for(var ue in xe)xe[ue].dispose();ge.removeEventListener("click",n,!0),Se.animateDown()}}function r(){if(ke===Se.ANIMATION_STATUS.INITIAL&&be&&!function t(){return 0!==we.filter((function(ue){return be.submodulesCompleted[ue]()===be.CAROUSEL_LOADING_STATE.NOT_LOADED})).length}()&&function i(){return 0!==we.filter((function(ue){return be.submodulesCompleted[ue]()===be.CAROUSEL_LOADING_STATE.HAS_DATA})).length}()){if(o(),!ve)return setTimeout(r,Se.DOM_CHECK_INTERVAL);Se.animateUp(),function s(){setTimeout((function(){ge.addEventListener("click",n,!0)}),Se.ANIMATION_DURATION)}()}}function o(){ue=document.querySelector("#asos-product"),fe=document.querySelector("#lower-content"),he=document.querySelector(".product-gallery"),ge=document.querySelector("#asos-product > #core-product"),ve=document.querySelector(".product-code"),pe=document.querySelector(".layout-aside"),me=pe.innerHTML}function u(){e()&&(ke===Se.ANIMATION_STATUS.INITIAL&&function l(){pe.style.display="none",pe.innerHTML="";var ue=document.createElement("div");ue.id="newAsideContainer",ue.classList.add("layout-aside"),ue.innerHTML=me,fe.insertBefore(ue,fe.firstChild)}(),ke===Se.ANIMATION_STATUS.SEQUENCE_COMPLETED&&function d(){var ue=document.getElementById("newAsideContainer");pe.innerHTML=ue.innerHTML,pe.style.display="block",fe.removeChild(ue)}())}var ue,he,pe,me,fe,ge,ve,be,ye,Se=this,xe=[],we=["buyTheLook","recommendations"],ke=Se.ANIMATION_STATUS.INITIAL;this.isClickTargetHigherThanLowerContent=function(ue){return ue.getBoundingClientRect().top<fe.getBoundingClientRect().top},this.subscribeToLoadingState=function(ue){be=ue,xe.push(be.submodulesCompleted.buyTheLook.subscribe(r)),xe.push(be.submodulesCompleted.recommendations.subscribe(r))},this.getAnimationTopPosition=function(){return e()?Se.ANIMATION_TOP_POSITION.MOBILE:function c(ue){return ue.getBoundingClientRect().bottom+document.documentElement.scrollTop}(ve)-function a(ue){return ue.getBoundingClientRect().top+document.documentElement.scrollTop}(he)+Se.ANIMATION_TOP_POSITION.DESKTOP},this.animateUp=function(){o(),u(),ke=Se.ANIMATION_STATUS.MOVING_UP,ye=he.getBoundingClientRect().height,he.style.maxHeight=ye+"px",setTimeout((function(){he.style.maxHeight=Se.getAnimationTopPosition()+"px",he.style.marginBottom="0px",ue.classList.add("animated-up"),setTimeout((function(){ke=Se.ANIMATION_STATUS.UP}),Se.ANIMATION_DURATION)}),Se.ANIMATION_TIMEOUT_DELAY)},this.animateDown=function(){o(),ke=Se.ANIMATION_STATUS.MOVING_DOWN,he.style.maxHeight=ye+"px",ue.classList.add("animating-down"),setTimeout((function(){he.style.marginBottom="",he.removeAttribute("style"),ue.classList.remove("animated-up"),ue.classList.remove("animating-down"),ke=Se.ANIMATION_STATUS.SEQUENCE_COMPLETED,u()}),Se.ANIMATION_DURATION)}}var ue=e.prototype;return ue.ANIMATION_DURATION=2e3,ue.DOM_CHECK_INTERVAL=250,ue.ANIMATION_TOP_POSITION={MOBILE:190,DESKTOP:60},ue.ANIMATION_TIMEOUT_DELAY=20,ue.ANIMATION_STATUS={INITIAL:0,MOVING_UP:1,UP:2,MOVING_DOWN:3,SEQUENCE_COMPLETED:4},new e})),define("ProductUtils/EnhanceNewRelicPageView",["PageConfig","ProductUtils/Window"],(function(ue,he){return function(){"object"==typeof he.NREUM&&"function"==typeof he.NREUM.setCustomAttribute&&(he.NREUM.setCustomAttribute("version",ue.version),he.NREUM.setCustomAttribute("storeId",ue.storeCode),he.NREUM.setCustomAttribute("platform",ue.platform),he.NREUM.setCustomAttribute("keyStoreDataversion",ue.keyStoreDataversion),he.NREUM.setCustomAttribute("browseCountry",ue.countryCode),he.NREUM.setCustomAttribute("browseCurrency",ue.currency),he.NREUM.setCustomAttribute("browseLanguage",ue.language),he.NREUM.setCustomAttribute("browseSizeSchema",ue.sizeSchema),he.NREUM.setCustomAttribute("siteChromeTemplateVersion",ue.siteChromeTemplateVersion),he.NREUM.setCustomAttribute("siteChromeTemplateBuild",ue.siteChromeTemplateBuild),he.NREUM.setCustomAttribute("userAgent",he.navigator.userAgent))}})),define("text!Components/delivery-and-returns-content-table/delivery-and-returns-content-table.html",[],(function(){return'<div class="delivery-options">\n    \x3c!-- ko if : !isMobile--\x3e\n    <hr />\n    \x3c!-- ko foreach: content.deliveryGroups --\x3e\n    <table>\n        <thead>\n            <tr class="delivery-and-returns-group-name">\n                <th scope="colgroup" colspan="3">\n                    <h2 data-bind="text: name"></h2>\n                </th>\n            </tr>\n            \x3c!-- ko if:$index()===0 --\x3e\n            <tr class="delivery-and-returns-headings">\n                <th scope="col" data-bind="text: $parent.content.deliveryGroupHeaders.type"></th>\n                <th scope="col" data-bind="text: $parent.content.deliveryGroupHeaders.when"></th>\n                <th scope="col" data-bind="text: $parent.content.deliveryGroupHeaders.howMuch"></th>\n            </tr>\n            \x3c!-- /ko --\x3e\n        </thead>\n        <tbody data-bind="foreach: options">\n            <tr>\n                <th scope="row" class="delivery-type" data-bind="html: type"></th>\n                <td class="delivery-when" data-bind="html: when"></td>\n                <td class="delivery-how-much" data-bind="with: $parents[1].formatHowMuch(howMuch)">\n                    <span class="delivery-cost" data-bind="html: price"></span>\n                    <span class="delivery-free-condition" data-bind="html: freeCondition"></span>\n                    <span class="delivery-premier-qualifier" data-bind="html: premierQualifier"></span>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n    <hr />\n    \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if : isMobile--\x3e\n    \x3c!-- ko foreach: content.deliveryGroups --\x3e\n    <table>\n        <thead>\n            <tr class="delivery-and-returns-group-name">\n                <th scope="colgroup" colspan="2">\n                    <h2 data-bind="text: name"></h2>\n                </th>\n            </tr>\n            \x3c!-- ko if:$index()===0 --\x3e\n            <tr class="delivery-and-returns-headings">\n                <th scope="col" data-bind="text: $parent.content.deliveryGroupHeaders.type"></th>\n                <th scope="col" data-bind="text: $parent.content.deliveryGroupHeaders.howMuch"></th>\n            </tr>\n            \x3c!-- /ko --\x3e\n        </thead>\n        <tbody data-bind="foreach: options">\n            <tr>\n                <td>\n                    <span class="delivery-type" data-bind="html: type"></span>\n                    <span class="delivery-when" data-bind="html: when"></span>\n                </td>\n                <td class="delivery-how-much" data-bind="with: $parents[1].formatHowMuch(howMuch)">\n                    <span class="delivery-cost" data-bind="html: price"></span>\n                    <span class="delivery-free-condition" data-bind="html: freeCondition"></span>\n                    <span class="delivery-premier-qualifier" data-bind="html: premierQualifier"></span>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n    <hr />\n    \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: content.deliveryGroups.length === 0 --\x3e\n    <div class="delivery-messaging">\n        <div class="delivery-error">\n            <div class="information-icon sprite product-information"></div>\n            <div class="information-text">\n                <span data-bind="text: resources.pdp_delivery_and_returns_options_error_message"></span>\n            </div>\n        </div>\n        <div class="delivery-text">\n            <p data-bind="text: resources.pdp_delivery_and_returns_options_unavailable"></p>\n            <p data-bind="text: resources.pdp_delivery_and_returns_options_additional_messaging"></p>\n        </div>\n        <button class="preferences" data-bind="text: resources.pdp_delivery_and_returns_options_preferences_button, click: openCountrySelector"></button>\n    </div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: content.deliveryGroups.length > 0  --\x3e\n    <span class="delivery-terms" data-bind="text: content.terms"></span>\n\n    \x3c!-- /ko --\x3e\n</div>'})),define("Components/delivery-and-returns-content-table/delivery-and-returns-content-table",["ko","text!./delivery-and-returns-content-table.html","PageConfig"],(function(ue,he,pe){return{viewModel:function n(ue){this.content=ue.data.content,this.closeModalCallback=ue.data.closeModalCallback,this.isMobile="mobile"===pe.platform,this.state=ue.state,this.resources=this.state.resources,this.formatHowMuch=function(ue){var he=ue[0],pe=null,me=null;return ue.length>1&&(pe=ue[1],ue.length>2&&(me=ue[2])),{price:he,freeCondition:pe,premierQualifier:me}}.bind(this),this.openCountrySelector=function(){this.closeModalCallback(),window.asos.siteChrome.openCountrySelector()}.bind(this)},template:he}})),define("text!Components/delivery-and-returns-content-link/delivery-and-returns-content-link.html",[],(function(){return'<div class="delivery-and-returns-content-link">\n    <p class="delivery-and-returns-link-title" data-bind="text: resources.pdp_delivery_and_returns_usa_link_title"></p>\n    <p class="delivery-and-returns-link-message" data-bind="text: resources.pdp_delivery_and_returns_usa_link_message"></p>\n    <a class="button" href="#" data-bind="attr: {href: deliveryUrl}" target="_blank">\n        <span data-bind="text: resources.pdp_delivery_and_returns_delivery_info_link_text"></span>\n        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">\n            <path fill="#FFFFFF" fill-rule="evenodd" d="M14 12h2V2H6v2h8v8zm0 2v4H0V4h4V0h14v14h-4zM4 6H2v10h10V6H4z"/>\n        </svg>\n    </a>\n</div>'})),define("Components/delivery-and-returns-content-link/delivery-and-returns-content-link",["ko","text!./delivery-and-returns-content-link.html","PageConfig","Product.Config"],(function(ue,he,pe,me){return{viewModel:function s(ue){this.content=ue.data.content,this.countryCode=ue.data.countryCode,this.isMobile="mobile"===pe.platform,this.resources=ue.state.resources,this.deliveryUrl=me.deliveryApiEndpoint+"?country="+this.countryCode},template:he}})),define("ProductUtils/SchemaOrgTemplate",["ProductUtils/NewRelicLogger","ProductUtils/MergeJson"],(function(ue,he){return new function(){this.createAndInsertInToPage=function(he,pe){try{var me=this.dataMapper(he,pe),fe=document.getElementById("split-structured-data");if(fe)this.insertAdditionalData(fe,me);else{var ge=this.rootTemplate(me),ve=document.createElement("script");ve.id="structured-data",ve.type="application/ld+json",ve.textContent=ge,document.body.appendChild(ve)}}catch(he){ue.logError(he,{action:"RenderingStructuredDataToPage",message:"Error while generating/adding structured data"})}},this.insertAdditionalData=function(ue,he){var pe=JSON.parse(ue.textContent);pe.offers=this.aggregateOfferWithItemOfferedTemplate(he.aggregateOffer),he.ratings&&(pe.aggregateRating=this.ratingsTemplate(he.ratings));var me=JSON.stringify(pe);ue.textContent=me},this.dataMapper=function(ue,he){var pe=function(){var ue=document.querySelectorAll("#product-details .product-description p, #product-details .product-description span, #product-details .product-description li"),he=Array.prototype.slice.call(ue);return he.length?he.reduce((function(ue,he){return ue+"\n"+he.textContent}),"").replace(/\s+/g," ").trim():""}(),s=function(pe){var me="undefined";if("function"==typeof ue.mainImage){var fe=ue.mainImage();fe.url&&(me=fe.url)}else{var ge=he.images.filter((function(ue){return ue.colourWayId===pe.colourWayId}));ge&&ge.length&&ge[0].url&&(me=ge[0].url)}return me};return{name:he.name,productId:he.productId,image:function(){var pe="undefined";if("function"==typeof ue.mainImage){var me=ue.mainImage();me.url&&(pe=me.url)}else{var fe=he.images.filter((function(ue){return!0===ue.isPrimary}));fe&&fe.length&&fe[0].url&&(pe=fe[0].url)}return pe}(),brand:{name:he.brandName},sku:he.productCode,color:1===ue.productData.colours.length?ue.productData.colours[0].colourName:void 0,url:document.querySelector("link[rel=canonical]").href,description:pe,aggregateOffer:{lowPrice:ue.productData.minPrice.value,highPrice:he.variants.reduce((function(ue,he){return Math.max(ue,he.price.current.value)}),!1),currency:he.productPrice.currency,isInStock:ue.productData.isInStock,offers:he.variants.map((function(ue){return{price:ue.price.current.value,currency:ue.price.currency,isInStock:ue.isInStock,product:{name:he.name,sku:ue.sku,color:ue.colourName,image:s(ue),brand:{name:he.brandName},description:pe}}}))},ratings:Object.keys(ue.ratings).length>0?ue.ratings:void 0}},this.rootTemplate=function(ue){var pe=this.productTemplate(ue),me={"@context":"http://schema.org/",brand:this.brandTemplate(ue.brand),offers:this.aggregateOfferTemplate(ue.aggregateOffer),productID:ue.productId,url:ue.url};return JSON.stringify(he(pe,me))},this.productTemplate=function(ue){return{"@type":"Product",name:ue.name,sku:ue.sku,color:ue.color,image:ue.image,brand:this.brandTemplate(ue.brand),description:ue.description}},this.brandTemplate=function(ue){return{"@type":"Brand",name:ue.name}},this.sellerTemplate=function(){return{"@type":"Organization",name:"ASOS"}},this.aggregateOfferWithItemOfferedTemplate=function(ue){var he=this;return{"@type":"AggregateOffer",lowPrice:ue.lowPrice,highPrice:ue.highPrice,priceCurrency:ue.currency,availability:ue.isInStock?"http://schema.org/InStock":"http://schema.org/OutOfStock",offerCount:ue.offers.length,offers:ue.offers.map((function(ue){return he.itemOfferedTemplate(ue)}))}},this.aggregateOfferTemplate=function(ue){var he=this;return{"@type":"AggregateOffer",lowPrice:ue.lowPrice,highPrice:ue.highPrice,priceCurrency:ue.currency,availability:ue.isInStock?"http://schema.org/InStock":"http://schema.org/OutOfStock",offerCount:ue.offers.length,offers:ue.offers.map((function(ue){return he.offerTemplate(ue)}))}},this.offerTemplate=function(ue){return{"@type":"Offer",price:ue.price,priceCurrency:ue.currency,itemOffered:this.productTemplate(ue.product),seller:this.sellerTemplate(),availability:ue.isInStock?"http://schema.org/InStock":"http://schema.org/OutOfStock",itemCondition:"http://schema.org/NewCondition"}},this.itemOfferedTemplate=function(ue){var he=this.productTemplate(ue.product);return he.offers={"@type":"Offer",price:ue.price,priceCurrency:ue.currency,seller:this.sellerTemplate(),availability:ue.isInStock?"http://schema.org/InStock":"http://schema.org/OutOfStock",itemCondition:"http://schema.org/NewCondition"},{itemOffered:he}},this.ratingsTemplate=function(ue){return{"@type":"AggregateRating",ratingValue:ue.averageOverallRating,ratingCount:ue.totalReviewCount}}}})),define("text!Components/error-banner/error-banner.html",[],(function(){return'<div class="error-banner" data-bind="css: { open: displayError }">\n    <span class="information-icon sprite product-information"></span>\n    <button class="product-close" data-bind="click: closeMessage, attr: { \'aria-label\': state.resources.pdp_misc_close }"></button>\n    <p class="error-banner-message" data-bind="text: errorMessage"></p>\n</div>\n<div aria-live="polite" aria-relevant="all" role="status" class="error-banner-aria-message" data-bind="text: state.errorBanner.message"></div>'})),define("Components/error-banner/error-banner",["ko","text!./error-banner.html"],(function(ue,he){var pe=400;return{viewModel:function i(ue){this.displayError=ue.state.errorBanner.displayError,this.errorMessage=ue.state.errorBanner.message,this.closeMessage=function(){this.displayError(!1),setTimeout(function(){this.errorMessage("")}.bind(this),pe)}.bind(this)},template:he}})),define("ProductUtils/Breadcrumb",["PageConfig","ProductUtils/UrlUtils","ProductUtils/Window"],(function(ue,he,pe){return{replaceSearchBreadcrumb:function(me){if("mobile"!==ue.platform){var fe=pe.document.querySelector('#chrome-breadcrumb a[href="#placeholder"]'),ge=(new he).getUrlParam("SearchQuery");fe&&ge&&ge.length&&(fe.setAttribute("href",ue.siteDomain+"/search/?q="+pe.encodeURIComponent(ge)),fe.textContent=me.replace("%{searchQuery}",ge))}}}})),define("text!Components/shipping-restrictions-content/shipping-restrictions-content.html",[],(function(){return'<div class="shipping-restrictions-content">\n    <div class="shipping-restriction-filter">\n        <label for="shippable-countries-input" data-bind="text: countryFilterLabel"></label>\n        <input id="shippable-countries-input" type="text" data-bind="textInput: countryFilter" />\n    </div>\n    <div class="shippable-countries" data-bind="visible: shippableCountriesVisible">\n        <span class="shipping-restriction-description" data-bind="text: description"></span>\n        <ul data-bind="foreach:filteredShippableCountriesGroupOne">\n            <li>\n                <span data-bind="text: $data"></span>\n            </li>\n        </ul>\n        <ul data-bind="visible: shippableCountriesGroupTwoVisible, foreach:filteredShippableCountriesGroupTwo">\n            <li>\n                <span data-bind="text: $data"></span>\n            </li>\n        </ul>\n    </div>\n    <div class="shipping-restrictions-no-matches" data-bind="visible: noMatchesVisible">\n        <span data-bind="text: noMatches"></span>\n    </div>\n</div>'})),define("Components/shipping-restrictions-content/shipping-restrictions-content",["ko","text!./shipping-restrictions-content.html"],(function(ue,he){return{viewModel:function i(he){this.resources=he.state.resources,this.countryFilterLabel=this.resources.pdp_shipping_restrictions_filter_countries_label,this.noMatches=this.resources.pdp_shipping_restrictions_error_no_matching_countries_message,this.description=he.data.Description,this.shippableCountries=ue.observableArray(he.data.ShippableCountries),this.countryFilter=ue.observable(""),this.filteredShippableCountries=ue.computed(function(){return this.countryFilter||this.countryFilter()?ue.utils.arrayFilter(this.shippableCountries(),function(ue){return ue.toLowerCase().indexOf(this.countryFilter().toLowerCase())>=0}.bind(this)):this.shippableCountries()}.bind(this)),this.filteredShippableCountriesGroupOne=ue.computed(function(){if(this.filteredShippableCountries){var ue=Math.ceil(this.filteredShippableCountries().length/2);return this.filteredShippableCountries().slice(0,ue)}return[]}.bind(this)),this.filteredShippableCountriesGroupTwo=ue.computed(function(){if(this.filteredShippableCountries){var ue=Math.ceil(this.filteredShippableCountries().length/2);return this.filteredShippableCountries().slice(ue)}return[]}.bind(this)),this.shippableCountriesVisible=ue.computed(function(){return this.filteredShippableCountriesGroupOne&&this.filteredShippableCountriesGroupOne().length>0}.bind(this)),this.shippableCountriesGroupTwoVisible=ue.computed(function(){return this.filteredShippableCountriesGroupTwo&&this.filteredShippableCountriesGroupTwo().length>0}.bind(this)),this.noMatchesVisible=ue.computed(function(){return!this.shippableCountriesVisible()}.bind(this))},template:he}})),define("text!Components/delivery-and-returns-content/delivery-and-returns-content.html",[],(function(){return'<div class="delivery-and-returns-content">\n    <div class="deliver-to">\n        \x3c!-- ko if : !isMobile--\x3e\n        <div class="current-country" data-bind="attr: { \'aria-label\': content.destination.label + \' \' + content.destination.selected.name }">\n            <span aria-hidden="true" class="country-label" data-bind="text: content.destination.label"></span>\n            <span aria-hidden="true" class="country-name dr-flag" data-bind="css: getCountryCode(), text: content.destination.selected.name"></span>\n        </div>\n        <div class="country-selection">\n            <div class="text-overlay"></div>\n            <button class="link" data-bind="click: countrySelectionClicked">\n                <span data-bind="text: content.destination.changeCountry"></span>\n            </button>\n        </div>\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko if : isMobile--\x3e\n        <button class="link" data-bind="click: countrySelectionClicked">\n            <div class="current-country">\n                <span class="country-label" data-bind="text: content.destination.label"></span>\n                <span class="country-name dr-flag" data-bind="css: getCountryCode(), text: content.destination.selected.name"></span>\n            </div>\n            <div class="country-selection">\n                <div class="text-overlay"></div>\n                <span class="product-chevron" data-bind="text: content.destination.changeCountry"></span>\n            </div>\n        </button>\n        \x3c!-- /ko --\x3e\n    </div>\n\n    \x3c!-- ko if: isUsa() --\x3e\n    <div data-bind="component: { name: \'delivery-and-returns-content-link\', params: { data: { content: content, countryCode: getCountryCode() }, state: state } }"></div>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: !isUsa() --\x3e\n    <div data-bind="component: { name: \'delivery-and-returns-content-table\', params: { data: { content: content, closeModalCallback: closeModalCallback }, state: state } }"></div>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: showPremier--\x3e\n    <div class="premier-delivery">\n        <div class="premier-image">\n            <img data-bind="attr: { src: content.premier.image }" alt=""/>\n        </div>\n        <div class="premier-text">\n            <h2 data-bind="text: content.premier.title"></h2>\n            <span data-bind="text: content.premier.text"></span>\n            <a class="premier-link" data-bind="text: content.premier.linkText, attr : {href: content.premier.link}" target="_blank"></a>\n        </div>\n    </div>\n    \x3c!-- /ko --\x3e\n    <div class="returns">\n        <div class="information-icon sprite product-information"></div>\n        <div class="information-text">\n            <h2 data-bind="text: content.returns.title"></h2>\n            <span data-bind="html: buildReturnsParagraph()"></span>\n        </div>\n    </div>\n</div>'})),define("Components/delivery-and-returns-content/delivery-and-returns-content",["ko","text!./delivery-and-returns-content.html","PageConfig"],(function(ue,he,pe){return{viewModel:function n(ue){this.content=ue.data.content,this.countrySelectedCallback=ue.data.showCountrySelectionCallback,this.closeModalCallback=ue.data.closeModalCallback,this.showPremier=null!==this.content.premier,this.isMobile="mobile"===pe.platform,this.state=ue.state,this.resources=this.state.resources,this.countrySelectionClicked=function(){this.countrySelectedCallback()},this.getCountryCode=function(){return this.content.destination.selected["2-iso"].toLowerCase()}.bind(this),this.isUsa=function(ue){return"us"===this.getCountryCode(ue)}.bind(this),this.getReturnRedirectLink=function(){return this.content.returns.link+"?country="+this.getCountryCode()}.bind(this),this.buildReturnsParagraph=function(){return this.resources.pdp_delivery_and_returns_returns_info_link_text.replace("%{link}",'<a href="'+this.getReturnRedirectLink()+'" target="_blank">').replace("%{linkEnd}",'</a><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#2D2D2D" fill-rule="evenodd" d="M14 12h2V2H6v2h8v8zm0 2v4H0V4h4V0h14v14h-4zM4 6H2v10h10V6H4z"/></svg>')}.bind(this)},template:he}})),define("text!Components/delivery-and-returns-countries/delivery-and-returns-countries.html",[],(function(){return'<div class="delivery-and-returns-countries">\n    \x3c!-- ko if : !isMobile --\x3e\n    <div class="current-country-cancel">\n        <div class="current-country" data-bind="attr: { \'aria-label\': destination.label + \' \' + destination.selected.name }">\n            <span aria-hidden="true" class="country-label" data-bind="text: destination.label"></span>\n            <span aria-hidden="true" class="country-name dr-flag" data-bind="css: getFlagCountryCode(destination.selected[\'2-iso\']), text: destination.selected.name"></span>\n        </div>\n        <div class="cancel-country-selection">\n            <div class="text-overlay"></div>\n            <button class="link" data-bind="click: cancelClicked"><span data-bind="text: cancelLabel"></span></button>\n        </div>\n    </div>\n    <hr aria-hidden="true" />\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if : isMobile--\x3e\n    <div class="cancel-country-selection-container">\n        <div class="cancel-country-selection">\n            <button class="link" data-bind="click: cancelClicked"><span data-bind="text: cancelLabel"></span></button>\n        </div>\n    </div>\n    \x3c!-- /ko --\x3e\n    <div class="countries-filter">\n        <label for="countries-input" data-bind="text: countryFilterLabel"></label>\n        <div class="country-filter-input">\n            <input id="countries-input" type="text" data-bind="textInput: countryFilter" />\n            <button class="link" data-bind="visible: clearButtonVisible, text: clearCountryFilterLabel, click: clearCountryFilter"></button>\n        </div>\n    </div>\n    <div class="matching-countries" data-bind="visible: countriesVisible">\n        <ul data-bind="foreach: filteredCountries">\n            <li>\n                <button class="link dr-flag" data-bind="css: $parent.getFlagCountryCode(Code), text: Name, click: $parent.countryClicked.bind($data)"></button>\n            </li>\n        </ul>\n    </div>\n    <div class="no-matches" data-bind="visible: noMatchesVisible">\n        <span data-bind="text: noMatches"></span>\n    </div>\n</div>'})),define("Components/delivery-and-returns-countries/delivery-and-returns-countries",["ko","text!./delivery-and-returns-countries.html","PageConfig"],(function(ue,he,pe){return{viewModel:function n(he){this.isMobile="mobile"===pe.platform,this.resources=he.state.resources,this.countrySelectedCallback=he.data.countrySelectionCallback,this.cancelCallback=he.data.cancelCallback,this.cancelLabel=this.resources.pdp_delivery_and_returns_cancel_button,this.clearCountryFilterLabel=this.resources.pdp_delivery_and_returns_clear_button,this.countryFilterLabel=this.resources.pdp_delivery_and_returns_filter_countries_label,this.noMatches=this.resources.pdp_delivery_and_returns_error_no_matching_countries_message;var me=he.data.content;me.sort((function(ue,he){var pe=ue.Name,me=he.Name;return me>pe?-1:pe>me?1:0})),this.countries=ue.observableArray(me),this.destination=he.data.currentDestination,this.countryFilter=ue.observable(""),this.clearButtonVisible=ue.computed(function(){return this.countryFilter().length>0}.bind(this)),this.getFlagCountryCode=function(ue){return ue.toLowerCase()}.bind(this),this.countryClicked=function(ue){this.countrySelectedCallback(ue.Code)}.bind(this),this.cancelClicked=function(){this.cancelCallback()}.bind(this),this.clearCountryFilter=function(){this.countryFilter("")}.bind(this),this.filteredCountries=ue.computed(function(){return this.countryFilter||this.countryFilter()?ue.utils.arrayFilter(this.countries(),function(ue){return ue.Name.toLowerCase().indexOf(this.countryFilter().toLowerCase())>=0}.bind(this)):this.countries()}.bind(this)),this.countriesVisible=ue.computed(function(){return this.filteredCountries().length>0}.bind(this)),this.noMatchesVisible=ue.computed(function(){return!this.countriesVisible()}.bind(this))},template:he}})),define("text!Components/error-container/error-container.html",[],(function(){return'<div class="error-container">\n    <span class="product-information">Info</span>\n    <span class="error" data-bind="html: error"></span>\n</div>'})),define("Components/error-container/error-container",["ko","text!./error-container.html"],(function(ue,he){return{viewModel:function i(ue){this.error=ue.data.content},template:he}})),define("Components/product-details/product-details",["ko","ProductUtils/Analytics","ProductUtils/Window","ProductUtils/debouncer","Providers/SdkProvider"],(function(ue,he,pe,me,fe){return{viewModel:function r(ge){this.isOpen=ue.observable(!1),this.id=void 0!==ge.data?ge.data.id:null,this.containerHeight=ue.observable(),this.overflowContainer=pe.document.getElementById("product-details-container"),this.setupDetailsContainer=function(){this.productDetailsMaxHeightOpen=this.overflowContainer.scrollHeight+"px"},this.setupDetailsContainer(),this.toggle=function(){this.isOpen()?this.close():this.open()},this.open=function(){he.firePageInteraction({context:"showMore",productIID:this.id}),this.containerHeight(this.productDetailsMaxHeightOpen),this.isOpen(!0)},this.close=function(){he.firePageInteraction({context:"showLess",productIID:this.id}),this.containerHeight(null),this.isOpen(!1)},pe.addEventListener("resize",me.debounce(this.setupDetailsContainer.bind(this),200)),fe.getFeatures().then(function(ue){ue.ifActive("emf-109-pdp-expanded-details",!0).then(function(ue){ue&&ue.isActive&&(this.isOpen(!0),this.containerHeight(this.productDetailsMaxHeightOpen))}.bind(this))}.bind(this))}}})),define("ProductUtils/OnElementInView",["$","ko"],(function(ue,he){return this.currentlyInView=null,this.target=null,this.sourceElement=null,this.callback=null,this.timer=null,this.cumulativeOffset=function(ue){var he=0,pe=0;do{he+=ue.offsetTop||0,pe+=ue.offsetLeft||0,ue=ue.offsetParent}while(ue);return{top:he,left:pe}},this.checkScrollPosition=function(){var he=!1,pe=ue(this.sourceElement).outerHeight()+this.target.outerHeight()/2,me=window.innerHeight,fe=this.cumulativeOffset(this.target[0]).top+pe;(document.body.scrollTop+me>fe||document.documentElement.scrollTop+me>fe)&&(he=!0),(null===this.currentlyInView||he!==this.currentlyInView)&&(this.currentlyInView=he,this.callback({isInView:he}))},this.onScroll=function(){this.timer&&window.clearTimeout(this.timer),this.timer=window.setTimeout(this.checkScrollPosition.bind(this),100)},he.bindingHandlers.onElementInView={update:function(pe,me){var fe=me(),ge=he.unwrap(fe);this.target=ue(ge.targetSelector),this.sourceElement=pe,this.callback=ge.callback,ge.enabled?(this.checkScrollPosition(),window.addEventListener("scroll",this.onScroll,!1),window.addEventListener("resize",this.onScroll,!1)):(window.removeEventListener("scroll",this.onScroll,!1),window.removeEventListener("resize",this.onScroll,!1))}},this})),define("ProductUtils/Performance",["ko"],(function(ue){ue.bindingHandlers.markAndMeasure={init:function(he,pe){var me=ue.unwrap(pe());window.asos.performance.markAndMeasure(me)}}})),define("Pages/FullProduct",["ko","ProductUtils/ComponentLoader","Asos.Utils.MediaPlayers","ProductUtils/StockPrice","Models/VariantDecorator","Utils","Components/product-image/product-image","Components/product-price/product-price","Components/social-share/social-share","Components/content/content","Components/out-of-stock/out-of-stock","Components/size-guide/size-guide","Components/might-like/might-like","Components/buy-the-look/buy-the-look","Components/product-gallery/product-gallery","Components/product-colour/product-colour","Components/product-size/product-size","Components/product-ratings/product-ratings","Components/delivery-and-returns/delivery-and-returns","Components/shipping-restrictions/shipping-restrictions","Components/stock-price-retry/stock-price-retry","Components/save-button/save-button","Components/add-item/add-item","Components/payment-promo/payment-promo","Components/side-modal/side-modal","ProductUtils/UrlUtils","ProductUtils/Analytics","Components/fit-analytics/fit-analytics","Components/toast/toast","PageConfig","ProductUtils/OutOfStockAnimator","ProductUtils/NewRelicLogger","ProductUtils/EnhanceNewRelicPageView","Components/delivery-and-returns-content-table/delivery-and-returns-content-table","Components/delivery-and-returns-content-link/delivery-and-returns-content-link","ProductUtils/SchemaOrgTemplate","Components/error-banner/error-banner","Providers/SdkProvider","ProductUtils/MergeJson","ProductUtils/Breadcrumb","Components/shipping-restrictions-content/shipping-restrictions-content","Components/delivery-and-returns-content/delivery-and-returns-content","Components/delivery-and-returns-countries/delivery-and-returns-countries","Components/error-container/error-container","Components/product-gallery/product-gallery","Components/product-details/product-details","ProductUtils/ScrollTo","ProductUtils/OnElementInView","ProductUtils/Performance"],(function(ue,he,pe,me,fe,ge,ve,be,ye,Se,xe,we,ke,_e,Ie,Ce,Pe,Te,ze,Ae,Ee,Me,Le,Ve,Re,De,Oe,Ue,Fe,Ne,Be,$e,We,Ge,He,qe,je,Ze,Ye,Xe){return this.init=function(Se){function O(){function t(){he.forEach((function(ue){ue.style.display="none"}))}function n(){Be.subscribeToLoadingState(this.state)}function r(ue){var he=ue?"pg-in-stock":"pg-out-of-stock",pe=document.querySelectorAll(".asos-product");Array.prototype.forEach.call(pe,(function(ue){ue.classList.add(he)}))}function l(){tt.register({type:"content",name:"oos-label",elementId:"oos-label",useComponentTemplate:!1},Qe,this.state),document.getElementById("oos-label").style.display="block"}function C(){t(),ot.showStockPriceRetry(!1),r(!1),ot.productData={isInStock:!1},tt.register({type:"content",name:"aside-content-oos",elementId:"aside-content-oos",useComponentTemplate:!1},Qe,this.state),l(),n()}if(!rt){var he=[document.getElementById("size-select-skeleton"),document.getElementById("add-to-bag-skeleton"),document.getElementById("save-for-later-skeleton"),document.getElementById("price-skeleton")];if(Qe.isDeadProduct)C();else{var me=function U(ue){return et.getStockPrice(Qe,function(ue){r(ue.isInStock),ot.productData=(new fe).getData(ue,!ue.isInStock),tt.register({type:"content",name:"content1",elementId:"aside-content",useComponentTemplate:!1},ue,ot),tt.register({type:"content",name:"content2",elementId:"lower-content",useComponentTemplate:!1},ue,ot),We(),Oe.fireProductLoadEvent(ue,ot),ot.showStockPriceRetry(!1),ot.productData.isInStock||(n(),l()),qe.createAndInsertInToPage(ot,ue)}.bind(this),(function(ue){$e.logError(new Error($e.ERROR_TYPE.AjaxError),{action:"getStockPrice",message:ue}),t(),404!==ue.status||Qe.price&&Qe.price.currency?ot.showStockPriceRetry(!0):C()}),ue),U}();this.state.retryCallback=me.bind(this,!0)}tt.register({type:"content",name:"aside-content-retry",elementId:"aside-content-retry",useComponentTemplate:!1},Qe,this.state),tt.register({type:"product-details",name:"product-details",elementId:"product-details",useComponentTemplate:!1},Qe,this.state),tt.register({type:"content",name:"content3",elementId:"gallery-content",useComponentTemplate:!1},Qe,this.state),ue.components.register("product-ratings",Te),ue.components.register("product-gallery",Ie),ue.components.register("size-guide",we),ue.components.register("product-image",ve),ue.components.register("shipping-restrictions",Ae),ue.components.register("product-price",be),ue.components.register("out-of-stock",xe),ue.components.register("might-like",ke),ue.components.register("social-share",ye),ue.components.register("buy-the-look",_e),ue.components.register("stock-price-retry",Ee),ue.components.register("product-colour",Ce),ue.components.register("product-size",Pe),ue.components.register("delivery-and-returns",ze),ue.components.register("delivery-and-returns-content-table",Ge),ue.components.register("delivery-and-returns-content-link",He),ue.components.register("asos-video-player-prod",pe.videoPlayer),ue.components.register("asos-spin-viewer-prod",pe.spinViewer),ue.components.register("save-button",Me),ue.components.register("add-item",Le),ue.components.register("fit-analytics",Ue),ue.components.register("toast",Fe),ue.components.register("payment-promo",Ve),ue.components.register("side-modal",Re),ue.components.register("error-banner",je),rt=!0}}$e.init($e.PAGE_TYPE.PRD);var Ze=window.asos.pdp.config.product,Ke=window.asos.pdp.config.translations,Je=window.asos.pdp.config.ratings,Qe="string"==typeof Ze?JSON.parse(Ze):Ze,et=new me,tt=new he,it=ge.QueryString.getValue("colourWayId")&&parseInt(decodeURIComponent(ge.QueryString.getValue("colourWayId")).trim(),10);this.isMobile="mobile"===Ne.platform,Qe||$e.logError(new Error($e.ERROR_TYPE.ParseError),{action:"PageInit",message:"server-side product data missing or invalid"});var nt=(new De).getVariantFromUrl(window.location.href,Qe.variants);if(!nt&&it&&Ze.totalNumberOfColours>1&&(Ze.isOneSize||Ze.isNoSize))for(var st=0;st<Qe.variants.length;st++)if(Qe.variants[st].colourWayId===it){nt=Qe.variants[st];break}this.state={selectedColour:ue.observable(),selectedSize:ue.observable(),showNoColourSelectedWarning:ue.observable(!1),showNoSizeSelectedWarning:ue.observable(!1),showAddToBagError:ue.observable(!1),addToBagErrorMessage:ue.observable(""),resources:Ke,features:Ye(Se,window.asos.pdp.config.features),gender:Qe.gender,isInStock:ue.observable(!0),showStockPriceRetry:ue.observable(!1),defaultVariant:nt,showSizeGuide:ue.observable(!1),fitAnalyticsViewModel:ue.observable(),sellingFast:Qe.sellingFast,zeekitEnabled:Qe.zeekit&&Qe.zeekit.enabled,useKnockoutBTL:ue.observable(!1),displayPrice:ue.observable(0),CAROUSEL_LOADING_STATE:{NOT_LOADED:0,NO_DATA:1,HAS_DATA:2},submodulesCompleted:{buyTheLook:ue.observable(0),recommendations:ue.observable(0)},toast:{displayMessage:ue.observable(!1),message:ue.observable()},errorBanner:{displayError:ue.observable(!1),message:ue.observable("")},paymentPromotions:Qe.paymentPromotions,hasPaymentPromotionAvailable:Qe.hasPaymentPromotionAvailable,ratings:Je};var rt=!1,ot=this.state;Xe.replaceSearchBreadcrumb(Ke.pdp_breadcrumbs_search_results_for),document.addEventListener("DOMContentLoaded",function(){O.call(this)}.bind(this)),document.getElementById("aside-content")&&document.getElementById("lower-content")&&document.getElementById("product-details")&&document.getElementById("gallery-content")&&document.getElementById("oos-label")&&O.call(this)},this.init})),define("text!Components/mix-and-match/mix-and-match.html",[],(function(){return'<div class="product-hero">\n    <div data-bind=\'component: { name: "delivery-and-returns", params: {state: state, hideDeliveryLink: false}}\'></div>\n    \x3c!-- ko if: isMobile --\x3e\n        <div class="separator"></div>\n    \x3c!-- /ko --\x3e\n</div>\n\n<ul>\n    \x3c!-- ko foreach: products --\x3e\n    <li class="item">\n        <a data-bind="click: $parent.isMobile ? $parent.navigateToFullProduct.bind($data, $index()) : $parent.showOverlay.bind($data, $index(), $element)">\n            <div class="product-image" data-bind=\'component: {\n                name: "product-image",\n                params: {\n                    imgUrl: productImage.url+"?$S$&wid=75&fit=constrain",\n                    hideSaveButton: true\n                }\n             }\'></div>\n        </a>\n        <div class="product-info">\n            \x3c!--Product title--\x3e\n            <a data-bind="click: $parent.isMobile ? $parent.navigateToFullProduct.bind($data, $index()) : $parent.showOverlay.bind($data, $index(), $element)">\n                <div class="product-title" data-bind=\'text: name\'></div>\n                <div class="product-price" data-bind=\'component: { name: "product-price", params: {state: $parent.getState($index()), hideDeliveryLink: true, showGermanVatMessage: $parent.options.showGermanVatMessage }}\'></div>\n            </a>\n\n            \x3c!-- ko if: $parent.isMobile && state.hasPaymentPromotionAvailable --\x3e\n                <div class="payment-promo mix-and-match-mobile" data-bind=\'component: { name: "payment-promo", params: { state: state, data: { price: ko.observable($parent.getState($index()).productData.minPrice.value) } } }\'></div>\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: $parent.isMobile --\x3e\n            <a data-bind="click: $parent.showOverlay.bind($data, $index(), $element)">\n                <div class="product-information"></div>\n            </a>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: $parent.isOutOfStock($index()) --\x3e\n            <span class="out-of-stock" data-bind="text: $parent.state.resources.pdp_status_mix_and_match_out_of_stock"></span>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: !$parent.isOutOfStock($index()) --\x3e\n            <div class="product-colour" data-bind=\'component:{\n                name: "product-colour",\n                params: {\n                    hideLabels: false,\n                    useShortSelectColourLabel: true,state: $parent.getState($index()),\n                    data: $data}\n                }\'></div>\n            \x3c!-- /ko --\x3e\n\n        </div>\n        \x3c!-- ko if: !$parent.isOutOfStock($index()) --\x3e\n        <div data-bind=\'component:{\n            name: "product-size",\n            params: {\n                hideLabels: false,\n                hideLowInStock: false,\n                hideOnOutOfStock: true,\n                showSizeGuide: true,\n                isMixMatch: true,\n                isMobile: $parent.isMobile,\n                doNotSelectDefaultSize: !$parent.isMobile,\n                displayOnlyAsDropDown: !$parent.isMobile,\n                state: $parent.getState($index()),\n                data: $data,\n                context: "mixmatch",\n                selectorIndex: $index()}\n            }\'></div>\n        \x3c!-- ko if: $parent.isMobile --\x3e\n        <div id="mix-and-match-add-item" data-bind=\'component:{name: "add-item",\n                     params:{\n                         state: $parent.getState($index()),\n                         initiator : "main"\n                     }}\'></div>\n\n        <div id="mix-and-match-save-button" data-bind=\'component:{name: "save-button",\n                     params:{\n                         variants: variants,\n                         state: [$parent.getState($index())],\n                         isMixMatch: true\n                     }}\'></div>\n        <div class="basic-error-box" data-bind="visible: $parent.getState($index()).showAddToBagError, html: $parent.getState($index()).addToBagErrorMessage" style="display:none">\n        </div>\n        \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko if: $parent.isMobile --\x3e\n        <div class="separator"></div>\n        \x3c!-- /ko --\x3e\n\n    </li>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: !isMobile --\x3e\n    <li class="item">\n        <div class="separator end-of-products"></div>\n    </li>\n    <li class="total-price-item">\n        <div data-bind=\'component: { name: "total-price", params: { variants: variants, state: getState(0), globalState: state } }\'></div>\n    </li>\n    <li class="item" data-bind="visible : showNoSizesSelectedWarning">\n        <div class="error-message" id="selectSizesError" data-bind="html: state.resources.pdp_status_error_mix_and_match_select_product"></div>\n    </li>\n    <li class="item" data-bind="visible : showAddToBagError">\n        <div class="error-message" data-bind="html: addToBagErrorMessage"></div>\n    </li>\n    <li class="item">\n        <div id="mix-and-match-add-items" data-bind=\'component:{name: "add-items",\n                     params:{\n                         variants: variants,\n                         state: state,\n                         firstProductState: getState(0),\n                         initiator : "main"\n                     }}\'></div>\n        <div id="mix-and-match-save-button" data-bind=\'component:{name: "save-button",\n                     params:{\n                         variants: variants,\n                         state: context.States,\n                         isMixMatch: true,\n                         productName: $parent.product.name\n                     }}\'></div>\n    </li>\n    \x3c!-- /ko --\x3e\n</ul>\n'})),define("Components/mix-and-match/mix-and-match",["ko","text!./mix-and-match.html","ProductUtils/ModalWindow","ProductUtils/Analytics","ProductUtils/UrlUtils","PageConfig"],(function(ue,he,pe,me,fe,ge){return{viewModel:function o(ue){this.context=ue.data,this.products=ue.data.products,this.state=ue.state,this.options=ue.options,this.isMobile="mobile"===ge.platform,this.showNoSizesSelectedWarning=ue.state.showNoSizesSelectedWarning,this.showAddToBagError=ue.state.showAddToBagError,this.addToBagErrorMessage=this.state.addToBagErrorMessage,this.variants=[],this.hasPaymentPromotionAvailable=ue.data.hasPaymentPromotionAvailable;for(var he=new fe,ve=this.products.length;ve--;)this.variants.push(this.context.States[ve].selectedSize);this.getState=function(ue){return this.context.States[ue]}.bind(this),this.isOutOfStock=function(ue){return!this.getState(ue).productData.isInStock}.bind(this),this.showOverlay=function(he,fe){me.firePageInteraction({context:"openModal",modalType:"mixAndMatch",productIID:this.products[he].id});var ge=new pe;this.isMobile&&ge.setTitle(this.state.resources.pdp_description_product_information_title),ge.addComponent("mix-and-match-product",{productId:this.products[he].id,playerParams:ue.playerParams},this.state),ge.setClass("mix-and-match-overlay"),ge.open({showSpinner:!0,openerElement:fe})}.bind(this),this.getProductLink=function(ue){return he.getProductUrl(ue.name,this.context.brandName,ue.id)+this.getQueryString()}.bind(this),this.navigateToFullProduct=function(ue){var he=this.getProductLink(this.products[ue]);this.navigateTo(he)}.bind(this),this.navigateTo=function(ue){window.location=ue},this.getQueryString=function(){return document.location.search}},template:he}})),define("text!Components/total-price/total-price.html",[],(function(){return'<h4 class="number-of-items" data-bind="text: selectedItemsText"></h4><h4 class="total-price" data-bind="text: totalPrice"></h4>\n\x3c!-- ko if : globalState.hasPaymentPromotionAvailable --\x3e\n    <div class="payment-promo mix-and-match-desktop" data-bind=\'component: { name: "payment-promo", params: { state: globalState, data: { price: totalPriceValue } } }\'></div>\n\x3c!-- /ko --\x3e'})),define("Components/total-price/total-price",["ko","text!./total-price.html","Asos.Web.Currency.Formatter","PageConfig"],(function(ue,he,pe,me){return{viewModel:function s(he){var fe=he.variants;this.state=he.state,this.globalState=he.globalState,this.selectedItemsText=ue.observable(""),this.totalPriceValue=ue.observable(0),this.totalPrice=ue.computed(function(){for(var ue=fe.length,ge=0,ve=0;ue--;){var be=fe[ue]();be&&(ge+=be.price.current.value,ve++)}return this.totalPriceValue(ge),this.selectedItemsText(he.state.resources.pdp_status_number_of_selected_items.replace("%{count}",ve)),pe.formatPrice(this.totalPriceValue().toFixed(2),me.language,me.currency)}.bind(this))},template:he}})),define("text!Components/mix-and-match-product/mix-and-match-product.html",[],(function(){return'\x3c!-- ko if: product() != undefined --\x3e\n\n<div>\n\n    <section>\n        <div class="layout-width">\n            \x3c!-- ko if: !isMobile --\x3e\n            <div id="gallery-content" data-bind="visible: !isMobile">\n                <div class="product-gallery" role="region" data-bind=\'attr: {"aria-label": state.resources.pdp_media_gallery_label }, component: { name: "product-gallery", params: {state: state,  data: { productName: product().name, rootElement: $element, id: product().id, images: product().media.images, map: {}, defaultColour: product().defaultColour, media: product().media, playerParams: playerParams  }}}\'></div>\n            </div>\n            \x3c!-- /ko --\x3e\n\n            <div class="layout-aside" id="aside-content">\n                \x3c!-- ko if: !state.productData.isInStock --\x3e\n                    <h3 class="product-out-of-stock-label" data-bind="text: state.resources.pdp_status_mix_and_match_out_of_stock"></h3>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: !isMobile --\x3e\n                <h1 class="product-hero" data-bind="text: product().name"></h1>\n                <div class="product-price" id="product-price" data-bind=\'component: { name: "product-price", params: {state: state}}\'></div>\n                <div id="product-colour" data-bind=\'component:{\n                            name: "product-colour",\n                            params: {\n                                hideLabels: false,\n                                useShortSelectColourLabel: false,\n                                state: state,\n                                data: product(),\n                                hideOnOutOfStock : true}\n                            }\'></div>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: state.productData.isInStock --\x3e\n                <div class="product-details" id="product-details">\n                    <div class="product-description" data-bind="visible: info().productDetailsVisible">\n                        <h2 data-bind="text: state.resources.pdp_description_product_details_title"></h2>\n                        <p data-bind="html: info().productDetails"></p>\n                    </div>\n                    <div class="product-description" data-bind="visible: info().sizeAndFitVisible">\n                        <h2 data-bind="text: state.resources.pdp_description_size_and_fit_title"></h2>\n                        <p data-bind="html: info().sizeAndFit"></p>\n                    </div>\n                    <div class="product-description" data-bind="visible: info().careInfoVisible">\n                        <h2 data-bind="text: state.resources.pdp_description_care_info_title"></h2>\n                        <p data-bind="html: info().careInfo"></p>\n                    </div>\n                    <div class="product-description" data-bind="visible: info().aboutMeVisible">\n                        <h2 data-bind="text: state.resources.pdp_description_about_me_title"></h2>\n                        <p data-bind="html: info().aboutMe"></p>\n                    </div>\n                    <div class="product-description" data-bind="visible: info().brandDescriptionVisible">\n                        <h2 data-bind="text: state.resources.pdp_description_brand_title"></h2>\n                        <p data-bind="html: info().brandDescription"></p>\n                    </div>\n                    <div class="product-description">\n                        <h2 data-bind="text: state.resources.pdp_description_product_code_title"></h2>\n                        <p data-bind="html: info().productCode"></p>\n                    </div>\n                </div>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko if: !state.productData.isInStock --\x3e\n                    <p class="product-code">\n                        <span class="label" data-bind="text: state.resources.pdp_description_product_code_title"></span>\n                        <span data-bind="text:info().productCode"></span>\n                    </p>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </section>\n\n    <a class="product-page-button" data-bind="attr: { href: productLink}, text: state.resources.pdp_mix_and_match_modal_go_to_product"></a>\n</div>\n\n\x3c!-- /ko  --\x3e\n'})),define("Models/ProductDescription",[],(function(){function e(){this.productDetails="",this.productDetailsVisible=!1,this.sizeAndFit="",this.sizeAndFitVisible=!1,this.careInfo="",this.careInfoVisible=!1,this.aboutMe="",this.aboutMeVisible=!1,this.brandDescription="",this.brandDescriptionVisible=!1,this.productCode=""}return function(){this.getProductDescriptionViewModel=function(ue){var he=new e;ue.description&&(he.productDetails=ue.description,he.productDetailsVisible=!0);var pe=ue.info;return pe&&(pe.sizeAndFit&&(he.sizeAndFit=pe.sizeAndFit,he.sizeAndFitVisible=!0),pe.careInfo&&(he.careInfo=pe.careInfo,he.careInfoVisible=!0),pe.aboutMe&&(he.aboutMe=pe.aboutMe,he.aboutMeVisible=!0)),ue.brand&&ue.brand.description&&(he.brandDescription=ue.brand.description,he.brandDescriptionVisible=!0),he.productCode=ue.productCode,he}}})),define("Components/mix-and-match-product/mix-and-match-product",["ko","text!./mix-and-match-product.html","ProductUtils/FullProductApiClient","Models/VariantDecorator","Models/ProductDescription","$","PageConfig","ProductUtils/UrlUtils"],(function(ue,he,pe,me,fe,ge,ve,be){return{viewModel:function c(he){var ge=new pe;this.urlUtils=new be,this.product=ue.observable(),this.info=ue.observable(),this.isMobile="mobile"===ve.platform,this.playerParams=he.data.playerParams,this.dataReceived=he.data.loadedCallback,this.productLink=ue.observable(),this.state={selectedColour:ue.observable(),selectedSize:ue.observable(),showNoColourSelectedWarning:ue.observable(!1),showNoSizeSelectedWarning:ue.observable(!1),resources:he.state.resources},ge.getFullProduct(he.data.productId,!1,"MixAndMatch").done(function(ue){this.state.productData=(new me).getData(ue,!0);var he=new fe;this.info(he.getProductDescriptionViewModel(ue)),this.product(ue),this.productLink(this.urlUtils.getProductUrl(ue.name,ue.brand.name,ue.id)),this.dataReceived()}.bind(this))},template:he}})),define("text!Components/add-items/add-items.html",[],(function(){return'<div class="add-items">\n    <div class="is-add-items-saving" data-bind="visible: isBusy"></div>\n    <span class="aria-live" aria-live="polite" aria-role="status" data-bind="{ text: ariaLiveText, attr: { \'aria-label\': ariaLiveText }}"></span>\n    <a href="#" class="add-button" data-bind="click: addToBag, css : { \'is-disabled\' : isBusy }, attr: { \'aria-label\': resources.pdp_cta_add_to_bag }, markAndMeasure: \'pdp:add_to_bag_interactive\'">\n        <span class="product-tick" data-bind="visible: addedToBag, text: iconText"></span>\n        <span data-bind="text: buttonText"></span>\n    </a>\n</div>'})),define("Components/add-items/add-items",["ko","text!./add-items.html","ProductUtils/Bag","ProductUtils/ScrollTo","$"],(function(ue,he,pe,me,fe){return{viewModel:function r(he){this.variants=he.variants,this.resources=he.state.resources,this.addedToBag=ue.observable(!1),this.productState=he.firstProductState,this.topOfPage=fe("#top-of-page"),this.showNoSizesSelectedWarning=he.state.showNoSizesSelectedWarning,this.showAddToBagError=he.state.showAddToBagError,this.addToBagErrorMessage=he.state.addToBagErrorMessage,this.moreThanOneProductSelected=ue.observable(!1),this.buttonText=ue.observable(""),this.isBusy=ue.observable(!1),this.ariaLiveText=ue.computed((function(){var ue=this.addToBagErrorMessage();return ue||(this.addedToBag()?this.resources.pdp_status_add_to_bag_success:"")}),this),this.iconText=ue.computed(function(){return this.addedToBag()?"added to basket":"add to basket"}.bind(this)),this.setButtonTextAdd=function(){this.moreThanOneProductSelected()?this.buttonText(this.resources.pdp_cta_mix_and_match_add_items):this.buttonText(this.resources.pdp_cta_mix_and_match_add_item)}.bind(this),this.setButtonTextAdded=function(){this.moreThanOneProductSelected()?this.buttonText(this.resources.pdp_status_mix_and_match_add_items_success):this.buttonText(this.resources.pdp_status_mix_and_match_add_item_success)}.bind(this),this.selectedVariants=ue.computed(function(){for(var ue=this.variants.length,he=[];ue--;){var pe=this.variants[ue]();pe&&he.push(pe)}return this.showNoSizesSelectedWarning(!1),this.moreThanOneProductSelected(he.length>1),this.setButtonTextAdd(),this.addedToBag(!1),he}.bind(this));var ge,ve=new pe(he,he.initiator);this.addToBag=function(){return!this.isBusy()&&(this.revertState(),void(0===this.selectedVariants().length?(this.showNoSizesSelectedWarning(!0),this.productState.showNoSizeSelectedWarning(!0)):(this.isBusy(!0),ve.addItems(this.selectedVariants(),this.addToBagResult))))}.bind(this),this.addToBagResult=function(ue){this.isBusy(!1),this.addedToBag(ue.success),ue.success?(this.setButtonTextAdded(),me.scrollToElement(this.topOfPage),ge&&window.clearTimeout(ge),ge=setTimeout(this.revertState,5e3)):(this.showAddToBagError(!0),this.addToBagErrorMessage(ue.error))}.bind(this),this.revertState=function(){this.setButtonTextAdd(),this.addedToBag(!1),this.showAddToBagError(!1),this.addToBagErrorMessage(""),this.isBusy(!1)}.bind(this)},template:he}})),define("Pages/MixAndMatch",["ko","ProductUtils/ComponentLoader","Asos.Utils.MediaPlayers","ProductUtils/StockPrice","Models/VariantDecorator","Utils","Components/product-image/product-image","Components/product-price/product-price","Components/add-item/add-item","Components/payment-promo/payment-promo","Components/social-share/social-share","Components/content/content","Components/out-of-stock/out-of-stock","Components/size-guide/size-guide","Components/side-modal/side-modal","Components/might-like/might-like","Components/buy-the-look/buy-the-look","Components/mix-and-match/mix-and-match","Components/product-gallery/product-gallery","Components/product-colour/product-colour","Components/product-size/product-size","Components/total-price/total-price","Components/delivery-and-returns/delivery-and-returns","Components/delivery-and-returns-content-table/delivery-and-returns-content-table","Components/delivery-and-returns-content-link/delivery-and-returns-content-link","Components/stock-price-retry/stock-price-retry","Components/mix-and-match-product/mix-and-match-product","Components/save-button/save-button","Components/add-items/add-items","Components/add-item/add-item","ProductUtils/Analytics","Components/toast/toast","PageConfig","ProductUtils/NewRelicLogger","ProductUtils/EnhanceNewRelicPageView","ProductUtils/Breadcrumb","Components/product-details/product-details","ProductUtils/ScrollTo","ProductUtils/Performance"],(function(ue,he,pe,me,fe,ge,ve,be,ye,Se,xe,we,ke,_e,Ie,Ce,Pe,Te,ze,Ae,Ee,Me,Le,Ve,Re,De,Oe,Ue,Fe,Ne,Be,$e,We,Ge,He,qe){return this.init=function(ye){function u(){if(!Xe){var he=function n(he){return Ze.getStockPrice(je,function(he){He(),Be.fireMixMatchLoadEvent(he);for(var pe=0;pe<he.products.length;pe++){var me={selectedColour:ue.observable(),selectedSize:ue.observable(),showNoColourSelectedWarning:ue.observable(!1),showNoSizeSelectedWarning:ue.observable(!1),showAddToBagError:ue.observable(!1),addToBagErrorMessage:ue.observable(""),productImage:he.products[pe].productImage.url,resources:Ce,features:ye,session:Pe.session};me.productData=(new fe).getData(he.products[pe],!0),Ye.push(me)}je.States=Ye,Oe.register({type:"content",name:"content1",elementId:"aside-content",useComponentTemplate:!1},je,Pe),Oe.register({type:"content",name:"content2",elementId:"lower-content",useComponentTemplate:!1},je,Pe),Oe.register({type:"content",name:"mix-and-match-name",elementId:"mix-and-match-name",useComponentTemplate:!1},je,Pe),Pe.showStockPriceRetry(!1)}.bind(this),(function(ue){404===ue.status?(Pe.showStockPriceRetry(!1),Pe.productData={isInStock:!1},je.categories=[],Oe.register({type:"content",name:"aside-content-oos",elementId:"aside-content-oos",useComponentTemplate:!1},je,Pe)):Pe.showStockPriceRetry(!0)}),he),n}();this.state.retryCallback=he.bind(this,!0),Oe.register({type:"content",name:"aside-content-retry",elementId:"aside-content-retry",useComponentTemplate:!1},je,this.state),Oe.register({type:"content",name:"content3",elementId:"gallery-content",useComponentTemplate:!1},je,this.state),ue.components.register("out-of-stock",ke),ue.components.register("stock-price-retry",De),ue.components.register("product-gallery",ze),ue.components.register("size-guide",_e),ue.components.register("product-image",ve),ue.components.register("product-colour",Ae),ue.components.register("product-size",Ee),ue.components.register("product-price",be),ue.components.register("social-share",xe),ue.components.register("mix-and-match",Te),ue.components.register("total-price",Me),ue.components.register("delivery-and-returns",Le),ue.components.register("delivery-and-returns-content-table",Ve),ue.components.register("delivery-and-returns-content-link",Re),ue.components.register("asos-video-player-prod",pe.videoPlayer),ue.components.register("asos-spin-viewer-prod",pe.spinViewer),ue.components.register("save-button",Ue),ue.components.register("add-items",Fe),ue.components.register("add-item",Ne),ue.components.register("toast",$e),ue.components.register("payment-promo",Se),ue.components.register("side-modal",Ie),Xe=!0}}Ge.init(Ge.PAGE_TYPE.GRP);var we=window.asos.pdp.config.product,Ce=window.asos.pdp.config.translations;this.state={resources:Ce,features:ye,selectedColour:ue.observable(),showNoSizesSelectedWarning:ue.observable(!1),showAddToBagError:ue.observable(!1),addToBagErrorMessage:ue.observable(""),showStockPriceRetry:ue.observable(!1),toast:{displayMessage:ue.observable(!1),message:ue.observable()},CAROUSEL_LOADING_STATE:{NOT_LOADED:0,NO_DATA:1,HAS_DATA:2},submodulesCompleted:{buyTheLook:ue.observable(0),recommendations:ue.observable(0)},paymentPromotions:we.paymentPromotions,hasPaymentPromotionAvailable:we.hasPaymentPromotionAvailable},this.isMobile="mobile"===We.platform,qe.replaceSearchBreadcrumb(Ce.pdp_breadcrumbs_search_results_for),this.useProductIdForVideos=!0;var Pe=this.state,Oe=new he,je="string"==typeof we?JSON.parse(we):we;je||Ge.logError(new Error(Ge.ERROR_TYPE.ParseError),{action:"PageInit",message:"server-side product data missing or invalid"});var Ze=new me,Ye=[];je.defaultProductId=parseInt(ge.QueryString.getValue("iid")||0);var Xe=!1;document.addEventListener("DOMContentLoaded",function(){u.call(this)}.bind(this)),document.getElementById("aside-content")&&document.getElementById("lower-content")&&document.getElementById("gallery-content")&&u.call(this)},this.init})),define("main",["Pages/FullProduct","Pages/MixAndMatch"],(function(){}));